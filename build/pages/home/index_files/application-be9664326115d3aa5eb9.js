/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 47896:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./collapse": 66934,
	"./collapse.js": 66934,
	"./feedback": 62418,
	"./feedback.js": 62418,
	"./menu-toggler": 63757,
	"./menu-toggler.js": 63757,
	"./packery": 82920,
	"./packery.js": 82920,
	"./postloader": 83548,
	"./postloader.js": 83548,
	"./red_alert": 50943,
	"./red_alert.js": 50943,
	"./to_top": 82144,
	"./to_top.js": 82144,
	"./top_menu": 54912,
	"./top_menu.js": 54912,
	"./user-defined": 702,
	"./user-defined.js": 702
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 47896;

/***/ }),

/***/ 27274:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./jquery.bar": 71786,
	"./jquery.bar.js": 71786,
	"./jquery.change_tag": 78492,
	"./jquery.change_tag.js": 78492,
	"./jquery.completable": 20131,
	"./jquery.completable.js": 20131,
	"./jquery.exists": 32019,
	"./jquery.exists.js": 32019,
	"./jquery.form_navigate": 63571,
	"./jquery.form_navigate.js": 63571,
	"./jquery.gallery_options": 91448,
	"./jquery.gallery_options.js": 91448,
	"./jquery.image_editable": 36797,
	"./jquery.image_editable.js": 36797,
	"./jquery.insert_at_caret": 32268,
	"./jquery.insert_at_caret.js": 32268,
	"./jquery.livetime": 39356,
	"./jquery.livetime.js": 39356,
	"./jquery.magnific_rel_gallery": 40198,
	"./jquery.magnific_rel_gallery.js": 40198,
	"./jquery.magnific_webm": 56503,
	"./jquery.magnific_webm.js": 56503,
	"./jquery.normalize_image": 18966,
	"./jquery.normalize_image.js": 18966,
	"./jquery.process": 90977,
	"./jquery.process.js": 90977,
	"./jquery.process_hiddent_content": 60015,
	"./jquery.process_hiddent_content.js": 60015,
	"./jquery.rateable": 22389,
	"./jquery.rateable.js": 22389,
	"./jquery.scroll_to": 6992,
	"./jquery.scroll_to.js": 6992,
	"./jquery.set_cursor_position": 98420,
	"./jquery.set_cursor_position.js": 98420,
	"./jquery.shiki_file": 6278,
	"./jquery.shiki_file.js": 6278,
	"./jquery.shiki_image": 48455,
	"./jquery.shiki_image.js": 48455,
	"./jquery.shiki_video": 57857,
	"./jquery.shiki_video.js": 57857,
	"./jquery.show_more": 34324,
	"./jquery.show_more.js": 34324,
	"./jquery.spoiler": 75225,
	"./jquery.spoiler.js": 75225,
	"./jquery.tag_name": 42253,
	"./jquery.tag_name.js": 42253,
	"./jquery.trigger_with_return": 10403,
	"./jquery.trigger_with_return.js": 10403,
	"./jquery.view": 88894,
	"./jquery.view.js": 88894,
	"./jquery.yellow_fade": 2668,
	"./jquery.yellow_fade.js": 2668,
	"./rails_ujs_modified": 7043,
	"./rails_ujs_modified.js": 7043
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 27274;

/***/ }),

/***/ 47470:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./p-animes": 35635,
	"./p-animes.js": 35635,
	"./p-animes/art": 8777,
	"./p-animes/art.js": 8777,
	"./p-animes/cosplay": 55981,
	"./p-animes/cosplay.js": 55981,
	"./p-animes/coub": 80511,
	"./p-animes/coub.js": 80511,
	"./p-animes/edit": 30118,
	"./p-animes/edit.js": 30118,
	"./p-animes/files": 64891,
	"./p-animes/files.js": 64891,
	"./p-animes/franchise": 34567,
	"./p-animes/franchise.js": 34567,
	"./p-animes/screenshots": 54861,
	"./p-animes/screenshots.js": 54861,
	"./p-animes/show": 78847,
	"./p-animes/show.js": 78847,
	"./p-animes/stas": 13029,
	"./p-animes/stas.js": 13029,
	"./p-animes_collection-index": 47808,
	"./p-animes_collection-index.js": 47808,
	"./p-articles/_form": 91797,
	"./p-articles/_form.js": 91797,
	"./p-characters": 79218,
	"./p-characters.js": 79218,
	"./p-clubs/_menu": 99292,
	"./p-clubs/_menu.js": 99292,
	"./p-clubs/broadcast": 38769,
	"./p-clubs/broadcast.js": 38769,
	"./p-clubs/edit": 95256,
	"./p-clubs/edit.js": 95256,
	"./p-clubs/images": 60646,
	"./p-clubs/images.js": 60646,
	"./p-clubs/show": 84573,
	"./p-clubs/show.js": 84573,
	"./p-collections/_form": 83685,
	"./p-collections/_form.js": 83685,
	"./p-contests/_form": 38259,
	"./p-contests/_form.js": 38259,
	"./p-contests/_proposing": 73552,
	"./p-contests/_proposing.js": 73552,
	"./p-contests/grid": 4150,
	"./p-contests/grid.js": 4150,
	"./p-contests/show": 31047,
	"./p-contests/show.js": 31047,
	"./p-critiques/_form": 75917,
	"./p-critiques/_form.js": 75917,
	"./p-dashboards/show": 89611,
	"./p-dashboards/show.js": 89611,
	"./p-dashboards/show_v2": 54398,
	"./p-dashboards/show_v2.js": 54398,
	"./p-db_entries/edit": 61286,
	"./p-db_entries/edit.js": 61286,
	"./p-db_entries/edit_field": 56069,
	"./p-db_entries/edit_field.js": 56069,
	"./p-dialogs": 90193,
	"./p-dialogs.js": 90193,
	"./p-list_imports": 22547,
	"./p-list_imports.js": 22547,
	"./p-messages": 38518,
	"./p-messages.js": 38518,
	"./p-moderations": 53269,
	"./p-moderations.js": 53269,
	"./p-oauth_applications": 47017,
	"./p-oauth_applications.js": 47017,
	"./p-pages/about": 17566,
	"./p-pages/about.js": 17566,
	"./p-pages/development": 37642,
	"./p-pages/development.js": 37642,
	"./p-pages/hentai": 21988,
	"./p-pages/hentai.js": 21988,
	"./p-pages/oauth": 80476,
	"./p-pages/oauth.js": 80476,
	"./p-people": 10569,
	"./p-people.js": 10569,
	"./p-polls": 56138,
	"./p-polls.js": 56138,
	"./p-profiles/comments": 44493,
	"./p-profiles/comments.js": 44493,
	"./p-profiles/edit": 22571,
	"./p-profiles/edit.js": 22571,
	"./p-profiles/favorites": 37254,
	"./p-profiles/favorites.js": 37254,
	"./p-profiles/ignores": 88840,
	"./p-profiles/ignores.js": 88840,
	"./p-profiles/moderation": 6327,
	"./p-profiles/moderation.js": 6327,
	"./p-profiles/show": 71578,
	"./p-profiles/show.js": 71578,
	"./p-profiles/videos": 99751,
	"./p-profiles/videos.js": 99751,
	"./p-recommendations-index": 41965,
	"./p-recommendations-index.js": 41965,
	"./p-reviews-critiques": 60421,
	"./p-reviews-critiques.js": 60421,
	"./p-statistics": 54542,
	"./p-statistics/": 54542,
	"./p-statistics/index": 54542,
	"./p-statistics/index.js": 54542,
	"./p-statistics/lists": 89907,
	"./p-statistics/lists.js": 89907,
	"./p-tests": 50517,
	"./p-tests.js": 50517,
	"./p-tests/achievements_notification": 88944,
	"./p-tests/achievements_notification.js": 88944,
	"./p-tests/editor": 8573,
	"./p-tests/editor.js": 8573,
	"./p-tests/momentjs": 27523,
	"./p-tests/momentjs.js": 27523,
	"./p-tests/news": 96443,
	"./p-tests/news.js": 96443,
	"./p-tests/show": 33837,
	"./p-tests/show.js": 33837,
	"./p-tests/vue": 16694,
	"./p-tests/vue.js": 16694,
	"./p-topics": 35765,
	"./p-topics/": 35765,
	"./p-topics/_critique_form": 57729,
	"./p-topics/_critique_form.js": 57729,
	"./p-topics/_extended_form": 19974,
	"./p-topics/_extended_form.js": 19974,
	"./p-topics/_form": 79842,
	"./p-topics/_form.js": 79842,
	"./p-topics/index": 35765,
	"./p-topics/index.js": 35765,
	"./p-topics/show": 63336,
	"./p-topics/show.js": 63336,
	"./p-translations": 73230,
	"./p-translations.js": 73230,
	"./p-user_rates": 17966,
	"./p-user_rates/": 17966,
	"./p-user_rates/index": 17966,
	"./p-user_rates/index.js": 17966,
	"./p-userlist_comparer": 72023,
	"./p-userlist_comparer.js": 72023,
	"./p-users/similar": 96734,
	"./p-users/similar.js": 96734
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 47470;

/***/ }),

/***/ 32351:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./achievements/notifier.pug": 90748,
	"./comments/notifier.pug": 76182,
	"./images/image.pug": 34499,
	"./polls/poll.pug": 37337,
	"./search/nothing_found.pug": 1488,
	"./search/options.pug": 96356,
	"./user_rates/button.pug": 32341,
	"./user_rates/extended.pug": 19586,
	"./user_rates/score.pug": 7353
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 32351;

/***/ }),

/***/ 59283:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./highcharts_colors": 34151,
	"./highcharts_colors.js": 34151,
	"./jquery.autocomplete": 17293,
	"./jquery.autocomplete.js": 17293,
	"./jquery.cacheimage": 33318,
	"./jquery.cacheimage.js": 33318,
	"./jquery.color": 21630,
	"./jquery.color.js": 21630,
	"./jquery.filedrop": 50730,
	"./jquery.filedrop.js": 50730,
	"./jquery.injectCSS": 42981,
	"./jquery.injectCSS.js": 42981,
	"./jquery.serialize-hash": 44588,
	"./jquery.serialize-hash.js": 44588,
	"./jquery.tipsy": 42936,
	"./jquery.tipsy.js": 42936,
	"./jquery.tools": 41742,
	"./jquery.tools.js": 41742,
	"./jquery.tooltip": 93370,
	"./jquery.tooltip.js": 93370,
	"./virous_mk_links_highlight": 72379,
	"./virous_mk_links_highlight.js": 72379
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 59283;

/***/ }),

/***/ 86949:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.description.js
var es_symbol_description = __webpack_require__(89463);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.async-iterator.js
var es_symbol_async_iterator = __webpack_require__(66412);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.has-instance.js
var es_symbol_has_instance = __webpack_require__(60193);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.match.js
var es_symbol_match = __webpack_require__(86964);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.match-all.js
var es_symbol_match_all = __webpack_require__(83142);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.replace.js
var es_symbol_replace = __webpack_require__(83237);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.search.js
var es_symbol_search = __webpack_require__(61833);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.species.js
var es_symbol_species = __webpack_require__(67947);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.split.js
var es_symbol_split = __webpack_require__(31073);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.aggregate-error.js
var es_aggregate_error = __webpack_require__(30067);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js
var es_array_concat = __webpack_require__(28706);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js
var es_array_filter = __webpack_require__(2008);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.flat.js
var es_array_flat = __webpack_require__(46449);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.flat-map.js
var es_array_flat_map = __webpack_require__(78350);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.from.js
var es_array_from = __webpack_require__(23418);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(74423);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.index-of.js
var es_array_index_of = __webpack_require__(25276);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__(23792);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.last-index-of.js
var es_array_last_index_of = __webpack_require__(8921);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js
var es_array_map = __webpack_require__(62062);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.reduce.js
var es_array_reduce = __webpack_require__(72712);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.reduce-right.js
var es_array_reduce_right = __webpack_require__(18863);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.reverse.js
var es_array_reverse = __webpack_require__(94490);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js
var es_array_slice = __webpack_require__(34782);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.sort.js
var es_array_sort = __webpack_require__(26910);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.species.js
var es_array_species = __webpack_require__(87478);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js
var es_array_splice = __webpack_require__(54554);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unscopables.flat.js
var es_array_unscopables_flat = __webpack_require__(93514);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unscopables.flat-map.js
var es_array_unscopables_flat_map = __webpack_require__(30237);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.constructor.js
var es_array_buffer_constructor = __webpack_require__(54743);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.slice.js
var es_array_buffer_slice = __webpack_require__(11745);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.has-instance.js
var es_function_has_instance = __webpack_require__(48957);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.global-this.js
var es_global_this = __webpack_require__(55081);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.stringify.js
var es_json_stringify = __webpack_require__(33110);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.to-string-tag.js
var es_json_to_string_tag = __webpack_require__(4731);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.map.js
var es_map = __webpack_require__(36033);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.acosh.js
var es_math_acosh = __webpack_require__(93153);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.hypot.js
var es_math_hypot = __webpack_require__(39469);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.to-string-tag.js
var es_math_to_string_tag = __webpack_require__(60479);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.parse-float.js
var es_number_parse_float = __webpack_require__(87220);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.define-getter.js
var es_object_define_getter = __webpack_require__(17427);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.define-setter.js
var es_object_define_setter = __webpack_require__(87607);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.entries.js
var es_object_entries = __webpack_require__(5506);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.from-entries.js
var es_object_from_entries = __webpack_require__(53921);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js
var es_object_get_own_property_descriptors = __webpack_require__(81278);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.lookup-getter.js
var es_object_lookup_getter = __webpack_require__(9220);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.lookup-setter.js
var es_object_lookup_setter = __webpack_require__(7904);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.values.js
var es_object_values = __webpack_require__(16034);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__(3362);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.all-settled.js
var es_promise_all_settled = __webpack_require__(96167);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.any.js
var es_promise_any = __webpack_require__(93518);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.finally.js
var es_promise_finally = __webpack_require__(9391);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.to-string-tag.js
var es_reflect_to_string_tag = __webpack_require__(15472);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js
var es_regexp_constructor = __webpack_require__(84864);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__(27495);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.flags.js
var es_regexp_flags = __webpack_require__(69479);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.test.js
var es_regexp_test = __webpack_require__(90906);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js
var es_regexp_to_string = __webpack_require__(38781);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.js
var es_set = __webpack_require__(31415);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.ends-with.js
var es_string_ends_with = __webpack_require__(99449);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js
var es_string_includes = __webpack_require__(21699);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js
var es_string_match = __webpack_require__(71761);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match-all.js
var es_string_match_all = __webpack_require__(28543);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.pad-end.js
var es_string_pad_end = __webpack_require__(35701);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.pad-start.js
var es_string_pad_start = __webpack_require__(68156);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js
var es_string_replace = __webpack_require__(25440);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace-all.js
var es_string_replace_all = __webpack_require__(79978);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.search.js
var es_string_search = __webpack_require__(5746);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js
var es_string_split = __webpack_require__(90744);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.starts-with.js
var es_string_starts_with = __webpack_require__(11392);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim.js
var es_string_trim = __webpack_require__(42762);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim-end.js
var es_string_trim_end = __webpack_require__(39202);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim-start.js
var es_string_trim_start = __webpack_require__(43359);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.float32-array.js
var es_typed_array_float32_array = __webpack_require__(34594);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.float64-array.js
var es_typed_array_float64_array = __webpack_require__(29833);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int8-array.js
var es_typed_array_int8_array = __webpack_require__(46594);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int16-array.js
var es_typed_array_int16_array = __webpack_require__(72107);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int32-array.js
var es_typed_array_int32_array = __webpack_require__(95477);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js
var es_typed_array_uint8_array = __webpack_require__(21489);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js
var es_typed_array_uint8_clamped_array = __webpack_require__(22134);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint16-array.js
var es_typed_array_uint16_array = __webpack_require__(3690);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint32-array.js
var es_typed_array_uint32_array = __webpack_require__(61740);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js
var es_typed_array_fill = __webpack_require__(75044);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.from.js
var es_typed_array_from = __webpack_require__(48345);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js
var es_typed_array_iterator = __webpack_require__(12887);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.of.js
var es_typed_array_of = __webpack_require__(52568);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js
var es_typed_array_set = __webpack_require__(28845);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js
var es_typed_array_sort = __webpack_require__(373);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js
var es_typed_array_to_string = __webpack_require__(33684);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.weak-map.js
var es_weak_map = __webpack_require__(73772);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.weak-set.js
var es_weak_set = __webpack_require__(30958);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var web_dom_collections_for_each = __webpack_require__(23500);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js
var web_dom_collections_iterator = __webpack_require__(62953);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.immediate.js
var web_immediate = __webpack_require__(59848);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.queue-microtask.js
var web_queue_microtask = __webpack_require__(122);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js
var web_url = __webpack_require__(3296);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.to-json.js
var web_url_to_json = __webpack_require__(27208);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.js
var web_url_search_params = __webpack_require__(48408);
// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js
var runtime = __webpack_require__(7452);
// EXTERNAL MODULE: ./node_modules/webfontloader/webfontloader.js
var webfontloader = __webpack_require__(15371);
var webfontloader_default = /*#__PURE__*/__webpack_require__.n(webfontloader);
// EXTERNAL MODULE: ./node_modules/magnific-popup/dist/jquery.magnific-popup.js
var jquery_magnific_popup = __webpack_require__(66732);
// EXTERNAL MODULE: ./node_modules/jquery-appear-original/index.js
var jquery_appear_original = __webpack_require__(76973);
// EXTERNAL MODULE: ./node_modules/jquery-mousewheel/jquery.mousewheel.js
var jquery_mousewheel = __webpack_require__(94410);
// EXTERNAL MODULE: ./node_modules/turbolinks/dist/turbolinks.js
var turbolinks = __webpack_require__(6224);
var turbolinks_default = /*#__PURE__*/__webpack_require__.n(turbolinks);
// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
// EXTERNAL MODULE: ./node_modules/throttle-debounce/esm/index.js
var esm = __webpack_require__(73700);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/bindings.js
/* harmony default export */ const bindings = ({'turbolinks:load':[],'turbolinks:before-cache':[]});
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/page_load.js
/* harmony default export */ const page_load = ((...args)=>{var adjustedLength=Math.max(args.length,1);var conditions=args.slice(0,adjustedLength-1);var callback=args[adjustedLength-1];bindings['turbolinks:load'].push({conditions,callback});});
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/page_unload.js
/* harmony default export */ const page_unload = ((...args)=>{var adjustedLength=Math.max(args.length,1);var conditions=args.slice(0,adjustedLength-1);var callback=args[adjustedLength-1];bindings['turbolinks:before-cache'].push({conditions,callback});});
// EXTERNAL MODULE: ./app/packs/javascripts/utils/i18n.js + 1 modules
var i18n = __webpack_require__(12691);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/p.js
var p = __webpack_require__(94324);
// EXTERNAL MODULE: ./node_modules/lodash/camelCase.js
var camelCase = __webpack_require__(84058);
var camelCase_default = /*#__PURE__*/__webpack_require__.n(camelCase);
// EXTERNAL MODULE: ./node_modules/lodash/remove.js
var remove = __webpack_require__(14174);
var remove_default = /*#__PURE__*/__webpack_require__.n(remove);
// EXTERNAL MODULE: ./node_modules/shiki-decorators/index.js + 2 modules
var shiki_decorators = __webpack_require__(89752);
;// CONCATENATED MODULE: ./app/packs/javascripts/models/shiki_user.js
var PUBLIC_FIELDS=['id','url','is_moderator','is_day_registered','is_week_registered','is_comments_auto_collapsed','is_comments_auto_loaded'];class ShikiUser{constructor(data){this.data=data;this.isSignedIn=!!this.data.id;PUBLIC_FIELDS.forEach(field=>this[camelCase_default()(field)]=this.data[field]);}isTopicIgnored(topicId){return this.data.ignored_topics.indexOf(topicId)!==-1;}isUserIgnored(userId){return this.data.ignored_users.indexOf(userId)!==-1;}ignoreTopic(topicId){return this.data.ignored_topics.push(parseInt(topicId));}unignoreTopic(topicId){return remove_default()(this.data.ignored_topics,topic=>topic===parseInt(topicId));}}
// EXTERNAL MODULE: ./node_modules/faye/src/faye_browser.js
var faye_browser = __webpack_require__(45979);
var faye_browser_default = /*#__PURE__*/__webpack_require__.n(faye_browser);
// EXTERNAL MODULE: ./node_modules/js-cookie/dist/js.cookie.mjs
var js_cookie = __webpack_require__(18987);
// EXTERNAL MODULE: ./node_modules/lodash/difference.js
var difference = __webpack_require__(66245);
var difference_default = /*#__PURE__*/__webpack_require__.n(difference);
// EXTERNAL MODULE: ./node_modules/lodash/intersection.js
var intersection = __webpack_require__(5287);
var intersection_default = /*#__PURE__*/__webpack_require__.n(intersection);
// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js
var isEmpty = __webpack_require__(62193);
var isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);
// EXTERNAL MODULE: ./node_modules/@morr/user-idle/index.js
var user_idle = __webpack_require__(44704);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/faye_loader.js
/* provided dependency */ var $ = __webpack_require__(74692);
var _class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}/* eslint no-console: 0 */ /* global IS_FAYE_LOGGING */var WORLD_CHANGED_EVENTS=['turbolinks:load','ajax:success','postloader:success','clickloaded:success'];var INACTIVITY_INTERVAL=10*60*1000;var FayeLoader=(_class=class FayeLoader{constructor(){this.client=null;this.subscriptions={};this.apply();// refresh subscruptions when something is changed in outside world
$(document).on(WORLD_CHANGED_EVENTS.join(' '),this.apply);// disconnect faye after 10 minutes of user inactivity
(0,user_idle/* default */.A)({onIdle:this._idleShutdown,onActive:this._idleRestore,idle:INACTIVITY_INTERVAL}).start();}get id(){var _this$client;return(_this$client=this.client)===null||_this$client===void 0||(_this$client=_this$client._dispatcher)===null||_this$client===void 0?void 0:_this$client.clientId;}apply(){var $targets=$('.b-forum');if(!$targets.length){$targets=$('[data-faye]');}if(!this.client&&($targets.length||window.FAYE_CHANNEL)){this.connect();}var channels={};if(window.FAYE_CHANNEL){channels[window.FAYE_CHANNEL]=$(document.body);}$targets.each((index,node)=>{var fayeChannels=$(node).data('faye');if(fayeChannels!==false&&isEmpty_default()(fayeChannels)){console.warn('no faye channels found for',node);}if(fayeChannels){fayeChannels.forEach(channel=>channels[channel]=$(node));}});this.unsubscribe(channels);this.update(channels);this.subscribe(channels);}connect(){var port=window.ENV==='development'?':9292':'';var hostname=window.ENV==='development'?location.hostname:`faye.${location.hostname}`;this.client=new (faye_browser_default()).Client(window.FAYE_URL,{timeout:300,retry:5// endpoints: {
//   websocket: "#{location.protocol}//#{location.hostname}#{port}/server-v1"
// }
});// @client.disable 'eventsource'
if(js_cookie/* default */.A.get('faye-disable-websocket')){this.client.disable('websocket');}// console.log 'faye connected' if IS_FAYE_LOGGING
}_disconnect(){this.client.disconnect();this.client=null;this.subscriptions={};}unsubscribe(channels){var _Object$keys,_toStay,_difference;var toStay=Object.keys(channels);var toRemove=(_Object$keys=Object.keys(this.subscriptions),(_difference=(difference_default()),_toStay=toStay,function difference(_argPlaceholder){return _difference(_argPlaceholder,_toStay);})(_Object$keys));toRemove.forEach(channel=>{this.client.unsubscribe(channel);delete this.subscriptions[channel];if(true){console.log(`faye unsubscribed ${channel}`);}});}update(channels){var _Object$keys2,_Object$keys3,_intersection;(_Object$keys2=Object.keys(channels),(_intersection=(intersection_default()),_Object$keys3=Object.keys(this.subscriptions),function intersection(_argPlaceholder2){return _intersection(_argPlaceholder2,_Object$keys3);})(_Object$keys2)).forEach(channel=>this.subscriptions[channel].node=channels[channel]);}subscribe(channels){var _Object$keys4,_Object$keys5,_difference2;(_Object$keys4=Object.keys(channels),(_difference2=(difference_default()),_Object$keys5=Object.keys(this.subscriptions),function difference(_argPlaceholder3){return _difference2(_argPlaceholder3,_Object$keys5);})(_Object$keys4)).forEach(channel=>{var subscription=this.client.subscribe(channel,data=>{// это колбек, в котором мы получили уведомление от faye
if(true){console.log(['faye:received',channel,data]);}// сообщения от самого себя не принимаем
if(data.publisher_faye_id===this.id){return;}this.subscriptions[channel].node.trigger(`faye:${data.event}`,data);});this.subscriptions[channel]={node:channels[channel],channel:subscription};if(true){console.log(`faye subscribed ${channel}`);}});}_idleShutdown(){if(!this.client){return;}if(true){console.log('faye disconnect on idle');}this._disconnect();}_idleRestore(){if(this.client){return;}if(true){console.log('faye connect on active');}this.connect();this.apply();}},(_applyDecoratedDescriptor(_class.prototype,"apply",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"apply"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_idleShutdown",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_idleShutdown"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_idleRestore",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_idleRestore"),_class.prototype)),_class);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/jst.js
var jst = __webpack_require__(60957);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/comments_notifier.js
/* provided dependency */ var comments_notifier_$ = __webpack_require__(74692);
var comments_notifier_class;function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function comments_notifier_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var COMMENT_SELECTOR='div.b-appear_marker.active';var FAYE_LOADER_SELECTOR='.faye-loader';var TRACK_EVENTS=['turbolinks:load','faye:loaded','ajax:success','postloader:success','clickloaded:success'];// уведомлялка о новых комментариях
// назначение класса - смотреть на странице новые комментаы и отображать информацию об этом
var CommentsNotifier=(comments_notifier_class=class CommentsNotifier{constructor(){this.$container=null;this.currentCounter=0;this.maxTop=48;this.blockTop=0;comments_notifier_$(document).on('turbolinks:before-cache',this._cleanup);comments_notifier_$(document).on('appear',this._appear);comments_notifier_$(document).on('faye:added',this._incrementCounter);comments_notifier_$(document).on(TRACK_EVENTS.join(' '),this._refresh);// явное указание о скрытии
comments_notifier_$(document).on('disappear',this._decrementCounter);// при добавление блока о новом комментарии/топике делаем инкремент
comments_notifier_$(document).on('reappear',this._incrementCounter);this._refresh();comments_notifier_$(window).scroll(()=>{if(!this.$container||this.isStickyMenu){return;}this.scroll=comments_notifier_$(window).scrollTop();if(this.scroll<=this.maxTop||this.scroll>this.maxTop&&this.blockTop!==0){this._move();}});}_$container(){if(!this.$container){this.$container=comments_notifier_$(this._render()).appendTo(document.body).on('click',()=>{var $firstUnread=comments_notifier_$(`${COMMENT_SELECTOR}, ${FAYE_LOADER_SELECTOR}`).first();var firstUnreadNode=$firstUnread.closest('[data-appear_type]');comments_notifier_$.scrollTo(firstUnreadNode||$firstUnread);});this.scroll=comments_notifier_$(window).scrollTop();}return this.$container;}_render(){return jst/* default */.A['comments/notifier']();}_cleanup(){if(this.$container){this.$container.remove();this.$container=null;}}_refresh(){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var $commentNew,$fayeLoader,count;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay/* default */.Ay)();case 2:_this.scroll=comments_notifier_$(window).scrollTop();_this.isStickyMenu=comments_notifier_$('.l-top_menu-v2').css('position')==='sticky';$commentNew=comments_notifier_$(COMMENT_SELECTOR);$fayeLoader=comments_notifier_$(FAYE_LOADER_SELECTOR);count=$commentNew.length;$fayeLoader.each(function(){var _$$data;count+=((_$$data=comments_notifier_$(this).data('ids'))===null||_$$data===void 0?void 0:_$$data.length)||0;});_this._update(count);case 9:case"end":return _context.stop();}},_callee);}))();}_update(count){this.currentCounter=count;if(count>0){this._$container().show().html(this.currentCounter);}else if(this.$container){this._$container().hide();}}_appear(e,$appeared,_byClick){var $nodes=$appeared.filter(`${COMMENT_SELECTOR}, ${FAYE_LOADER_SELECTOR}`).not(function(){return comments_notifier_$(this).data('disabled');});this._update(this.currentCounter-$nodes.length);}_decrementCounter({target}){if(target.attributes['data-disabled']&&target.attributes['data-disabled'].value==='true'){return;}this._update(this.currentCounter-1);}_incrementCounter(){this._update(this.currentCounter+1);}_move(){this.blockTop=Math.max(0,this.maxTop-this.scroll);this._$container().css({top:this.blockTop});}},(comments_notifier_applyDecoratedDescriptor(comments_notifier_class.prototype,"_cleanup",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comments_notifier_class.prototype,"_cleanup"),comments_notifier_class.prototype),comments_notifier_applyDecoratedDescriptor(comments_notifier_class.prototype,"_refresh",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comments_notifier_class.prototype,"_refresh"),comments_notifier_class.prototype),comments_notifier_applyDecoratedDescriptor(comments_notifier_class.prototype,"_appear",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comments_notifier_class.prototype,"_appear"),comments_notifier_class.prototype),comments_notifier_applyDecoratedDescriptor(comments_notifier_class.prototype,"_decrementCounter",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comments_notifier_class.prototype,"_decrementCounter"),comments_notifier_class.prototype),comments_notifier_applyDecoratedDescriptor(comments_notifier_class.prototype,"_incrementCounter",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comments_notifier_class.prototype,"_incrementCounter"),comments_notifier_class.prototype)),comments_notifier_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/achievements_notifier.js
/* provided dependency */ var achievements_notifier_$ = __webpack_require__(74692);
function achievements_notifier_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */achievements_notifier_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function achievements_notifier_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function achievements_notifier_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){achievements_notifier_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){achievements_notifier_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var MAXIMUM_ACHIEVEMETNS=7;class AchievementsNotifier{constructor(){this.$container=null;this.achievementsToNotify=[];achievements_notifier_$(document).on('faye:achievements',(_e,data)=>this.notify(data.achievements));}notify(achievements){var _this=this;if(achievements.length>MAXIMUM_ACHIEVEMETNS){return;}achievements.forEach(/*#__PURE__*/function(){var _ref=achievements_notifier_asyncToGenerator(/*#__PURE__*/achievements_notifier_regeneratorRuntime().mark(function _callee2(achievement,index){var closeTimeout,$achievement;return achievements_notifier_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(index>0)){_context2.next=3;break;}_context2.next=3;return (0,delay/* default */.Ay)(750*index);case 3:closeTimeout=null;$achievement=achievements_notifier_$(_this._render(achievement)).addClass('appearing').appendTo(_this._$container()).on('click',/*#__PURE__*/function(){var _ref2=achievements_notifier_asyncToGenerator(/*#__PURE__*/achievements_notifier_regeneratorRuntime().mark(function _callee({target}){return achievements_notifier_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(target.tagName==='A')){_context.next=2;break;}return _context.abrupt("return");case 2:if(!$achievement.hasClass('removing')){_context.next=4;break;}return _context.abrupt("return");case 4:$achievement.addClass('removing');_context.next=7;return (0,delay/* default */.Ay)(1000);case 7:if(closeTimeout){$achievement.remove();}case 8:case"end":return _context.stop();}},_callee);}));return function(_x3){return _ref2.apply(this,arguments);};}()).on('mouseover',()=>{if(closeTimeout){clearTimeout(closeTimeout);$achievement.removeClass('removing');closeTimeout=null;}}).on('mouseleave',()=>{closeTimeout=setTimeout(()=>$achievement.click(),5000);});_context2.next=7;return (0,delay/* default */.Ay)();case 7:$achievement.removeClass('appearing');closeTimeout=setTimeout(()=>$achievement.click(),30000);case 9:case"end":return _context2.stop();}},_callee2);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());}_$container(){if(!this.$container){this.$container=achievements_notifier_$('<div class="b-achievements_notifier"></div>');achievements_notifier_$(document.body).append(this.$container);}return this.$container;}_render(achievement,event){return jst/* default */.A['achievements/notifier']({achievement,event});}}
// EXTERNAL MODULE: ./app/packs/javascripts/utils/dayjs.js
var dayjs = __webpack_require__(13269);
;// CONCATENATED MODULE: ./app/packs/javascripts/application.js
/* provided dependency */ var application_$ = __webpack_require__(74692);
turbolinks_default().start();var requireVendor=__webpack_require__(59283);requireVendor.keys().forEach(requireVendor);window.pageLoad=page_load;window.pageUnload=page_unload;window.I18n=i18n/* default */.A;window.p=p/* default */.A;var requireJqueryPlugins=__webpack_require__(27274);requireJqueryPlugins.keys().forEach(requireJqueryPlugins);var requirePages=__webpack_require__(47470);requirePages.keys().forEach(requirePages);var requireBlocks=__webpack_require__(47896);requireBlocks.keys().forEach(requireBlocks);window.dayjs=dayjs["default"];application_$(document).one('turbolinks:load',()=>{if(!window.JS_EXPORTS){window.JS_EXPORTS={};}var $body=application_$(document.body);window.ENV=$body.data('env');window.SHIKI_USER=new ShikiUser($body.data('user'));window.LOCALE=$body.data('locale');window.FAYE_URL=$body.data('faye_url');window.CAMO_URL=$body.data('camo_url');if(window.SHIKI_USER){window.FAYE_CHANNEL=$body.data('faye');}window.I18n.locale=window.LOCALE;dayjs["default"].locale(window.LOCALE);window.MOMENT_DIFF=(0,dayjs["default"])($body.data('server_time')).diff(new Date());if(window.SHIKI_USER.isSignedIn&&!window.SHIKI_FAYE_LOADER){window.SHIKI_COMMENTS_NOTIFIER=new CommentsNotifier();window.SHIKI_ACHIEVEMENTS_NOTIFIER=new AchievementsNotifier();// delay to prevent page freeze
(0,delay/* default */.Ay)(150).then(()=>window.SHIKI_FAYE_LOADER=new FayeLoader());}application_$.appear('.b-appear_marker.active');application_$.formNavigate({size:250,message:window.I18n.t('frontend.application.sure_to_leave_page')});var match=window.location.hash.match(/^#(comment-\d+)$/);if(match){application_$(`a[name=${match[1]}]`).closest('.b-comment').yellowFade();}var windowWidth=window.innerWidth;var windowHeight=window.innerHeight;application_$(window).on('resize',(0,esm/* debounce */.s)(500,()=>{// additional check to prevent fake resize events on iOS
if(windowWidth!==window.innerWidth||windowHeight!==window.innerHeigh){application_$(document.body).trigger('resize:debounced');windowWidth=window.innerWidth;windowHeight=window.innerHeight;}}));application_$(window).on('scroll',(0,esm/* throttle */.n)(750,()=>application_$(document.body).trigger('scroll:throttled')));});application_$(document).on(Object.keys(bindings).join(' '),e=>{bindings[e.type].forEach(group=>{var bodyClasses;if(group.conditions.length&&group.conditions[0][0]==='.'){bodyClasses=group.conditions.filter(v=>v[0]==='.').map(v=>`p-${v.slice(1)} `);}else{bodyClasses=[];}if(!group.conditions.length){group.callback();}else if(bodyClasses&&bodyClasses.some(v=>document.body.className.indexOf(v)!==-1)){group.callback();}else if(group.conditions.some(v=>document.body.id===v)){group.callback();}});});application_$(document).on('selectionchange',_=>{var selection;if(window.getSelection){selection=window.getSelection();}else if(document.getSelection){selection=document.getSelection();}if(selection&&selection.focusNode){var _$$closest$view;(_$$closest$view=application_$(selection.focusNode).closest('[data-selection_boundary]').view())===null||_$$closest$view===void 0||_$$closest$view.setSelection();}});
// EXTERNAL MODULE: ./node_modules/shiki-utils/index.js + 5 modules
var shiki_utils = __webpack_require__(79308);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/flash.js
var flash = __webpack_require__(94442);
;// CONCATENATED MODULE: ./app/packs/javascripts/turbolinks_load.js
/* provided dependency */ var turbolinks_load_$ = __webpack_require__(74692);
// import bowser from 'bowser';
turbolinks_load_$(document).on('turbolinks:load',()=>{window.flash=shiki_utils.flash;// document.body.classList.add(
//   bowser.name.toLowerCase().replace(/ /g, '_')
// );
turbolinks_load_$('p.flash-notice').each((k,v)=>{if(v.innerHTML.length){shiki_utils.flash.notice(v.innerHTML);}});turbolinks_load_$('p.flash-alert').each((k,v)=>{if(v.innerHTML.length){shiki_utils.flash.error(v.innerHTML);}});var flashMessage=(0,flash/* popFlash */.o)();if(flashMessage){shiki_utils.flash.notice(flashMessage);}turbolinks_load_$(document.body).process();// переключатели видов отображения списка
turbolinks_load_$('.b-list_switchers .switcher').on('click',({currentTarget})=>{js_cookie/* default */.A.set(turbolinks_load_$(currentTarget).data('name'),turbolinks_load_$(currentTarget).data('value'),{expires:730,path:'/'});turbolinks_default().visit(document.location.href);});});
// EXTERNAL MODULE: ./app/packs/javascripts/dynamic_elements/_parser.js + 35 modules
var _parser = __webpack_require__(96219);
;// CONCATENATED MODULE: ./app/packs/javascripts/turbolinks_before_cache.js
/* provided dependency */ var turbolinks_before_cache_$ = __webpack_require__(74692);
turbolinks_before_cache_$(document).on('turbolinks:before-cache',()=>{// need to reset style of HTML because it can be set to 'overflow: hidden' by magnificPopup
turbolinks_before_cache_$('html').attr('style',null);// need to remove old tooltips
turbolinks_before_cache_$('.tipsy').remove();turbolinks_before_cache_$('body > .tooltip').remove();turbolinks_before_cache_$('[data-dynamic]').each((_index,node)=>{var view=turbolinks_before_cache_$(node).view();if(view&&view.destroy){view.destroy();}}).addClass(_parser/* default */.A.PENDING_CLASS);var jsExportKeys=turbolinks_before_cache_$(document.body).data('js_export_supervisor_keys');if(!isEmpty_default()(jsExportKeys)){dumpJsExports(jsExportKeys);}// TODO: remove after moving processCurrentDom logic into DynamicParser
turbolinks_before_cache_$('.b-video, .b-tooltipped, .b-spoiler, .b-image, .b-show_more').addClass('unprocessed');turbolinks_before_cache_$('.anime-tooltip-processed').removeClass('anime-tooltip-processed').addClass('anime-tooltip');turbolinks_before_cache_$('.bubbled-processed').removeClass('bubbled-processed').addClass('bubbled');// height shortener
turbolinks_before_cache_$('.b-height_shortener').each((_index,node)=>{turbolinks_before_cache_$(node).prev().removeClass('b-height_shortened').css('height','');turbolinks_before_cache_$(node).remove();});});function dumpJsExports(keys){var jsExports={};keys.forEach(plural=>{var singular=simpleSingularize(plural);turbolinks_before_cache_$(`[data-track_${singular}]`).each((_index,node)=>{var $node=turbolinks_before_cache_$(node);var model=$node.view()&&$node.view().model||turbolinks_before_cache_$(node).data('model');if(!model){return;}if(singular==='user_rate'){var type=turbolinks_before_cache_$(node).data(`track_${singular}`).split(':')[0];if(!model.id){return;}// because there is default placeholder w/o id
if(!jsExports[plural]){jsExports[plural]={};}if(!jsExports[plural][type]){jsExports[plural][type]=[];}jsExports[plural][type].push(model);}else{if(!jsExports[plural]){jsExports[plural]=[];}jsExports[plural].push(model);}});});turbolinks_before_cache_$('script#js_export').html(`window.JS_EXPORTS = ${JSON.stringify(jsExports)};`);}function simpleSingularize(word){if(word.endsWith('ies')){return word.slice(0,-3)+'y';}else if(word.endsWith('tes')){// Handles cases like "rates" -> "rate"
return word.slice(0,-1);}else if(word.endsWith('es')){// Handles cases like "boxes" -> "box"
return word.slice(0,-2);}else if(word.endsWith('s')){// Removes the ending 's' for simple plural forms like "cars" -> "car"
return word.slice(0,-1);}return word;// Return the original word if no rules apply
}
;// CONCATENATED MODULE: ./app/packs/entrypoints/application.js
/* provided dependency */ var entrypoints_application_$ = __webpack_require__(74692);
// do not remove. a lot of errors in old browsers otherwise (windows phone browser for example)
// some polyfills to support chrome 49
// import 'core-js/features/object/values';
// import 'core-js/features/object/entries';
// import 'core-js/features/array/includes';
// import 'core-js/features/string/pad-start';
// import 'core-js/features/string/pad-end';
entrypoints_application_$(()=>setTimeout(()=>webfontloader_default().load({google:{families:['Open Sans:400,600,700']},classes:false,events:false}),50));var key1='$';window[key1]=__webpack_require__(74692);var key2='jQuery';window[key2]=__webpack_require__(74692);

/***/ }),

/***/ 66934:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18987);
/* provided dependency */ var $ = __webpack_require__(74692);
$(document).on('click','.collapse',({currentTarget},custom)=>{var $node=$(currentTarget);var actionText=$node.children('.action').html();var isHide=!!actionText.match(/свернуть|спрятать|collapse|hide/);$node.toggleClass('triggered',isHide);// блок-заглушка, в которую сворачивается контент
var $placeholder=$node.next();if(!$placeholder.hasClass('collapsed')){$placeholder=$placeholder.next();}// контент, убираемый под спойлер
var $hideable=$placeholder.next();// если в $hideable ничего, значит надо идти на уровень выше и брать next оттуда
if(!$hideable.exists()){$hideable=$node.parent().next();}// скрываем не только следующий элемент, но и все последующие с классом collapse-merged
while($hideable.last().next().hasClass('collapse-merged')){$hideable=$hideable.add($hideable.last().next());}// при этом игнорируем то, что имеет класс collapse-ignored
if($hideable.length>1){$hideable=$hideable.filter(':not(.collapse-ignored)');}if(isHide){$placeholder.show();$hideable.hide();}else{$hideable.show();$placeholder.hide();}// корректный текст для кнопки действия
$node.children('.action').html(function(){var $action=$(this);if($action.hasClass('half-hidden')){if(isHide){$action.hide();}else{$action.show();}}if(isHide){return $action.html().replace('свернуть','развернуть').replace('спрятать','показать').replace('hide','show').replace('collapse','expand');}return $action.html().replace('развернуть','свернуть').replace('показать','спрятать').replace('show','hide').replace('expand','collapse');});if(!custom){var id=$node.attr('id');if(id&&id!==''&&id.indexOf('-')!==-1){var name=id.split('-').slice(1).join('-')+';';var collapses=js_cookie__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get('collapses')||'';if(isHide&&collapses.indexOf(name)===-1){js_cookie__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.set('collapses',collapses+name,{expires:730,path:'/'});}else if(!isHide&&collapses.indexOf(name)!==-1){js_cookie__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.set('collapses',collapses.replace(name,''),{expires:730,path:'/'});}}}$placeholder.next().trigger('show');});// всем картинкам внутри спойлера надо заново проверить высоту
// $hideable.find('img').addClass 'check-width'
// клик на "свернуть"
$(document).on('click','.collapsed',({currentTarget})=>{var $trigger=$(currentTarget).prev();if(!$trigger.hasClass('collapse')){$trigger=$trigger.prev();}$trigger.trigger('click');});$(document).on('click','.hide-expanded',({currentTarget})=>{$(currentTarget).parent().prev().trigger('click');});// клик на содержимое спойлера
$(document).on('click','.spoiler.target',({currentTarget})=>{if(!$(currentTarget).hasClass('dashed')){return;}$(currentTarget).hide().prev().show().prev().show();});

/***/ }),

/***/ 62418:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79308);
/* harmony import */ var _views_application_shiki_modal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(49946);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
$(document).on('turbolinks:load',()=>{var $feedback=$('.b-feedback');$('.marker-positioner',$feedback).on('ajax:success',(e,data)=>{var $form=$(data);var modal=new _views_application_shiki_modal__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A($form);$form.one('mouseover',()=>{var $antispam=$form.find('input[data-antispam]');if($antispam.length){$antispam.val($antispam.data('token').replace('antispam-',''));}}).on('ajax:success',()=>{shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.notice(_utils_i18n__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.t('frontend.blocks.feedback.message_sent'));modal.close();});});});

/***/ }),

/***/ 63757:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$(document).on('turbolinks:load',()=>{var $menu=$('.menu-toggler');if(!$menu.exists()){return;}// переключалка выезжания меню
$menu.on('click',()=>{$('.l-page').toggleClass('menu-expanded');});});

/***/ }),

/***/ 82920:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$(()=>$(window).on('resize:debounced',()=>$('.packery').each(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var packery;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:packery=$(this).data('packery');packery.layout();_context.next=4;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(1250);case 4:packery.layout();case 5:case"end":return _context.stop();}},_callee,this);})))));

/***/ }),

/***/ 83548:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24418);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$(()=>{$.appear('.b-postloader');});// dynamic load of content for scrolled page
$(document).on('click appear','.b-postloader',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee({currentTarget,type}){var $postloader,page,loading,url,filter,_yield$axios$get,data,$data,$newPostloader,pagesLimit,$prevLink,prevUrl,match,currentPage,newPrevPage,newPrevUrl,$insertContent;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$postloader=$(currentTarget);page=($postloader.data('page')||1)+1;if(!($postloader.data('locked')||type==='appear'&&$postloader.data('ignore-appear'))){_context.next=4;break;}return _context.abrupt("return");case 4:loading=_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.lib.postloader.loading');url=$postloader.data('remote');filter=$postloader.data('filter');$postloader.html(`<div class="ajax-loading vk-like" title="${loading}..." />`).data({locked:true});_context.next=10;return _utils_axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(url);case 10:_yield$axios$get=_context.sent;data=_yield$axios$get.data;$data=$('<div>').append(data.content);if(filter){filterPresentEntries($data,$postloader.parent(),filter);}$postloader.trigger('postloader:before',[$data,data]);$newPostloader=data.postloader?$(data.postloader):$data.find('.b-postloader');if($newPostloader.length){$newPostloader.attr('data-page',page);$newPostloader.attr('data-pages_limit',$postloader.data('pages_limit'));$newPostloader.attr('data-insert_into',$postloader.data('insert_into'));if(page>=($newPostloader.data('pages_limit')||100)){$newPostloader.attr('data-locked',true);pagesLimit=$newPostloader.data('pages_limit');$prevLink=$newPostloader.find('a.prev');prevUrl=$prevLink.attr('href');match=prevUrl.match(/(?:\?|&|\/)page(?:=|\/)(\d+)/);if(match){currentPage=parseInt(match[1])+1;newPrevPage=currentPage-pagesLimit*2+1;if(newPrevPage<0){$prevLink.remove();}else{newPrevUrl=prevUrl.replace(/(\?|&|\/)page(=|\/)(\d+)/,`$1page$2${newPrevPage}`).replace(/&page=1$/,'').replace('?page=1&','?').replace(/\?page=1$/,'').replace(/\/page\/1/,'').replace(/\/$/,'');$prevLink.attr('href',newPrevUrl);}}}}if(data.postloader){$postloader.replaceWith($newPostloader);$postloader=$newPostloader;}$insertContent=$data.children();($postloader.data('insert_into')?$($postloader.data('insert_into')).append($insertContent):$insertContent.insertBefore($postloader)).process(data.JS_EXPORTS);// .process must be called after new content is inserted into DOM
$postloader.trigger('postloader:success');if(!data.postloader){$postloader.remove();}// no need to set `locked: false` becaise $postloader is replaced by new content
// $postloader.data({ locked: false });
case 22:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());function filterPresentEntries($newEntries,$root,filter){var presentIds=$(`.${filter}`,$root).toArray().map(v=>v.id).filter(v=>v);var excludeSelector=presentIds.map(id=>`.${filter}#${id}`).join(',');$newEntries.children().filter(excludeSelector).remove();}

/***/ }),

/***/ 50943:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18987);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$(document).on('turbolinks:load',()=>{$('.b-hot_topics-v2.red-alert .b-close').on('click',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var $block;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$block=$('.b-hot_topics-v2.red-alert');js_cookie__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.set($(e.currentTarget).data('cookie-name'),'1',{expires:720});$block.addClass('removing');_context.next=5;return (0,delay__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Ay)(1000);case 5:$block.remove();case 6:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());});

/***/ }),

/***/ 82144:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79308);
/* provided dependency */ var $ = __webpack_require__(74692);
var toTopVisible=null;var $toTop=null;var scrollDisabled=false;var scrollBinded=false;$(document).on('turbolinks:load',()=>{if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_0__.isMobile)()){return;}$toTop=$('.b-to-top');toTopVisible=null;toggle();$toTop.on('click',()=>{hide();scrollDisabled=true;$('body,html').animate({scrollTop:0},50,()=>scrollDisabled=false);});if(!scrollBinded){scrollBinded=true;$(window).on('scroll:throttled',toggle);}});function toggle(){if(scrollDisabled){return;}if($(window).scrollTop()>$('.l-top_menu-v2').height()){show();}else{hide();}}function show(){if(toTopVisible===null||toTopVisible===false){$toTop.addClass('active');toTopVisible=true;}}function hide(){if(toTopVisible===null||toTopVisible===true){$toTop.removeClass('active');toTopVisible=false;}}

/***/ }),

/***/ 54912:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
// EXTERNAL MODULE: ./node_modules/throttle-debounce/esm/index.js
var esm = __webpack_require__(73700);
// EXTERNAL MODULE: ./node_modules/turbolinks/dist/turbolinks.js
var turbolinks = __webpack_require__(6224);
var turbolinks_default = /*#__PURE__*/__webpack_require__.n(turbolinks);
// EXTERNAL MODULE: ./node_modules/tiny-uri/dist/tiny-uri.js
var tiny_uri = __webpack_require__(73148);
// EXTERNAL MODULE: ./node_modules/shiki-decorators/index.js + 2 modules
var shiki_decorators = __webpack_require__(89752);
// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js
var isEmpty = __webpack_require__(62193);
var isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/view.js
var view = __webpack_require__(27349);
// EXTERNAL MODULE: ./node_modules/p-defer/index.js
var p_defer = __webpack_require__(97313);
// EXTERNAL MODULE: ./node_modules/shiki-utils/index.js + 5 modules
var shiki_utils = __webpack_require__(79308);
// EXTERNAL MODULE: ./app/packs/javascripts/services/ajax_cacher.js
var ajax_cacher = __webpack_require__(68292);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/jst.js
var jst = __webpack_require__(60957);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/i18n.js + 1 modules
var i18n = __webpack_require__(12691);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/search/index_engine.js
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}class IndexEngine{constructor(){this.searchDeferred=undefined;this.isAutocomplete=false;this.debouncedSearch=(0,esm/* debounce */.s)(250,v=>this._search(v));}cancel(){this.phrase='';}search(phrase){this.phrase=phrase;return this.searchDeferred.promise;}get $content(){return $('.b-search-results');}get phrase(){return this._phrase;}set phrase(value){this._phrase=value;this._buildSearchPromise();if(this.phrase!==undefined){this._showAjax();if(isEmpty_default()(this.phrase)){this._search(this.phrase);}else{this.debouncedSearch(this.phrase);}}else{this._resolveSearchPromise();}}_search(phrase){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$ajaxCacher$fet,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return ajax_cacher/* default */.A.fetch(_this._searchUrl(phrase));case 2:_yield$ajaxCacher$fet=_context.sent;data=_yield$ajaxCacher$fet.data;status=_yield$ajaxCacher$fet.status;if(!(status!==200&&status!==451)){_context.next=10;break;}// 451: age_restricted
shiki_utils.flash.error(i18n/* default */.A.t('frontend.lib.please_try_again_later'));_this._hideAjax();_this._resolveSearchPromise();return _context.abrupt("return");case 10:if(phrase===_this.phrase){_this._changeUrl(phrase);_this._processResponse(data);}_this._hideAjax();_this._resolveSearchPromise();case 13:case"end":return _context.stop();}},_callee);}))();}_processResponse(response){this.$content.html(this._responseToHtml(response)).process(response.JS_EXPORTS);}_responseToHtml(response){if(response.content){return response.content+(response.postloader||'');}return isEmpty_default()(this.phrase)?'':jst/* default */.A['search/nothing_found']({isAutocomplete:this.isAutocomplete});}_searchUrl(phrase){return new tiny_uri/* default */.A(window.location.href.replace(/\/page\/\d+/,'')).query.set('search',phrase||null).toString();}_changeUrl(phrase){var url=this._searchUrl(phrase);window.history.replaceState({turbolinks:true,url},'',url);}_url(url,phrase){return new tiny_uri/* default */.A(url).query.set('search',phrase||null).toString();}_showAjax(){this.$content.addClass('b-ajax');}_hideAjax(){this.$content.removeClass('b-ajax');}_buildSearchPromise(){this.searchDeferred=(0,p_defer/* default */.A)();}_resolveSearchPromise(){if(this.searchDeferred){this.searchDeferred.resolve();this.searchDeferred=undefined;}}}
;// CONCATENATED MODULE: ./app/packs/javascripts/views/search/autocomplete_engine.js
/* provided dependency */ var autocomplete_engine_$ = __webpack_require__(74692);
var VARIANT_SELECTOR='.b-db_entry-variant-list_item';class AutocompleteEngine extends IndexEngine{constructor(fetchUrl,$content){super();this.fetchUrl=fetchUrl;this._$content=$content;this.isAutocomplete=true;}get $content(){return this._$content;}get phrase(){return this._phrase;}set phrase(value){this._phrase=value;this._buildSearchPromise();if(!isEmpty_default()(this.phrase)){this._showAjax();this.debouncedSearch(this.phrase);}else{this._resolveSearchPromise();}}_responseToHtml(response){var $html=autocomplete_engine_$(super._responseToHtml(response));$html.find('a').changeTag('span');$html.find('.linkeable, .bubbled').removeClass('linkeable bubbled');$html.filter(VARIANT_SELECTOR).each((_index,node)=>{node.classList.add('linkeable');node.setAttribute('href',autocomplete_engine_$(node).find('.name .b-link').attr('href'));});return $html;}_searchUrl(phrase){return this._url(this.fetchUrl,phrase);}_changeUrl(_phrase){}}
// EXTERNAL MODULE: ./node_modules/lodash/capitalize.js
var capitalize = __webpack_require__(14792);
var capitalize_default = /*#__PURE__*/__webpack_require__.n(capitalize);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/global_handler.js
/* provided dependency */ var global_handler_$ = __webpack_require__(74692);
var _class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var KEY_CODES={enter:13,esc:27,slash:[47,191],up:38,down:40};var KEYDOWN_CODES=[38,40,47,191];function keyCodeEvent(keyCode){return KEYDOWN_CODES.includes(keyCode)?'keydown':'keyup';}var GlobalHandler=(_class=class GlobalHandler{constructor(){this.events={};}on(key,handler){if(key==='focus'){this._bind('focus',null,handler);}else if(key.constructor===String){// key name
if(KEY_CODES[key].constructor===Array){KEY_CODES[key].forEach(keyCode=>this._bind(null,keyCode,handler));}else{this._bind(null,KEY_CODES[key],handler);}}else{// key code
this._bind(null,key,handler);}}off(key,handler){if(key==='focus'){this._unbind('focus',null,handler);}else if(key.constructor===String){if(KEY_CODES[key].constructor===Array){KEY_CODES[key].forEach(keyCode=>this._unbind(null,keyCode,handler));}else{this._unbind(null,KEY_CODES[key],handler);}}else{this._unbind(null,key,handler);}}_onKeyup(e){if(!this.events.keyup||!this.events.keyup[e.keyCode]){return;}this.events.keyup[e.keyCode].forEach(handler=>handler(e));}_onKeydown(e){if(!this.events.keydown||!this.events.keydown[e.keyCode]){return;}this.events.keydown[e.keyCode].forEach(handler=>handler(e));}_onFocus(e){if(!this.events.focus||!this.events.focus.null){return;}this.events.focus.null.forEach(handler=>handler(e));}_bind(event,keyCode,handler){if(!event){event=keyCodeEvent(keyCode);}// eslint-disable-line no-param-reassign
if(!this.events[event]){if(event==='focus'){global_handler_$(document.body).on(event,'*',this._handler(event));}else{global_handler_$(document).on(event,this._handler(event));}if(isEmpty_default()(this.events)){this._scheduleUnbind();}this.events[event]={};}if(!this.events[event][keyCode]){this.events[event][keyCode]=[];}this.events[event][keyCode].push(handler);}_unbind(event,keyCode,handler){if(!event){event=keyCodeEvent(keyCode);}// eslint-disable-line no-param-reassign
if(!this.events[event]){return;}if(!this.events[event][keyCode]){return;}if(!this.events[event][keyCode].includes(handler)){return;}this.events[event][keyCode].splice(this.events[event][keyCode].indexOf(handler),1);if(isEmpty_default()(this.events[event][keyCode])){delete this.events[event][keyCode];}if(isEmpty_default()(this.events[event])){this._unbindEvent(event);delete this.events[event];}if(isEmpty_default()(this.events)){this._unScheduleUnbind();}}_unbindAll(){Object.keys(this.events).forEach(event=>this._unbindEvent(event));this._unScheduleUnbind();this.events={};}_unbindEvent(event){if(event==='focus'){global_handler_$(document.body).off(event,'*',this._handler(event));}else{global_handler_$(document).off(event,this._handler(event));}}_handler(event){return this[`_on${capitalize_default()(event)}`];}_scheduleUnbind(){global_handler_$(document).one('turbolinks:before-cache',this._unbindAll);}_unScheduleUnbind(){global_handler_$(document).off('turbolinks:before-cache',this._unbindAll);}},(_applyDecoratedDescriptor(_class.prototype,"on",[shiki_decorators/* chain */.cy],Object.getOwnPropertyDescriptor(_class.prototype,"on"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"off",[shiki_decorators/* chain */.cy],Object.getOwnPropertyDescriptor(_class.prototype,"off"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onKeyup",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_onKeyup"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onKeydown",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_onKeydown"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onFocus",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_onFocus"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_unbindAll",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_unbindAll"),_class.prototype)),_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/global_handler.js
var globalHandler=new GlobalHandler();window.globalHandler=globalHandler;/* harmony default export */ const global_handler = (globalHandler);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/search/global.js
/* provided dependency */ var global_$ = __webpack_require__(74692);
var global_class;function global_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */global_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function global_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function global_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){global_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){global_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function global_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var global_VARIANT_SELECTOR='.b-db_entry-variant-list_item';var ITEM_SELECTOR=`${global_VARIANT_SELECTOR}, .search-mode`;var GlobalSearch=(global_class=class GlobalSearch extends view/* default */.A{initialize({showMobileSearch,hideMobileSearch}){this.isActive=false;this.isStubbedSearchMode=false;this.showMobileSearch=showMobileSearch;this.hideMobileSearch=hideMobileSearch;this.$input=this.$('.field input');this.$outerContent=this.$root.find('.search-results');this.$content=this.$outerContent.find('.inner');this._phrase=this.inputSearchPhrase;this.currentMode=this.hasIndex?'index':this.$root.data('default-mode')||'anime';global_handler.on('slash',this._onGlobalSlash);this.$input.on('focus',()=>this._activate()).on('change blur paste keyup',()=>this.phrase=this.inputSearchPhrase).on('paste',()=>(0,delay/* default */.Ay)().then(()=>this.phrase=this.inputSearchPhrase)).on('blur',this._onBlur);this.$('.field .clear').on('click',()=>this._clearPhrase(true));this.$content.on('mousedown','.search-mode',({currentTarget})=>{this._selectItem(currentTarget);}).on('mouseup','.search-mode',()=>{this.$input.focus();}).on('focus mousemove',global_VARIANT_SELECTOR,({currentTarget})=>{// prefer mousemove over mouseover cause it does not trigger after keyboard scroll
if(this.currentItem!==currentTarget){this._selectItem(currentTarget,false);}}).on('click',global_VARIANT_SELECTOR,e=>{if(this.isStubbedSearchMode){e.preventDefault();this.pick(e.currentTarget);}}).on('scroll',this._applyShade);}get hasIndex(){return!!global_$('.b-search-results').length&&!this.isStubbedSearchMode;}get currentMode(){return this._currentMode;}get isIndexMode(){return this.currentMode==='index';}set currentMode(value){this._currentMode=value;if(this.isIndexMode){this.searchEngine=new IndexEngine();}else{this.searchEngine=new AutocompleteEngine(this.$node.data(`autocomplete_${this.currentMode}_url`),this.$content);}}get $activeItem(){return this.$content.find(ITEM_SELECTOR).filter('.active');}get isSearching(){return!isEmpty_default()(this.phrase);}get phrase(){return this._phrase;}set phrase(value){var trimmedValue=value.trim();if(this._phrase.trim()===trimmedValue){return;}var priorPhrase=this._phrase;this._phrase=value;if(this.$input[0].value!==value){this.$input[0].value=value;}this.$input.toggleClass('has-value',!isEmpty_default()(this.phrase));if(priorPhrase===undefined){return;}if(this.phrase){// it is undefined in constructor
var promise=this.searchEngine.search(trimmedValue);if(promise){promise.then(this._applyShade);}else{this._applyShade();}}else{this.searchEngine.cancel();this._renderModes();this._applyShade();}this._toggleGlobalSearch();this.$node.trigger('phrase:change');}get inputSearchPhrase(){return this.$input.val();}focus(){if((0,shiki_utils.isMobile)()){this.showMobileSearch();}this.$input.focus();}pick(_node){// does nothing. designed for shiki-editor stubbed search mode
}cancel(){this._deactivate();if((0,shiki_utils.isMobile)()){this.hideMobileSearch();}}// private functions
_activate(){if(this.isActive){return;}this.isActive=true;this._toggleGlobalSearch();this._renderModes();global_handler.on('enter',this._onEnter).on('up',this._onMoveUp).on('down',this._onMoveDown).on('esc',this._onEsc).on('focus',this._tryCloseOnFocus);}_deactivate(){if(!this.isActive){return;}this.isActive=false;this._toggleGlobalSearch();if(!this.isIndexMode){this.$input.val('');}if(this.$input.is(':focus')){this.$input.blur();}global_handler.off('enter',this._onEnter).off('esc',this._onEsc).off('up',this._onMoveUp).off('down',this._onMoveDown).off('focus',this._tryCloseOnFocus);}_renderModes(){this.$content.html(jst/* default */.A['search/options']({currentMode:this.currentMode,hasIndex:this.hasIndex}));}_clearPhrase(isFocus){this.phrase='';if(isFocus){this.$input.focus();}}_selectItem(node,doScroll){this._deselectItems();if(this.isSearching){this.currentItem=node;}else{this.currentMode=global_$(node).data('mode');}node.setAttribute('tabindex',0);node.classList.add('active');// switch focus if another variant is already focused
var focusedNode=this.$content.find(`${global_VARIANT_SELECTOR}:focus`)[0];if(focusedNode&&focusedNode!==node){global_$(node).focus();}if(doScroll){this._scrollToItem(global_$(node));}}_deselectItems(){var node=this.$activeItem[0];if(node){node.setAttribute('tabindex',-1);node.classList.remove('active');}}_scrollToItem($item){var node=this.$content[0];var scrollTop=node.scrollTop,clientHeight=node.clientHeight;var itemTop=$item.position().top+scrollTop;var itemHeight=$item.outerHeight();if(itemTop<scrollTop){if($item.is(':first-child')){node.scrollTo(0,0);}else{node.scrollTo(0,itemTop-15);}}else if(itemTop+itemHeight>scrollTop+clientHeight-25){node.scrollTo(0,itemTop+itemHeight-clientHeight+25);}}_applyShade(){var node=this.$content[0];this.$outerContent.toggleClass('is-overflowed-above',node.scrollTop!==0);this.$outerContent.toggleClass('is-overflowed-below',node.scrollTop+node.clientHeight!==node.scrollHeight);}_onBlur(){var _this=this;return global_asyncToGenerator(/*#__PURE__*/global_regeneratorRuntime().mark(function _callee(){return global_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.isIndexMode){_context.next=2;break;}return _context.abrupt("return");case 2:_context.next=4;return (0,delay/* default */.Ay)();case 4:if(!_this.$input.is(':focus')&&!_this.$activeItem.is(':focus')){_this.cancel();}case 5:case"end":return _context.stop();}},_callee);}))();}_toggleGlobalSearch(){var isShade=this.isActive&&(!this.isIndexMode||this.isIndexMode&&isEmpty_default()(this.phrase));global_$('.l-top_menu-v2').toggleClass('is-search-focus',this.isActive).toggleClass('is-search-shade',isShade);// do not do bind directly to cancel because "cancel" can be stubbed outside
global_$('.b-shade').off('click',()=>this.cancel());if(isShade){global_$('.b-shade').on('click',()=>this.cancel());}}_onGlobalSlash(e){var target=e.target||e.srcElement;var isIgnored=target.isContentEditable||target.tagName==='INPUT'||target.tagName==='SELECT'||target.tagName==='TEXTAREA';if(isIgnored){return;}e.preventDefault();e.stopImmediatePropagation();this.$input.focus();this.$input[0].setSelectionRange(0,this.$input[0].value.length);}_onEnter(e){e.preventDefault();e.stopImmediatePropagation();if(this.isIndexMode){return;}if(!this.phrase.trim()){return;}if(this.isStubbedSearchMode){var node=this.$activeItem[0];if(node){this.pick(node);}}else{var url;var $activeLink=this.$activeItem.find('.name .b-link');if(this.$activeItem.length&&$activeLink.length){url=$activeLink.attr('href');}else{url=new tiny_uri/* default */.A(this.$node.data(`search_${this.currentMode}_url`)).query.set('search',this.phrase||null).toString();}turbolinks_default().visit(url);}}_onEsc(e){e.preventDefault();e.stopImmediatePropagation();this.cancel();}_onMoveUp(e){var $activeItem=this.$activeItem;var item=$activeItem.prev()[0];if(this.isActive){e.preventDefault();e.stopImmediatePropagation();}if(item){this._selectItem(item,true);}else if(this.isSearching){this._deselectItems();this.$input.focus();}}_onMoveDown(e){var $activeItem=this.$activeItem;var item=$activeItem.length?$activeItem.next()[0]:this.$content.find(ITEM_SELECTOR).first()[0];if(this.isActive){e.preventDefault();e.stopImmediatePropagation();}if(item){this._selectItem(item,true);}}_tryCloseOnFocus({target}){var $target=global_$(target);var isInside=target===this.root||$target.closest(this.$root).length;if(isInside||!$target.parents('html').length){return;}this.cancel();}},(global_applyDecoratedDescriptor(global_class.prototype,"_deactivate",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_deactivate"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_applyShade",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_applyShade"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_onBlur",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_onBlur"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_onGlobalSlash",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_onGlobalSlash"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_onEnter",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_onEnter"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_onEsc",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_onEsc"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_onMoveUp",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_onMoveUp"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_onMoveDown",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_onMoveDown"),global_class.prototype),global_applyDecoratedDescriptor(global_class.prototype,"_tryCloseOnFocus",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(global_class.prototype,"_tryCloseOnFocus"),global_class.prototype)),global_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/show_modal.js
/* provided dependency */ var show_modal_$ = __webpack_require__(74692);
function showModal({$modal,$trigger,$outerNode,show,hide,onlyShow,isIgnored,isHidden}){var ignoreNextEvent=false;function checkHidden(){return isHidden?isHidden():$modal.css('display')==='none';}function toggleModal(e){if(e.type!=='focus'&&isIgnored&&isIgnored()){return;}if(e.type==='click'){if((0,shiki_utils.isMobile)(false)){e.preventDefault();}return;}var eventName=checkHidden()||e.type==='focus'?'modal:show':'modal:hide';if(eventName==='modal:hide'&&onlyShow){return;}if(ignoreNextEvent){return;}$modal.trigger(eventName);// to prevent immediately click after focus
ignoreNextEvent=true;(0,delay/* default */.Ay)().then(()=>ignoreNextEvent=false);}function tryCloseModal({target}){var $target=show_modal_$(target);var isInside=target===($outerNode||$modal)[0]||$target.closest($outerNode||$modal).length;if(isInside||!$target.parents('html').length){return;}$modal.trigger('modal:hide');}function closeModalOnEsc({keyCode}){if(keyCode!==27){return;}$modal.trigger('modal:hide');}function unbindHandlers(){show_modal_$(document.body).off('click',tryCloseModal);show_modal_$(document.body).off('focus','*',tryCloseModal);show_modal_$(document.body).off('keydown',closeModalOnEsc);}if($trigger.constructor===String){show_modal_$(document).on('mousedown focus click',$trigger,toggleModal);}else{$trigger.on('mousedown focus click',toggleModal);}$modal.on('modal:show',()=>{if(!checkHidden()){return;}if(show){show();}else{$modal.show();}(0,delay/* default */.Ay)().then(()=>{show_modal_$(document.body).on('click',tryCloseModal);show_modal_$(document.body).on('focus','*',tryCloseModal);show_modal_$(document.body).on('keydown',closeModalOnEsc);show_modal_$(document).one('turbolinks:before-cache',unbindHandlers);});}).on('modal:hide',()=>{if(checkHidden()){return;}if(hide){hide();}else{$modal.hide();}unbindHandlers();if($trigger.is(':focus')){$trigger.blur();}});return{$modal,$trigger,$outerNode,show(){$modal.trigger('modal:show');},hide(){$modal.trigger('modal:hide');},destroy:unbindHandlers};}
;// CONCATENATED MODULE: ./app/packs/javascripts/blocks/top_menu.js
/* provided dependency */ var top_menu_$ = __webpack_require__(74692);
function top_menu_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */top_menu_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function top_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function top_menu_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){top_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){top_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}top_menu_$(document).on('turbolinks:load',()=>{var $search=top_menu_$('.l-top_menu-v2 .global-search');if($search.length){window.globalSearch=new GlobalSearch($search,{showMobileSearch,hideMobileSearch});}$search.find('.clear').on('click',hideMobileSearch);// desktop menu
top_menu_$('.l-top_menu-v2 .menu-dropdown').each((_,node)=>{var $outerNode=top_menu_$(node);var $buttons=$outerNode.children('span');var $menu=$outerNode.children('.submenu').show();var $items=$menu.children('a').on('focus',({currentTarget})=>activate(currentTarget)).on('blur',({currentTarget})=>deactivate(currentTarget)).hover(({currentTarget})=>top_menu_$(currentTarget).focus(),({currentTarget})=>top_menu_$(currentTarget).blur());var moveUp=e=>{e.preventDefault();e.stopImmediatePropagation();var $activeItem=$items.filter('.active');if(!$activeItem.length){return;}top_menu_$($items[$items.index($activeItem)-1]).focus();};var moveDown=e=>{e.preventDefault();e.stopImmediatePropagation();var $activeItem=$items.filter('.active');if(!$activeItem.length){$items.first().focus();return;}top_menu_$($items[$items.index($activeItem)+1]).focus();};var show=()=>{// do not execute show logic multiple times
if($outerNode.hasClass('active')){return;}$outerNode.addClass('active');top_menu_$('.l-top_menu-v2').addClass('is-submenu');global_handler.on('up',moveUp).on('down',moveDown);hideMobileSearch();};var _hide=()=>{$outerNode.removeClass('active');// because another menu could already be opened
if(!top_menu_$('.l-top_menu-v2 .menu-dropdown.active').length){top_menu_$('.l-top_menu-v2').removeClass('is-submenu');}global_handler.off('up',moveUp).off('down',moveDown);};var isProfile=!!$buttons.children('a').length;showModal({$modal:$menu,$outerNode,$trigger:$buttons,show,hide:function(){var _hide2=top_menu_asyncToGenerator(/*#__PURE__*/top_menu_regeneratorRuntime().mark(function _callee(){return top_menu_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_hide();// need to properly remove focus from menu button when
// clicked on button when menu is already opened
_context.next=3;return (0,delay/* default */.Ay)();case 3:$buttons.blur();case 4:case"end":return _context.stop();}},_callee);}));function hide(){return _hide2.apply(this,arguments);}return hide;}(),isIgnored:()=>!(0,shiki_utils.isMobile)(false)&&isProfile,isHidden:()=>!$outerNode.hasClass('active')});var debouncedHide=(0,esm/* debounce */.s)(200,()=>{if(needToClose){_hide();}});var needToClose=false;$outerNode.hover(()=>{if((0,shiki_utils.isMobile)(false)){return;}needToClose=false;show();},()=>{if((0,shiki_utils.isMobile)(false)){return;}needToClose=true;debouncedHide();});});top_menu_$('.l-top_menu-v2 .search.mobile').on('click',_e=>{if(top_menu_$('.l-top_menu-v2').hasClass('is-search-mobile')){hideMobileSearch();}else{showMobileSearch();$search.find('input').focus();}});});top_menu_$(document).on('turbolinks:before-cache',()=>{if(window.globalSearch){window.globalSearch.cancel();delete window.globalSearch;}top_menu_$('.l-top_menu-v2').removeClass('is-submenu is-search-mobile');top_menu_$('.l-top_menu-v2 .submenu').removeAttr('style');top_menu_$('.l-top_menu-v2 .active').removeClass('active');});function showMobileSearch(){top_menu_$('.l-top_menu-v2.is-search-mobile .search.mobile').addClass('active');top_menu_$('.l-top_menu-v2').addClass('is-search-mobile');}function hideMobileSearch(){top_menu_$('.l-top_menu-v2.is-search-mobile .search.mobile').removeClass('active');top_menu_$('.l-top_menu-v2').removeClass('is-search-mobile');if(window.globalSearch.isActive){window.globalSearch.cancel();}}function activate(node){node.setAttribute('tabindex',0);node.classList.add('active');}function deactivate(node){node.setAttribute('tabindex',-1);node.classList.remove('active');}

/***/ }),

/***/ 702:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
// TODO: migrate to dynamic parser element
$(document).on('click','.user-defined',({currentTarget})=>{currentTarget.classList.toggle('active');});

/***/ }),

/***/ 96219:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ DynamicParser)
});

// EXTERNAL MODULE: ./node_modules/lodash/camelCase.js
var camelCase = __webpack_require__(84058);
var camelCase_default = /*#__PURE__*/__webpack_require__.n(camelCase);
// EXTERNAL MODULE: ./node_modules/shiki-decorators/index.js + 2 modules
var shiki_decorators = __webpack_require__(89752);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/view.js
var view = __webpack_require__(27349);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/axios.js
var axios = __webpack_require__(24418);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/i18n.js + 1 modules
var i18n = __webpack_require__(12691);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/clickloaded.js
var _class;function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var Clickloaded=(_class=class Clickloaded extends view/* default */.A{initialize(){this.isLoading=false;this.$root.on('click',this.fetch);}fetch(){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var html,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.isLoading){_context.next=2;break;}return _context.abrupt("return");case 2:_this.isLoading=true;html=_this.$root.html();_this.$root.trigger('clickloaded:before');_this.$root.html(`<div
        class='ajax-loading vk-like'
        title='${i18n/* default */.A.t('frontend.blocks.click_loader.loading')}'
      />`);_context.next=8;return axios/* default */.A.get(_this.$root.data('clickloaded-url'));case 8:_yield$axios$get=_context.sent;data=_yield$axios$get.data;_this.$root.html(html);_this.$root.trigger('clickloaded:success',[data]);_this.isLoading=false;case 13:case"end":return _context.stop();}},_callee);}))();}},(_applyDecoratedDescriptor(_class.prototype,"fetch",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"fetch"),_class.prototype)),_class);
// EXTERNAL MODULE: ./app/packs/javascripts/dynamic_elements/code_highlight.js
var code_highlight = __webpack_require__(89312);
// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
// EXTERNAL MODULE: ./node_modules/shiki-utils/index.js + 5 modules
var shiki_utils = __webpack_require__(79308);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/with.js
var utils_with = __webpack_require__(89234);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/get_selection.js
/* provided dependency */ var $ = __webpack_require__(74692);
function isGetSelectionTextSupported(){return typeof window.getSelection!=='undefined';}function getSelectionText(){var html=getSelectionHtml().replace(/<br.*?>/g,'<--BR-->');return $(`<div>${html}</div>`).text().replace(/<--BR-->/g,'\n').trim();}function getSelectionHtml(){var html='';if(isGetSelectionTextSupported()){var sel=window.getSelection();if(sel.rangeCount){var container=document.createElement('div');for(var i=0,len=sel.rangeCount;i<len;i+=1){container.appendChild(sel.getRangeAt(i).cloneContents());}html=container.innerHTML;}}else if(typeof document.selection!=='undefined'){if(document.selection.type==='Text'){html=document.selection.createRange().htmlText;}}var $html=$(`<div>${html}</div>`);if(html.match(/<div class="body"/)){$html=(0,utils_with/* default */.A)('div.body',$html);}var namesLocale=document.body.getAttribute('data-localized_names');var genresLocale=document.body.getAttribute('data-localized_genres');$html.find(namesLocale==='ru'?'.name-en':'.name-ru').remove();$html.find(genresLocale==='ru'?'.genre-en':'.genre-ru').remove();return $html.html();}
// EXTERNAL MODULE: ./app/packs/javascripts/utils/animated.js + 1 modules
var animated = __webpack_require__(7084);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/ban_form.js
var ban_form = __webpack_require__(14216);
// EXTERNAL MODULE: ./node_modules/lodash/difference.js
var difference = __webpack_require__(66245);
var difference_default = /*#__PURE__*/__webpack_require__.n(difference);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/check_height.js
var check_height = __webpack_require__(41696);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/load_image.js
var load_image = __webpack_require__(75612);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/application/shiki_view.js
/* provided dependency */ var shiki_view_$ = __webpack_require__(74692);
var shiki_view_class;function shiki_view_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */shiki_view_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function shiki_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function shiki_view_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){shiki_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){shiki_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function shiki_view_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var SPOILER_CLASSES=['.b-spoiler','.b-spoiler_block'];// общий класс для комментария, топика, редактора
var ShikiView=(shiki_view_class=class ShikiView extends view/* default */.A{_initialize(...args){super._initialize(...args);this.$node.removeClass('unprocessed');this.$inner=this.$('>.inner');this._assignCheckHeightLimits();}destroy(){this.$node.off();super.destroy();}get $checkHeightNode(){return this.$inner;}_scheduleCheckHeight(isSkipClassCheck=false){var _this=this;return shiki_view_asyncToGenerator(/*#__PURE__*/shiki_view_regeneratorRuntime().mark(function _callee(){var imageNodes,$spoilers;return shiki_view_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!isSkipClassCheck&&_this.$checkHeightNode.data('check_height')!=='')){_context.next=2;break;}return _context.abrupt("return");case 2:imageNodes=_this.$checkHeightNode.find('img').toArray();$spoilers=_this.$checkHeightNode.find(SPOILER_CLASSES.join(','));if($spoilers.length){imageNodes=difference_default()(imageNodes,$spoilers.find('img').toArray());}_context.next=7;return (0,delay/* default */.Ay)(10);case 7:if(!_this._checkHeight()){_context.next=9;break;}return _context.abrupt("return");case 9:;if(!imageNodes.length){_context.next=14;break;}_context.next=13;return (0,load_image/* imagePromiseFinally */.yb)(imageNodes);case 13:_this._checkHeight();case 14:case"end":return _context.stop();}},_callee);}))();}_assignCheckHeightLimits(){this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT=450;this.CHECK_HEIGHT_COLLAPSED_HEIGHT=150;this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=0;}_checkHeight(){if(!window.SHIKI_USER.isCommentsAutoCollapsed){return false;}return (0,check_height/* default */.A)(this.$checkHeightNode,{maxHeight:this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT,collapsedHeight:this.CHECK_HEIGHT_COLLAPSED_HEIGHT,placeholderHeight:this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT});}_shade(){return this.$inner.addClass('b-ajax');}_unshade(){return this.$inner.removeClass('b-ajax');}_reload(){var _this2=this;return shiki_view_asyncToGenerator(/*#__PURE__*/shiki_view_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get,data;return shiki_view_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2._shade();_context2.next=3;return axios/* default */.A.get(_this2.reloadUrl);case 3:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;_this2._replace(data.content,data.JS_EXPORTS,_this2.$inner!==_this2.$node);case 6:case"end":return _context2.stop();}},_callee2);}))();}// урл для перезагрузки элемента
get reloadUrl(){return this.$node.data('url');}_replace(html,JS_EXPORTS,isReplaceInner=false){var htmlWoCheckHeight=html.replace(' data-check_height','');if(isReplaceInner){this._replaceInner(htmlWoCheckHeight,JS_EXPORTS);}else{this._replaceNode(htmlWoCheckHeight,JS_EXPORTS);}}_replaceInner(html,JS_EXPORTS){var _this3=this;return shiki_view_asyncToGenerator(/*#__PURE__*/shiki_view_regeneratorRuntime().mark(function _callee3(){var $replaced;return shiki_view_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:$replaced=shiki_view_$(html).children('.inner');_this3.destroy();_this3.$inner.replaceWith($replaced);_this3.$node.addClass('to-process').process(JS_EXPORTS);_this3.$('>.inner').yellowFade();case 5:case"end":return _context3.stop();}},_callee3);}))();}_replaceNode(html,JS_EXPORTS){var $replaced=shiki_view_$(html);this.$node.replaceWith($replaced);$replaced.process(JS_EXPORTS);$replaced.yellowFade();}},(shiki_view_applyDecoratedDescriptor(shiki_view_class.prototype,"$checkHeightNode",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(shiki_view_class.prototype,"$checkHeightNode"),shiki_view_class.prototype),shiki_view_applyDecoratedDescriptor(shiki_view_class.prototype,"_checkHeight",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_view_class.prototype,"_checkHeight"),shiki_view_class.prototype),shiki_view_applyDecoratedDescriptor(shiki_view_class.prototype,"_shade",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_view_class.prototype,"_shade"),shiki_view_class.prototype),shiki_view_applyDecoratedDescriptor(shiki_view_class.prototype,"_unshade",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_view_class.prototype,"_unshade"),shiki_view_class.prototype),shiki_view_applyDecoratedDescriptor(shiki_view_class.prototype,"_reload",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_view_class.prototype,"_reload"),shiki_view_class.prototype)),shiki_view_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/application/shiki_editable.js
/* provided dependency */ var shiki_editable_$ = __webpack_require__(74692);
var _dec,shiki_editable_class;function shiki_editable_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */shiki_editable_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function shiki_editable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function shiki_editable_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){shiki_editable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){shiki_editable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function shiki_editable_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var BUTTONS=['.item-ignore','.item-quote','.item-reply','.item-edit','.item-summary',// aka review_convert
'.item-offtopic','.item-cancel','.item-spoiler','.item-abuse'];var ABUSE_REQUEST_BUTTONS=['.item-summary',// aka review_convert
'.item-offtopic','.item-spoiler','.item-abuse','.b-offtopic_marker'];var ITEM_QUOTE_SELECTOR='.item-quote, .item-quote-mobile';var I18N_KEY='frontend.dynamic_elements.shiki_editable';var ShikiEditable=(_dec=(0,shiki_decorators/* debounce */.sg)(150),(shiki_editable_class=class ShikiEditable extends ShikiView{// внутренняя инициализация
_initialize(...args){super._initialize(...args);// по нажатиям на кнопки закрываем меню в мобильной версии
shiki_editable_$(BUTTONS.join(','),this.$inner).on('click',this._closeAside);this._bindDeleteControls();this._bindEditControls();this._bindModerationControls();this._bindAbuseRequestControls();this._bindFaye();this._bindAutoExpand();shiki_editable_$('.item-mobile',this.$inner).on('click',this._toggleMobileControls);shiki_editable_$('.b-new_marker',this.$inner).on('click',this._markRead);}// колбек после инициализации
_afterInitialize(){super._afterInitialize();if(this.$body){this.$body.on('mouseup',this.setSelection);shiki_editable_$(ITEM_QUOTE_SELECTOR,this.$inner).on('click',this._itemQuote);shiki_editable_$('.item-reply',this.$inner).on('click',this._itemReply);}}get reloadUrl(){return`/${this.type}s/${this.node.id}`;}get isGenerated(){return!!this.$node.data('generated');}get $editorPlacement(){return this.$inner;}get $moderationForm(){return shiki_editable_$('.moderation-ban-form',this.$inner);}setSelection(){this.throttledSetSelection();}throttledSetSelection(){var _this=this;return shiki_editable_asyncToGenerator(/*#__PURE__*/shiki_editable_regeneratorRuntime().mark(function _callee2(){var text,html,$quote,markers;return shiki_editable_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:text=getSelectionText();html=getSelectionHtml();if(!(!text&&!html)){_context2.next=4;break;}return _context2.abrupt("return");case 4:// скрываем все кнопки цитаты
shiki_editable_$(ITEM_QUOTE_SELECTOR).removeClass('is-active');_this.$node.data({selected_text:text,selected_html:html});$quote=shiki_editable_$(ITEM_QUOTE_SELECTOR,_this.$inner).addClass('is-active');// hide comment markers to prevent overlapping with quote button
if((0,shiki_utils.isMobile)()){markers=shiki_editable_$(ITEM_QUOTE_SELECTOR,_this.$inner).parent().find('aside.markers').children();markers.each((_,node)=>{if(shiki_editable_$(node).css('display')==='block'){shiki_editable_$(node).hide();shiki_editable_$(node).addClass('temporarily-hidden-markers');}});}_context2.next=10;return (0,delay/* default */.Ay)();case 10:shiki_editable_$(document).one('click',/*#__PURE__*/shiki_editable_asyncToGenerator(/*#__PURE__*/shiki_editable_regeneratorRuntime().mark(function _callee(){return shiki_editable_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(getSelectionText().length){_context.next=4;break;}$quote.removeClass('is-active');shiki_editable_$('.temporarily-hidden-markers').show().removeClass('temporarily-hidden-markers');return _context.abrupt("return");case 4:_context.next=6;return (0,delay/* default */.Ay)(250);case 6:if(!getSelectionText().length){shiki_editable_$('.temporarily-hidden-markers').show().removeClass('temporarily-hidden-markers');$quote.removeClass('is-active');}case 7:case"end":return _context.stop();}},_callee);})));case 11:case"end":return _context2.stop();}},_callee2);}))();}_bindDeleteControls(){shiki_editable_$('.item-delete',this.$inner).on('click',this._showDeleteControls);shiki_editable_$('.item-delete-confirm',this.$inner).on('ajax:loading',this._submitDelete);shiki_editable_$('.item-delete-confirm',this.$inner).on('ajax:success',this._redirectAfterDeleted);shiki_editable_$('.item-delete-cancel',this.$inner).on('click',this._hideDeleteControls);}_bindEditControls(){shiki_editable_$('.item-edit',this.$inner).on('ajax:before',this._shade).on('ajax:complete',this._unshade).on('ajax:success',this._edit);}_bindModerationControls(){shiki_editable_$('.item-ban',this.$inner).on('ajax:before',this._shade).on('ajax:complete',this._unshade).on('ajax:success',this._showModerationForm);shiki_editable_$('.item-moderation',this.$inner).on('click',this._showModrationControls);shiki_editable_$('.item-moderation-cancel',this.$inner).on('click',this._hideModerationControls);this.$inner.one('mouseover',this._deactivateInaccessibleButtons);shiki_editable_$('.item-mobile',this.$inner).one('click',this._deactivateInaccessibleButtons);}_bindAbuseRequestControls(){shiki_editable_$(ABUSE_REQUEST_BUTTONS.join(','),this.$inner).on('ajax:before',this._shade).on('ajax:complete',this._unshade).on('ajax:success',this._processAbuseRequest);shiki_editable_$('.item-spoiler, .item-abuse',this.$inner).on('ajax:before',this._markSpoilerOrAbuse);}_bindFaye(){this.on(`faye:${this.type}:updated`,this._fayeUpdated);this.on(`faye:${this.type}:deleted`,this._fayeDeleted);}_bindAutoExpand(){this.$inner.on('ajax:before',()=>{this.$inner.next('.b-height_shortener').click();});}_activateAppearMarker(){this.$inner.children('.b-appear_marker').addClass('active');this.$inner.children('.markers').find('.b-new_marker').addClass('active');}// закрытие кнопок в мобильной версии
_closeAside(){if(shiki_editable_$('.item-mobile',this.$inner).is('.selected')){// ">" need because in dialogs we may have nested inner element
shiki_editable_$('> .item-mobile',this.$inner).click();}shiki_editable_$('.main-controls',this.$inner).show();shiki_editable_$('.delete-controls',this.$inner).hide();shiki_editable_$('.moderation-controls',this.$inner).hide();}_edit(e,html,_status,_xhr){this.$inner.addClass('is-editing');var $form=shiki_editable_$(html).process();var $initialContent=this.$editorPlacement.children().detach();$form.appendTo(this.$editorPlacement);var editor=$form.find('.shiki_editor-selector').view();editor.initialization.promise.then(()=>editor.focus());// отмена редактирования
$form.find('.cancel').on('click',()=>{editor.destroy();$form.remove();this.$editorPlacement.append($initialContent);this.$inner.removeClass('is-editing');});// замена комментария после успешного сохранения
$form.on('ajax:success',(_e,response)=>this._replace(response.content,response.JS_EXPORTS,true));}_showDeleteControls(){shiki_editable_$('.main-controls',this.$inner).hide();shiki_editable_$('.delete-controls',this.$inner).show();}_hideDeleteControls(){this._closeAside();}_submitDelete(){var _this2=this;return shiki_editable_asyncToGenerator(/*#__PURE__*/shiki_editable_regeneratorRuntime().mark(function _callee3(){return shiki_editable_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return (0,animated/* animatedCollapse */.F)(_this2.node);case 2:_this2.$node.remove();case 3:case"end":return _context3.stop();}},_callee3);}))();}// can be overridden in inherited classes
_redirectAfterDeleted(){}_showModrationControls(){shiki_editable_$('.main-controls',this.$inner).hide();shiki_editable_$('.moderation-controls',this.$inner).show();}_hideModerationControls(){this._closeAside();}_deactivateInaccessibleButtons(){if(!this.model.can_edit){shiki_editable_$('.item-edit',this.$inner).addClass('hidden');}if(!this.model.can_destroy){shiki_editable_$('.item-delete',this.$inner).addClass('hidden');}if(window.SHIKI_USER.isModerator){shiki_editable_$('.item-abuse',this.$inner).addClass('hidden');shiki_editable_$('.item-spoiler',this.$inner).addClass('hidden');}else{shiki_editable_$('.item-ban',this.$inner).addClass('hidden');}}_processAbuseRequest(_e,_data,isShowFlash=true){if(isShowFlash){shiki_utils.flash.notice(i18n/* default */.A.t(`${I18N_KEY}.your_request_will_be_considered`));}this._hideModerationControls();}_showModerationForm(e,html){var _this3=this;return shiki_editable_asyncToGenerator(/*#__PURE__*/shiki_editable_regeneratorRuntime().mark(function _callee4(){var form;return shiki_editable_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:form=new ban_form/* default */.A(html);_this3.$moderationForm.remove();shiki_editable_$('<aside class="moderation-ban-form"></aside>').insertBefore(_this3.$inner.find('aside.buttons'));_this3.$moderationForm.html(form.$node);shiki_editable_$('.cancel',_this3.$moderationForm).on('click',_this3._hideModerationForm);shiki_editable_$('form',_this3.$moderationForm).on('ajax:success',_this3._processModerationRequest);_this3.$inner.addClass('is-moderating');_this3._closeAside();_context4.next=10;return (0,delay/* default */.Ay)(250);case 10:_this3.$moderationForm.find('input[type=text]').first().focus();case 11:case"end":return _context4.stop();}},_callee4);}))();}_hideModerationForm(){this.$moderationForm.hide();}_processModerationRequest(_e,response){this._replace(response.content,response.JS_EXPORTS,true);}_toggleMobileControls(){this.$node.toggleClass('aside-expanded');shiki_editable_$('.item-mobile',this.$inner).toggleClass('selected');// из-за снятия overflow для элемента с .aside-expanded,
// сокращённая высота работает некорректно, поэтому её надо убрать
this.$node.find('>.b-height_shortener').click();}_markRead(){var $newMarker=shiki_editable_$('.b-new_marker.active',this.$inner);if($newMarker.hasClass('off')){$newMarker.removeClass('off').data('click_activated',true).trigger('reappear');axios/* default */.A.post($newMarker.data('reappear_url'),{ids:this.$node.attr('id')});}else if($newMarker.data('click_activated')){$newMarker.addClass('off').trigger('disappear');axios/* default */.A.post($newMarker.data('appear_url'),{ids:this.$node.attr('id')});}else{// эвент appear обрабатывается в topic
var $appears=shiki_editable_$('.b-appear_marker.active',this.$inner);$appears.trigger('appear',[$appears,true]);}}_itemQuote(){var quote={id:this.node.id,type:this.type,userId:this.isGenerated?null:this.$node.data('user_id'),nickname:this.isGenerated?null:String(this.$node.data('user_nickname')),text:String(this.$node.data('selected_text')),html:String(this.$node.data('selected_html'))};var isOfftopic=typeof this._isOfftopic==='function'?this._isOfftopic():false;this.$node.trigger('comment:reply',[quote,isOfftopic]);}_itemReply(){if(this.isGenerated){this.$node.trigger('comment:reply');return;}var reply={id:this.node.id,type:this.type,userId:this.$node.data('user_id'),text:String(this.$node.data('user_nickname')),url:this.$node.data('url')||`/${this.type}s/${this.node.id}`};var isOfftopic=typeof this._isOfftopic==='function'?this._isOfftopic():false;this.$node.trigger('comment:reply',[reply,isOfftopic]);}_markSpoilerOrAbuse({currentTarget}){var reason=prompt(shiki_editable_$(currentTarget).data('reason-prompt'));// return value grabbed by triggerAndReturn in rauils_ujs
if(reason==null){return false;}shiki_editable_$(currentTarget).data({form:{reason}});return true;}_fayeUpdated(_e,data){shiki_editable_$('.was_updated',this.$inner).remove();var message=this.type==='message'?`${this.typeLabel} ${i18n/* default */.A.t('frontend.shiki_editable.message_changed')}`:`${this.typeLabel} ${i18n/* default */.A.t('frontend.shiki_editable.changed')}`;var $notice=shiki_editable_$(`<div class='was_updated'><div><span>${message}</span>`+`<a class='actor b-user16' href='/${data.actor}'>`+`<img src='${data.actor_avatar}' srcset='${data.actor_avatar_2x} 2x' />`+`<span>${data.actor}</span></a>.&nbsp;</div>`+`<div>${i18n/* default */.A.t('frontend.shiki_editable.click_to_reload')}</div></div>`);$notice.appendTo(this.$inner).on('click',({target})=>{if(!shiki_editable_$(target).closest('.actor').exists()){this._reload();}});return false;// очень важно! иначе эвенты зациклятся из-за такого же обработчика в родителе
}_fayeDeleted(_e,data){var message=this.type==='message'?`${this.typeLabel} ${i18n/* default */.A.t('frontend.shiki_editable.message_deleted')}`:`${this.typeLabel} ${i18n/* default */.A.t('frontend.shiki_editable.deleted')}`;this._replace(`<div class='b-comment-info b-${this.type}'><span>${message}</span>`+`<a class='b-user16' href='/${data.actor}'><img src='${data.actor_avatar}' `+`srcset='${data.actor_avatar_2x} 2x' /><span>${data.actor}</span></a></div>`);return false;// очень важно! иначе эвенты зациклятся из-за такого же обработчика в родителе
}},(shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"isGenerated",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"isGenerated"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"setSelection",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"setSelection"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"throttledSetSelection",[_dec],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"throttledSetSelection"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_closeAside",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_closeAside"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_edit",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_edit"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_showDeleteControls",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_showDeleteControls"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_hideDeleteControls",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_hideDeleteControls"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_submitDelete",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_submitDelete"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_redirectAfterDeleted",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_redirectAfterDeleted"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_showModrationControls",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_showModrationControls"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_hideModerationControls",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_hideModerationControls"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_deactivateInaccessibleButtons",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_deactivateInaccessibleButtons"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_processAbuseRequest",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_processAbuseRequest"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_showModerationForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_showModerationForm"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_hideModerationForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_hideModerationForm"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_processModerationRequest",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_processModerationRequest"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_toggleMobileControls",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_toggleMobileControls"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_markRead",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_markRead"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_itemQuote",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_itemQuote"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_itemReply",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_itemReply"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_markSpoilerOrAbuse",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_markSpoilerOrAbuse"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_fayeUpdated",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_fayeUpdated"),shiki_editable_class.prototype),shiki_editable_applyDecoratedDescriptor(shiki_editable_class.prototype,"_fayeDeleted",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editable_class.prototype,"_fayeDeleted"),shiki_editable_class.prototype)),shiki_editable_class));
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/comment.js
/* provided dependency */ var comment_$ = __webpack_require__(74692);
var comment_class;function comment_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var comment_I18N_KEY='frontend.dynamic_elements.comment';var Comment=(comment_class=class Comment extends ShikiEditable{initialize(){var mobileOffset=(0,shiki_utils.isPhone)()?-25:0;this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=140+mobileOffset;// data attribute is set in Comments.Tracker
this.model=this.$node.data('model')||this.defaultModel;if(window.SHIKI_USER.isUserIgnored(this.model.user_id)){// node can be not inserted into DOM yet
if(this.$node.parent().length){this.$node.remove();}else{(0,delay/* default */.Ay)().then(()=>this.$node.remove());}return;}this.$body=this.$('.body');if(this.model&&!this.model.is_viewed){this._activateAppearMarker();}this._scheduleCheckHeight();this.$('.hash').one('mouseover',this._replaceHashWithLink);}// similar to hash from JsExports::CommentsExport#serialize
get defaultModel(){return{can_destroy:false,can_edit:false,id:parseInt(this.node.id),is_viewed:true,user_id:this.$node.data('user_id')};}get type(){return'comment';}get typeLabel(){return i18n/* default */.A.t(`${comment_I18N_KEY}.type_label`);}_bindAbuseRequestControls(){super._bindAbuseRequestControls();this.$('.item-offtopic').on('click',this._markOfftopic);}_bindFaye(){super._bindFaye();this.on('faye:comment:set_replies',this._fayeSetReplies);this.on('faye:comment:converted',this._fayeConverted);}mark(kind,value){this.$(`.item-${kind}`).toggleClass('selected',value);this.$(`.b-${kind}_marker`).toggle(value);}_isOfftopic(){return this.$('.b-offtopic_marker').css('display')!=='none';}_processAbuseRequest(e,data){if('affected_ids'in data&&data.affected_ids.length){data.affected_ids.forEach(id=>{var _$$view;return(_$$view=comment_$(`.b-comment#${id}`).view())===null||_$$view===void 0?void 0:_$$view.mark(data.kind,data.value);});shiki_utils.flash.notice(markerMessage(data));super._processAbuseRequest(e,data,false);}else{super._processAbuseRequest(e,data);}}_markOfftopic({currentTarget}){var confirmType=currentTarget.classList.contains('selected')?'remove':'add';comment_$(currentTarget).attr('data-confirm',comment_$(currentTarget).data(`confirm-${confirmType}`));}_fayeSetReplies(_e,data){this.$('.b-replies').remove();comment_$(data.replies_html).appendTo(this.$body).process();}_fayeConverted(_e,data){var message=i18n/* default */.A.t('frontend.shiki_editable.comment_converted',{// anime_id does not matter, user will be redirected to proper url
url:`/animes/1/reviews/${data.review_id}`});this._replace(`<div class='b-comment-info b-${this.type}'><span>${message}</span>`+`<a class='b-user16' href='/${data.actor}'><img src='${data.actor_avatar}' `+`srcset='${data.actor_avatar_2x} 2x' /><span>${data.actor}</span></a></div>`);return false;// очень важно! иначе эвенты зациклятся из-за такого же обработчика в родителе
}_replaceHashWithLink({currentTarget}){var $node=comment_$(currentTarget);$node.attr('href',$node.data('url')).changeTag('a');}},(comment_applyDecoratedDescriptor(comment_class.prototype,"_processAbuseRequest",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comment_class.prototype,"_processAbuseRequest"),comment_class.prototype),comment_applyDecoratedDescriptor(comment_class.prototype,"_markOfftopic",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comment_class.prototype,"_markOfftopic"),comment_class.prototype),comment_applyDecoratedDescriptor(comment_class.prototype,"_fayeSetReplies",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comment_class.prototype,"_fayeSetReplies"),comment_class.prototype),comment_applyDecoratedDescriptor(comment_class.prototype,"_fayeConverted",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comment_class.prototype,"_fayeConverted"),comment_class.prototype),comment_applyDecoratedDescriptor(comment_class.prototype,"_replaceHashWithLink",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(comment_class.prototype,"_replaceHashWithLink"),comment_class.prototype)),comment_class);function markerMessage(data){var messageKey=i18n/* default */.A.t('not_marked_as_summary');if(data.value){if(data.kind==='offtopic'){if(data.affected_ids.length>1){messageKey='multiple_marked_as_offtopic';}else{messageKey='marked_as_offtopic';}}else{messageKey='marked_as_summary';}}else if(data.kind==='offtopic'){messageKey='not_marked_as_offtopic';}return shiki_utils.flash.notice(i18n/* default */.A.t(`${comment_I18N_KEY}.${messageKey}`));}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/authorized_action.js
var authorized_action_class;function authorized_action_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var authorized_action_I18N_KEY='frontend.dynamic_elements.authorized_action';var AuthorizedAction=(authorized_action_class=class AuthorizedAction extends view/* default */.A{initialize(){this.$node.on('click',this.onClick);}onClick(e){if(!window.SHIKI_USER.isSignedIn){shiki_utils.flash.info(i18n/* default */.A.t(`${authorized_action_I18N_KEY}.register_to_complete_action`),{escapeMarkup:false});e.stopImmediatePropagation();e.preventDefault();}}},(authorized_action_applyDecoratedDescriptor(authorized_action_class.prototype,"onClick",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(authorized_action_class.prototype,"onClick"),authorized_action_class.prototype)),authorized_action_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/day_registered_action.js
var day_registered_action_class;function day_registered_action_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var day_registered_action_I18N_KEY='frontend.dynamic_elements.day_registered_action';var DayRegisteredAction=(day_registered_action_class=class DayRegisteredAction extends view/* default */.A{initialize(){this.$node.on('click',this.onClick);}onClick(e){if(!window.SHIKI_USER.isSignedIn){shiki_utils.flash.info(i18n/* default */.A.t(`${authorized_action_I18N_KEY}.register_to_complete_action`),{escapeMarkup:false});e.stopImmediatePropagation();e.preventDefault();}else if(!window.SHIKI_USER.isDayRegistered){shiki_utils.flash.info(i18n/* default */.A.t(`${day_registered_action_I18N_KEY}.action_will_be_available`),{escapeMarkup:false});e.stopImmediatePropagation();e.preventDefault();}}},(day_registered_action_applyDecoratedDescriptor(day_registered_action_class.prototype,"onClick",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(day_registered_action_class.prototype,"onClick"),day_registered_action_class.prototype)),day_registered_action_class);
// EXTERNAL MODULE: ./node_modules/js-cookie/dist/js.cookie.mjs
var js_cookie = __webpack_require__(18987);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/ads/ad_view.js
/* provided dependency */ var ad_view_$ = __webpack_require__(74692);
function ad_view_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ad_view_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function ad_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function ad_view_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ad_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){ad_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var removeAd=function removeAd(adClass){// console.log(`remove ad ${adClass}`);
return ad_view_$(`.${adClass}`).remove();};var globalAdState=null;var AD_STATE={LOADED:'loaded'};var CLOSE_AD_HTML='<div class=\'close-ad\'></div>';class AdView extends view/* default */.A{initialize(html,cssClass,adParams){this.html=html;this.cssClass=cssClass;this.ad_params=adParams;if(globalAdState!==AD_STATE.LOADED){this._loadAdHandler();}return this._replaceNode();}_loadAdHandler(){globalAdState=AD_STATE.LOADED;ad_view_$(window).on('message',e=>{var _e$originalEvent$data;if(((_e$originalEvent$data=e.originalEvent.data)===null||_e$originalEvent$data===void 0?void 0:_e$originalEvent$data.type)==='removeAd'){removeAd(e.originalEvent.data.adClass);}});}_replaceNode(){var _this=this;var $close=ad_view_$(CLOSE_AD_HTML);if(js_cookie/* default */.A.get(`${this.cssClass}_ad_disabled`)){this.$node.remove();}else{var $ad=ad_view_$(`<div>${this.html}</div>`).addClass(this.cssClass).append($close);this.$node.replaceWith($ad);$close.on('click',/*#__PURE__*/ad_view_asyncToGenerator(/*#__PURE__*/ad_view_regeneratorRuntime().mark(function _callee(){return ad_view_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:js_cookie/* default */.A.set(`${_this.cssClass}_ad_disabled`,'1',{expires:2});$ad.addClass('removing');_context.next=4;return (0,delay/* default */.Ay)(1000);case 4:removeAd(_this.cssClass);case 5:case"end":return _context.stop();}},_callee);})));// $new_content = $(@html).addClass(@cssClass)
// $iframe = $new_content.find 'iframe'
// console.log $new_content.html()
// $iframe.on 'load', ->
// iframe = $iframe[0]
// doc = if iframe.contentDocument
// iframe.contentDocument
// else
// iframe.contentWindow.document
// delay(3.5 * 1000).then ->
// unless $('iframe,#placeholder', doc).exists()
// $new_content.remove()
}}}
;// CONCATENATED MODULE: ./app/packs/javascripts/views/ads/yandex_ad.js
var yandex_ad_class;function yandex_ad_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}/* global Ya */var state=null;var pendingAds=[];var STATE={LOADED:'loaded',LOADING:'loading'};var YandexAd=(yandex_ad_class=class YandexAd extends AdView{initialize(html,cssClass,adParams){this.html=html;this.cssClass=cssClass;this.adParams=adParams;if(state===STATE.LOADED){this._render();}else if(state===STATE.LOADING){this._schedule();}else{this._loadJs();}}_loadJs(){state=STATE.LOADING;this._schedule();((w,d,n)=>{w[n]=w[n]||[];w[n].push(()=>{state=STATE.LOADED;pendingAds.forEach(render=>render());return pendingAds=[];});var t=d.getElementsByTagName('script')[0];var s=d.createElement('script');s.type='text/javascript';s.src='//an.yandex.ru/system/context.js';s.async=true;s.onerror=()=>{if('remove_ad'in window){return window.remove_ad(this.cssClass);}};return t.parentNode.insertBefore(s,t);})(window,window.document,'yandexContextAsyncCallbacks');}_schedule(){return pendingAds.push(this._render);}_render(){this._replaceNode();return Ya.Context.AdvManager.render(this.adParams);}},(yandex_ad_applyDecoratedDescriptor(yandex_ad_class.prototype,"_render",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(yandex_ad_class.prototype,"_render"),yandex_ad_class.prototype)),yandex_ad_class);
// EXTERNAL MODULE: ./node_modules/get-js/index.js
var get_js = __webpack_require__(62165);
var get_js_default = /*#__PURE__*/__webpack_require__.n(get_js);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/ads/mytarget_ad.js
var mytarget_ad_class;function mytarget_ad_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var mytarget_ad_state=null;var mytarget_ad_pendingAds=[];var mytarget_ad_STATE={LOADED:'loaded',LOADING:'loading'};var MytargetAd=(mytarget_ad_class=class MytargetAd extends AdView{initialize(html,cssClass){this.html=html;this.cssClass=cssClass;if(mytarget_ad_state===mytarget_ad_STATE.LOADED){this._render();}else if(mytarget_ad_state===mytarget_ad_STATE.LOADING){this._schedule();}else if(mytarget_ad_state===null){this._loadJs();}}_loadJs(){mytarget_ad_state=mytarget_ad_STATE.LOADING;get_js_default()('//ad.mail.ru/static/ads-async.js').then(()=>{mytarget_ad_state=mytarget_ad_STATE.LOADED;mytarget_ad_pendingAds.forEach(render=>render());this._render();});}_schedule(){mytarget_ad_pendingAds.push(this._render);}_render(){this._replaceNode();(window.MRGtag=window.MRGtag||[]).push({});}},(mytarget_ad_applyDecoratedDescriptor(mytarget_ad_class.prototype,"_render",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(mytarget_ad_class.prototype,"_render"),mytarget_ad_class.prototype)),mytarget_ad_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/desktop_ad.js
class DesktopAd extends view/* default */.A{initialize(){var provider=this.$node.data('ad_provider');var html=this.$node.data('ad_html');var cssClass=this.$node.data('ad_css_class');var adParams=this.$node.data('ad_params');var platform=this.$node.data('platform');if(!this._platformMatched(platform)){return;}if(provider==='yandex_direct'){new YandexAd(this.$node,html,cssClass,adParams);}if(provider==='mytarget'){new MytargetAd(this.$node,html,cssClass,adParams);}else{new AdView(this.$node,html,cssClass,adParams);}}_platformMatched(platform){if(platform==='desktop'){return (0,shiki_utils.isTablet)()||!(0,shiki_utils.isPhone)();}return shiki_utils.mobileDetect.phone||shiki_utils.mobileDetect.tablet;}}
// EXTERNAL MODULE: ./node_modules/lodash/uniq.js
var uniq = __webpack_require__(63375);
var uniq_default = /*#__PURE__*/__webpack_require__.n(uniq);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/p.js
var p = __webpack_require__(94324);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/forum.js
/* provided dependency */ var forum_$ = __webpack_require__(74692);
var FAYE_EVENTS=['faye:comment:marked','faye:comment:created','faye:comment:updated','faye:comment:deleted','faye:comment:converted','faye:topic:updated','faye:topic:deleted','faye:comment:set_replies'];class Forum extends ShikiView{initialize(){this.on(FAYE_EVENTS.join(' '),(e,data)=>{if(window.SHIKI_USER.isTopicIgnored(data.topic_id)){return;}if(window.SHIKI_USER.isUserIgnored(data.user_id)){return;}var $topic=this.$(`.b-topic#${data.topic_id}`);if($topic.exists()){$topic.trigger(e.type,data);}else if(e.type==='faye:comment:created'){this._fayePlaceholder(data.topic_id);// уведомление о добавленном элементе через faye
forum_$(document.body).trigger('faye:added');}});this.on('faye:topic:created',(e,data)=>{if(window.SHIKI_USER.isUserIgnored(data.user_id)){return;}this._fayePlaceholder(data.topic_id);// уведомление о добавленном элементе через faye
forum_$(document.body).trigger('faye:added');});}// получение плейсхолдера для подгрузки новых топиков
_fayePlaceholder(commentId){var _$placeholder$data;var $placeholder=this.$('>.faye-loader');if(!$placeholder.exists()){$placeholder=forum_$('<div class="faye-loader to-process" data-dynamic="clickloaded"></div>').prependTo(this.$root).data({ids:[]}).process().on('clickloaded:success',(e,data)=>{var $html=forum_$(data.content).process(data.JS_EXPORTS);$placeholder.replaceWith($html);});}if(((_$placeholder$data=$placeholder.data('ids'))===null||_$placeholder$data===void 0?void 0:_$placeholder$data.indexOf(commentId))===-1){var ids=uniq_default()([...$placeholder.data('ids'),commentId]);$placeholder.data({ids,'clickloaded-url':`/topics/chosen/${ids.join(',')}`});var num=$placeholder.data('ids').length;$placeholder.html((0,p/* default */.A)(num,i18n/* default */.A.t('frontend.lib.jquery_shiki_forum.new_topics_added.one',{count:num}),i18n/* default */.A.t('frontend.lib.jquery_shiki_forum.new_topics_added.few',{count:num}),i18n/* default */.A.t('frontend.lib.jquery_shiki_forum.new_topics_added.many',{count:num})));}}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/topic.js
/* provided dependency */ var topic_$ = __webpack_require__(74692);
var topic_class;function topic_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */topic_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function topic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function topic_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){topic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){topic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function topic_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var topic_I18N_KEY='frontend.dynamic_elements.topic';var SHOW_IGNORED_TOPICS_IN=['topics_show','collections_show','critiques_show','reviews_show'];// TODO: move code related to comments to separate class
var Topic=(topic_class=class Topic extends ShikiEditable{initialize(){// data attribute is set in Topics.Tracker
this.model=this.$node.data('model')||this.defaultModel;if(window.SHIKI_USER.isUserIgnored(this.model.user_id)||window.SHIKI_USER.isTopicIgnored(this.model.id)){if(SHOW_IGNORED_TOPICS_IN.includes(document.body.id)){this._toggleIgnored(true);}else{// node can be not inserted into DOM yet
if(this.$node.parent().length){this.$node.remove();}else{(0,delay/* default */.Ay)().then(()=>this.$node.remove());}return;}}this.$editorContainer=this.$('.editor-container');this.$editor=this.$('.shiki_editor-selector');this.$editorForm=this.$editor.closest('form');this.$footerVote=this.$inner.find('.b-footer_vote');// do not move to getter. it is redefined in FullDialog
this.$commentsLoader=this.$('.comments-loader');if(window.SHIKI_USER.isSignedIn&&window.SHIKI_USER.isDayRegistered&&this.$editor.length){// NOTE: remove .process() after shiki_editor_v1 is completely removed from the project
this.editor=this.$editor.process().view();}else{if(this.$editorForm.length){this.$editorForm.replaceWith(`<div class='b-nothing_here'>${i18n/* default */.A.t('frontend.shiki_editor.not_available')}</div>`);}this.$editor=null;this.$editorForm=null;}if(this.model&&!this.model.is_viewed){this._activateAppearMarker();}if(this.model&&this.$footerVote.length){this._actualizeVoting();}if(this.$checkHeightNode.length&&(this.isPreview||this.isClubPage)){this._scheduleCheckHeight(true);}if(this.isCosplay&&!this.isPreview){__webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 23953)).then(({ShikiGallery})=>new ShikiGallery(this.$('.b-cosplay_gallery .b-gallery')));}// no editor form for topic tooltip for example
if(this.$editorForm){this.$editorForm.on('ajax:success',(e,response)=>{var $newComment=topic_$(response.content).process(response.JS_EXPORTS);this.$('.b-comments').find('.b-nothing_here').remove();if(this.$editor.is(':last-child')){this.$('.b-comments').append($newComment);}else{this.$('.b-comments').prepend($newComment);}$newComment.yellowFade();this.editor.cleanup();this._hideEditor();});}topic_$('.item-ignore',this.$inner).on('ajax:before',function(){topic_$(this).toggleClass('selected');}).on('ajax:success',(e,result)=>{if(result.is_ignored){window.SHIKI_USER.ignoreTopic(result.topic_id);}else{window.SHIKI_USER.unignoreTopic(result.topic_id);}this._toggleIgnored(result.is_ignored);});if(this.$footerVote.length){this._bindVotes();}// прочтение комментриев
this.on('appear',this._appear);// ответ на комментарий
this.on('comment:reply',(e,reply,isOfftopic)=>{// @editor is empty for unauthorized user
if(this.editor){this._showEditor();if(reply){// it is empty for generated topics
this.editor.replyComment(reply,isOfftopic);}else{this.editor.focus();}}});// клик скрытию редактора
this.$('.shiki_editor-selector').on('click','.hide',this._hideEditor);// delegated handlers becase it is replaced on postload in
// inherited classes (FullDialog)
this.on('clickloaded:before','.comments-loader',this._beforeCommentsClickload);this.on('clickloaded:success','.comments-loader',this._commentsClickloaded);this.on('click','.comments-loader',()=>{if(this.$commentsLoader.data('dynamic')!=='clickloaded'){this.$commentsLoader.addClass('hidden');this.$('.comments-loaded').each((_index,node)=>(0,animated/* animatedExpand */.O)(node));this.$commentsHider.show();}});// hide loaded comments
this.$commentsCollapser.on('click',()=>{this.$commentsCollapser.addClass('hidden');this.$commentsLoader.addClass('hidden');this.$commentsExpander.show();this.$('.comments-loaded').each((_index,node)=>(0,animated/* animatedCollapse */.F)(node));});// скрытие комментариев
this.$commentsHider.on('click',()=>{this.$commentsHider.hide();this.$('.comments-loaded').each((_index,node)=>(0,animated/* animatedCollapse */.F)(node));this.$commentsExpander.show();});// разворачивание комментариев
this.$commentsExpander.on('click',()=>{this.$commentsExpander.hide();this.$('.comments-loaded').each((_index,node)=>(0,animated/* animatedExpand */.O)(node));if(this.$commentsLoader){this.$commentsLoader.removeClass('hidden');this.$commentsCollapser.removeClass('hidden');}else{this.$commentsHider.show();}});this._bindReturnClick();}_showReturnButton(){var _this=this;return topic_asyncToGenerator(/*#__PURE__*/topic_regeneratorRuntime().mark(function _callee(){return topic_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay/* default */.Ay)(300);case 2:// нужно подождать, пока страница проскролится до редактора
topic_$('span.return-to-reply').css('visibility',topic_$(_this.repliedNode).is(':appeared')?'hidden':'visible');case 3:case"end":return _context.stop();}},_callee);}))();}_saveRepliablePosition(repliedNode){this.repliedNode=repliedNode;}_returnToReplyComment(){if(this.repliedNode){topic_$.scrollTo(topic_$(this.repliedNode));}topic_$('span.return-to-reply').css('visibility','hidden');this.repliedNode=null;}_bindReturnClick(){this.on('click','span.item-reply, span.item-quote, span.item-quote-mobile',e=>{var repliable=topic_$(e.target).closest('.inner');this._saveRepliablePosition(repliable);this._showReturnButton();});this.$('span.return-to-reply').on('click',()=>{this._returnToReplyComment();});}// similar to hash from JsExports::TopicsExport#serialize
get defaultModel(){return{can_destroy:false,can_edit:false,id:parseInt(this.node.id),is_viewed:true,user_id:this.$node.data('user_id'),voted_yes:false,voted_no:false};}get type(){return'topic';}get commentType(){return'comment';}get typeLabel(){return i18n/* default */.A.t(`${topic_I18N_KEY}.type_label`);}get reloadUrl(){return`/${this.type}s/${this.$node.attr('id')}/reload?is_preview=${this.isPreview}&is_mini=${this.isMini}`;}get $body(){return this.$inner.children('.body');}get isPreview(){return this.$node.hasClass('b-topic-preview');}get isMini(){return this.$node.hasClass('b-topic-minified');}get isCosplay(){return this.$node.hasClass('b-cosplay-topic');}get isClubPage(){return this.$node.hasClass('b-club_page-topic');}get isCritique(){return this.$node.hasClass('b-critique-topic');}get isReview(){return this.$node.hasClass('b-review-topic');}get $commentsHider(){return this.$('.comments-hider');}get $commentsCollapser(){return this.$('.comments-collapser');}get $commentsExpander(){return this.$('.comments-expander');}get $checkHeightNode(){return this.$body;}_assignCheckHeightLimits(){if(this.isReview||this.isCritique){this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT=220;this.CHECK_HEIGHT_COLLAPSED_HEIGHT=120;this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=120;}else{super._assignCheckHeightLimits();}}_bindFaye(){super._bindFaye();this.on([`faye:${this.commentType}:updated`,`faye:${this.commentType}:deleted`,`faye:${this.commentType}:converted`,`faye:${this.commentType}:set_replies`].join(' '),(e,data)=>{e.stopImmediatePropagation();var trackableType=e.type.match(/comment|message/)[0];var trackableId=data[`${trackableType}_id`];if(e.target===this.$node[0]){this.$(`.b-${trackableType}#${trackableId}`).trigger(e.type,data);}});this.on(`faye:${this.commentType}:created`,(e,data)=>{e.stopImmediatePropagation();var trackableType=e.type.match(/comment|message/)[0];var trackableId=data[`${trackableType}_id`];if(this.$(`.b-${trackableType}#${trackableId}`).exists()){return;}var $placeholder=this._fayePlaceholder(trackableId,trackableType);// уведомление о добавленном элементе через faye
topic_$(document.body).trigger('faye:added');if(window.SHIKI_USER.isCommentsAutoLoaded){if($placeholder.is(':appeared')&&!topic_$('textarea:focus').val()){$placeholder.click();}}});this.on('faye:comment:marked',(e,data)=>{e.stopImmediatePropagation();topic_$(`.b-comment#${data.comment_id}`).view().mark(data.mark_kind,data.mark_value);});}// переключение топика в режим игнора/не_игнора
_toggleIgnored(isIgnored){topic_$('.item-ignore',this.$inner).toggleClass('selected',isIgnored).data({method:isIgnored?'DELETE':'POST'});this.$('.b-anime_status_tag.ignored').toggleClass('hidden',!isIgnored);}// удаляем уже имеющиеся подгруженные элементы
_filterPresentEntries($comments){var filter='b-comment';var presentIds=topic_$(`.${filter}`,this.$node).toArray().map(v=>v.id).filter(v=>v);var excludeSelector=presentIds.map(id=>`.${filter}#${id}`).join(',');$comments.children().filter(excludeSelector).remove();}// отображение редактора, если это превью топика
_showEditor(){if(this.isPreview&&!this.$editorContainer.is(':visible')){this.$editorContainer.show();// animatedExpand()
}}// скрытие редактора, если это превью топика
_hideEditor(){if(this.isPreview){this.$editorContainer.hide();// animatedCollapse()
}}// получение плейсхолдера для подгрузки новых комментариев
_fayePlaceholder(trackableId,trackableType){var _$placeholder$data;this.$('.b-comments .b-nothing_here').remove();var $placeholder=this.$('.b-comments .faye-loader');if(!$placeholder.exists()){$placeholder=topic_$('<div class="faye-loader to-process" data-dynamic="clickloaded"></div>').appendTo(this.$('.b-comments')).data({ids:[]}).process().on('clickloaded:success',(e,data)=>{var $html=topic_$(data.content).process(data.JS_EXPORTS);$placeholder.replaceWith($html);$html.process();});}if(((_$placeholder$data=$placeholder.data('ids'))===null||_$placeholder$data===void 0?void 0:_$placeholder$data.indexOf(trackableId))===-1){var ids=uniq_default()([...$placeholder.data('ids'),trackableId]);$placeholder.data({ids,'clickloaded-url':`/${trackableType}s/chosen/${ids.join(',')}`});var num=$placeholder.data('ids').length;$placeholder.html(trackableType==='message'?(0,p/* default */.A)(num,i18n/* default */.A.t(`${topic_I18N_KEY}.new_message_added.one`,{count:num}),i18n/* default */.A.t(`${topic_I18N_KEY}.new_message_added.few`,{count:num}),i18n/* default */.A.t(`${topic_I18N_KEY}.new_message_added.many`,{count:num})):(0,p/* default */.A)(num,i18n/* default */.A.t(`${topic_I18N_KEY}.new_comment_added.one`,{count:num}),i18n/* default */.A.t(`${topic_I18N_KEY}.new_comment_added.few`,{count:num}),i18n/* default */.A.t(`${topic_I18N_KEY}.new_comment_added.many`,{count:num})));}return $placeholder;}// handlers
_appear(e,$appeared,byClick){return topic_asyncToGenerator(/*#__PURE__*/topic_regeneratorRuntime().mark(function _callee2(){var $filteredAppeared,interval,$objects,$markers,ids;return topic_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$filteredAppeared=$appeared.not(function(){return topic_$(this).data('disabled')||!(this.classList.contains('b-appear_marker')&&this.classList.contains('active'));});if($filteredAppeared.exists()){_context2.next=3;break;}return _context2.abrupt("return");case 3:interval=byClick?1:1500;$objects=$filteredAppeared.closest('[data-appear_type]');$markers=$objects.find('.b-new_marker.active');ids=$objects.map(function(){var $object=topic_$(this);var itemType=$object.data('appear_type');return`${itemType}-${this.id}`;}).toArray();axios/* default */.A.post($markers.data('appear_url'),{ids:ids.join(',')});$filteredAppeared.remove();if(!$markers.data('reappear')){_context2.next=13;break;}$markers.addClass('off');_context2.next=20;break;case 13:_context2.next=15;return (0,delay/* default */.Ay)(interval);case 15:$markers.css({opacity:0});_context2.next=18;return (0,delay/* default */.Ay)(500);case 18:$markers.hide();$markers.removeClass('active');case 20:case"end":return _context2.stop();}},_callee2);}))();}_beforeCommentsClickload(){var newUrl=this.$commentsLoader.data('clickloaded-url-template').replace('SKIP',this.$commentsLoader.data('skip'));this.$commentsLoader.data('clickloaded-url',newUrl);}_commentsClickloaded(e,data){var $newComments=topic_$('<div class=\'comments-loaded\'></div>').html(data.content);this._filterPresentEntries($newComments);$newComments.process(data.JS_EXPORTS).insertAfter(this.$commentsLoader);(0,animated/* animatedExpand */.O)($newComments[0]);this._updateCommentsLoader(data);}_actualizeVoting(){this.$inner.find('.b-footer_vote .vote.yes, .user-vote .voted-for').toggleClass('selected',this.model.voted_yes);this.$inner.find('.b-footer_vote .vote.no, .user-vote .voted-against').toggleClass('selected',this.model.voted_no);if(this.model.votes_for!=null){this.$inner.find('.votes-for').html(`${this.model.votes_for}`);}if(this.model.votes_against!=null){this.$inner.find('.votes-against').html(`${this.model.votes_against}`);}}// data is used in inherited classes (FullDialog)
_updateCommentsLoader(_data){var limit=this.$commentsLoader.data('limit');var count=this.$commentsLoader.data('count')-limit;if(count>0){this.$commentsLoader.data({skip:this.$commentsLoader.data('skip')+limit,count});var commentCount=Math.min(limit,count);var commentWord=(0,p/* default */.A)(commentCount,i18n/* default */.A.t(`${topic_I18N_KEY}.comment.one`),i18n/* default */.A.t(`${topic_I18N_KEY}.comment.few`),i18n/* default */.A.t(`${topic_I18N_KEY}.comment.many`));var ofTotalComments=count>limit?`${i18n/* default */.A.t(`${topic_I18N_KEY}.of`)} ${count}`:'';var loadComments=i18n/* default */.A.t(`${topic_I18N_KEY}.load_comments`,{comment_count:commentCount,of_total_comments:ofTotalComments,comment_word:commentWord});this.$commentsLoader.html(loadComments);this.$commentsCollapser.removeClass('hidden');}else{this.$commentsLoader.remove();this.$commentsLoader=null;this.$commentsHider.show();this.$commentsCollapser.remove();}}_bindVotes(){var _window$SHIKI_USER;if(((_window$SHIKI_USER=window.SHIKI_USER)===null||_window$SHIKI_USER===void 0?void 0:_window$SHIKI_USER.id)===this.model.user_id){this.$footerVote.remove();}var $vote=this.$footerVote.find('.vote');$vote.on('ajax:before',e=>{this.$footerVote.addClass('b-ajax');var $target=topic_$(e.target);var isYes=$target.hasClass('yes');var vote=null;if(isYes){if(this.model.voted_yes){vote='unvote';this.model.votes_for-=1;}else{vote='yes';this.model.votes_for+=1;if(this.model.voted_no)this.model.votes_against-=1;}}else{if(this.model.voted_no){vote='unvote';this.model.votes_against-=1;}else{vote='no';this.model.votes_against+=1;if(this.model.voted_yes)this.model.votes_for-=1;}}$target.data('action',$target.data('action').replace(/vote=\w+/,`vote=${vote}`));this.model.voted_yes=this.model.voted_yes?false:isYes;this.model.voted_no=this.model.voted_no?false:!isYes;this._actualizeVoting();}).on('ajax:complete',()=>{this.$footerVote.removeClass('b-ajax');});}},(topic_applyDecoratedDescriptor(topic_class.prototype,"$body",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"$body"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"isPreview",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"isPreview"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"isMini",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"isMini"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"isCosplay",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"isCosplay"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"isClubPage",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"isClubPage"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"isCritique",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"isCritique"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"isReview",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"isReview"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"$commentsHider",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"$commentsHider"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"$commentsCollapser",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"$commentsCollapser"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"$commentsExpander",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"$commentsExpander"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"$checkHeightNode",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(topic_class.prototype,"$checkHeightNode"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"_hideEditor",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(topic_class.prototype,"_hideEditor"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"_beforeCommentsClickload",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(topic_class.prototype,"_beforeCommentsClickload"),topic_class.prototype),topic_applyDecoratedDescriptor(topic_class.prototype,"_commentsClickloaded",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(topic_class.prototype,"_commentsClickloaded"),topic_class.prototype)),topic_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/full_dialog.js
/* provided dependency */ var full_dialog_$ = __webpack_require__(74692);
class FullDialog extends Topic{get commentType(){return'message';}// handlers
_beforeCommentsClickload(){}// private functions
_updateCommentsLoader(data){if(data.postloader){var $newCommentsLoader=full_dialog_$(data.postloader).process();this.$commentsLoader.replaceWith($newCommentsLoader);this.$commentsLoader=$newCommentsLoader;}else{this.$commentsLoader.remove();this.$commentsLoader=null;}}}
// EXTERNAL MODULE: ./node_modules/@morr/image-promise/index.js
var image_promise = __webpack_require__(83570);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/html5_video.js
function html5_video_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */html5_video_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function html5_video_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function html5_video_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){html5_video_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){html5_video_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}class Html5Video extends view/* default */.A{initialize(){this.$node.magnificPopup({preloader:false,type:'webm',mainClass:'mfp-no-margins mfp-img-mobile',closeOnContentClick:true});this._replaceImage();}_replaceImage(attempt=1){var _this=this;if(this.$node.data('video').match(/\.mp3$/)){return;}var thumbnail=new Image();thumbnail.src=this.$node.data('src');(0,image_promise/* default */.A)(thumbnail).then(()=>{this.node.src=this.$node.data('src');this.node.srcset=this.$node.data('srcset');}).catch(/*#__PURE__*/html5_video_asyncToGenerator(/*#__PURE__*/html5_video_regeneratorRuntime().mark(function _callee(){return html5_video_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(attempt<=60)){_context.next=4;break;}_context.next=3;return (0,delay/* default */.Ay)(5000*(attempt+1));case 3:_this._replaceImage(attempt+1);case 4:case"end":return _context.stop();}},_callee);})));}}
// EXTERNAL MODULE: ./node_modules/lodash/isString.js
var isString = __webpack_require__(85015);
var isString_default = /*#__PURE__*/__webpack_require__.n(isString);
// EXTERNAL MODULE: ./app/packs/javascripts/vendor/virous_mk_links_highlight.js
var virous_mk_links_highlight = __webpack_require__(72379);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/log_entry.js
/* provided dependency */ var log_entry_$ = __webpack_require__(74692);
var log_entry_class;function log_entry_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */log_entry_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function log_entry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function log_entry_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_entry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){log_entry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function log_entry_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var LogEntry=(log_entry_class=class LogEntry extends ShikiView{initialize(){this.$inner=this.$node;this.$moderation=this.$('.moderation');this.$('.reject[data-reason-prompt]',this.$moderation).on('click',this._rejectDialog);this.$('.ajax-action',this.$moderation).on('ajax:before',this._shade).on('ajax:complete',this._unshade).on('ajax:success',this._reload);this.$('.delete',this.$moderation).on('ajax:before',this._shade).on('ajax:success',this._remove);this.$('.ban, .warn',this.$moderation).on('ajax:before',this._prepareForm).on('ajax:before',this._shade).on('ajax:complete',this._unshade).on('ajax:success',this._showForm);this.$root.children('.spoiler.collapse').one('click',this._processDiffs);}_prepareForm(){this.$moderation.hide();this.$('.spoiler.collapse .action').hide();}_showForm(e,html){var $form=this.$('.ban-form');$form.html(html).show();new ban_form/* default */.A($form);if(log_entry_$(e.target).hasClass('warn')){$form.find('#ban_duration').val('0m');if(this.$root.find('.b-spoiler_marker').length){$form.find('#ban_reason').val('спойлеры');}}// закрытие формы бана
log_entry_$('.cancel',$form).on('click',this._hideForm);// сабмит формы бана пользователю
$form.on('ajax:before',this._shade).on('ajax:complete',this._unshade).on('ajax:success',this._reload);}_hideForm(){this.$moderation.show();this.$('.spoiler.collapse .action').show();this.$('.ban-form').hide().empty();this.$('.spoiler.collapse').click();}_remove(){var _this=this;return log_entry_asyncToGenerator(/*#__PURE__*/log_entry_regeneratorRuntime().mark(function _callee(){return log_entry_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.$root.hide();_context.next=3;return (0,delay/* default */.Ay)(10000);case 3:// remove must be called later becase
// "b-tooltipped" tooltip wont disappear otherwise
_this.$root.remove();case 4:case"end":return _context.stop();}},_callee);}))();}_rejectDialog(e){var href=log_entry_$(e.target).data('href');var reason=prompt(log_entry_$(e.target).data('reason-prompt'));if(reason==null){e.preventDefault();e.stopImmediatePropagation();return;}log_entry_$(e.target).attr('href',`${href}?reason=${encodeURIComponent(reason)}`);}_processDiffs(){this.$('.field-changes .diff').each(/*#__PURE__*/function(){var _ref=log_entry_asyncToGenerator(/*#__PURE__*/log_entry_regeneratorRuntime().mark(function _callee2(_index,node){var $diff,_yield$import,DiffMatchPatch,$diffValue,oldValue,newValue,dmp,diff;return log_entry_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$diff=log_entry_$(node);_context2.next=3;return __webpack_require__.e(/* import() | diff-match-patch */ 9446).then(__webpack_require__.t.bind(__webpack_require__, 2189, 23));case 3:_yield$import=_context2.sent;DiffMatchPatch=_yield$import.default;$diffValue=$diff.find('.value');oldValue=$diffValue.data('old_value');newValue=$diffValue.data('new_value');dmp=new DiffMatchPatch();diff=dmp.diff_main(isString_default()(oldValue)?oldValue:JSON.stringify(oldValue),isString_default()(newValue)?newValue:JSON.stringify(newValue));// dmp.Diff_EditCost = 4;
// dmp.diff_cleanupEfficiency(diff);
dmp.diff_cleanupSemantic(diff);$diffValue.html(dmp.diff_prettyHtml(diff).replace(/&para;/g,''));case 12:case"end":return _context2.stop();}},_callee2);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());var $externalLinks=this.$('.field-changes.external_links');if(!$externalLinks.length){return;}this._processExternalLinks($externalLinks);}_processExternalLinks($externalLinks){$externalLinks.each((_index,node)=>(0,virous_mk_links_highlight["default"])(node));}},(log_entry_applyDecoratedDescriptor(log_entry_class.prototype,"_prepareForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(log_entry_class.prototype,"_prepareForm"),log_entry_class.prototype),log_entry_applyDecoratedDescriptor(log_entry_class.prototype,"_showForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(log_entry_class.prototype,"_showForm"),log_entry_class.prototype),log_entry_applyDecoratedDescriptor(log_entry_class.prototype,"_hideForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(log_entry_class.prototype,"_hideForm"),log_entry_class.prototype),log_entry_applyDecoratedDescriptor(log_entry_class.prototype,"_remove",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(log_entry_class.prototype,"_remove"),log_entry_class.prototype),log_entry_applyDecoratedDescriptor(log_entry_class.prototype,"_rejectDialog",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(log_entry_class.prototype,"_rejectDialog"),log_entry_class.prototype),log_entry_applyDecoratedDescriptor(log_entry_class.prototype,"_processDiffs",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(log_entry_class.prototype,"_processDiffs"),log_entry_class.prototype)),log_entry_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/message.js
class Message extends Comment{get type(){return'message';}get typeLabel(){return i18n/* default */.A.t('frontend.dynamic_elements.message.type_label');}_deactivateInaccessibleButtons(){}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/not_implemented_yet_action.js
var not_implemented_yet_action_class;function not_implemented_yet_action_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var not_implemented_yet_action_I18N_KEY='frontend.dynamic_elements.not_implemented_yet_action';var NotImplementedYetAction=(not_implemented_yet_action_class=class NotImplementedYetAction extends view/* default */.A{initialize(){this.$node.on('click',this.onClick);}onClick(e){shiki_utils.flash.info(i18n/* default */.A.t(not_implemented_yet_action_I18N_KEY));e.stopImmediatePropagation();e.preventDefault();}},(not_implemented_yet_action_applyDecoratedDescriptor(not_implemented_yet_action_class.prototype,"onClick",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(not_implemented_yet_action_class.prototype,"onClick"),not_implemented_yet_action_class.prototype)),not_implemented_yet_action_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/postloaded.js
function postloaded_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */postloaded_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function postloaded_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function postloaded_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){postloaded_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){postloaded_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}class Postloaded extends view/* default */.A{initialize(){var _this=this;return postloaded_asyncToGenerator(/*#__PURE__*/postloaded_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return postloaded_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios/* default */.A.get(_this.$root.data('postloaded-url'));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;_this.$root.html(data).removeClass('b-ajax').process().trigger('postloaded:success');case 5:case"end":return _context.stop();}},_callee);}))();}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/critique.js
var critique_class;function critique_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */critique_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function critique_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function critique_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){critique_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){critique_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function critique_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var Critique=(critique_class=class Critique extends Topic{_checkHeight(){var _superprop_get_checkHeight=()=>super._checkHeight,_this=this;return critique_asyncToGenerator(/*#__PURE__*/critique_regeneratorRuntime().mark(function _callee(){var $entryCover,imageHeight,readMoreHeight;return critique_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$entryCover=_this.$('.critique-entry_cover img');if($entryCover.length){_context.next=3;break;}return _context.abrupt("return",_superprop_get_checkHeight().call(_this));case 3:_context.next=5;return (0,load_image/* imagePromiseFinally */.yb)($entryCover[0]);case 5:imageHeight=$entryCover.height();readMoreHeight=13+5;// 5px - read_more offset
if(imageHeight>0){(0,check_height/* default */.A)(_this.$('.body-inner'),{maxHeight:imageHeight-readMoreHeight,collapsedHeight:imageHeight-readMoreHeight,expandHtml:''});}case 8:case"end":return _context.stop();}},_callee);}))();}},(critique_applyDecoratedDescriptor(critique_class.prototype,"_checkHeight",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(critique_class.prototype,"_checkHeight"),critique_class.prototype)),critique_class);
// EXTERNAL MODULE: ./node_modules/turbolinks/dist/turbolinks.js
var turbolinks = __webpack_require__(6224);
var turbolinks_default = /*#__PURE__*/__webpack_require__.n(turbolinks);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/flash.js
var flash = __webpack_require__(94442);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/review.js
var review_class;function review_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */review_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function review_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function review_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){review_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){review_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function review_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var Review=(review_class=class Review extends Topic{get typeLabel(){return i18n/* default */.A.t('frontend.dynamic_elements.review.type_label');}get $checkHeightNode(){return this.$inner;}get $body(){return this.$inner.find('.body');}get $editorPlacement(){return this.$body.parent();}_toggleMobileControls(){super._toggleMobileControls();var $buttons=this.$inner.children('aside.buttons');var $header=this.$inner.children('header');if(this.$node.hasClass('aside-expanded')){$buttons.detach();$buttons.insertBefore($header);}else{$buttons.detach();$buttons.insertAfter($header);}}_redirectAfterDeleted(_e,result){return review_asyncToGenerator(/*#__PURE__*/review_regeneratorRuntime().mark(function _callee(){return review_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:(0,flash/* pushFlash */.v)(result.notice);_context.next=3;return (0,delay/* default */.Ay)(150);case 3:turbolinks_default().visit(document.location.href.replace(/\/reviews\/\d+$/,'/reviews'),{action:'replace'});case 4:case"end":return _context.stop();}},_callee);}))();}_assignCheckHeightLimits(){var mobileOffset=(0,shiki_utils.isPhone)()?63:0;this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT=220+mobileOffset;this.CHECK_HEIGHT_COLLAPSED_HEIGHT=170+mobileOffset;this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=115+mobileOffset;}_bindFaye(){super._bindFaye();this.on('faye:review:converted',this._fayeConverted);}_fayeConverted(_e,data){var message=i18n/* default */.A.t('frontend.shiki_editable.review_converted',{url:`/comments/${data.comment_id}`});this._replace(`<div class='b-comment-info b-${this.type}'><span>${message}</span>`+`<a class='b-user16' href='/${data.actor}'><img src='${data.actor_avatar}' `+`srcset='${data.actor_avatar_2x} 2x' /><span>${data.actor}</span></a></div>`);return false;// очень важно! иначе эвенты зациклятся из-за такого же обработчика в родителе
}},(review_applyDecoratedDescriptor(review_class.prototype,"$checkHeightNode",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(review_class.prototype,"$checkHeightNode"),review_class.prototype),review_applyDecoratedDescriptor(review_class.prototype,"$body",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(review_class.prototype,"$body"),review_class.prototype),review_applyDecoratedDescriptor(review_class.prototype,"$editorPlacement",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(review_class.prototype,"$editorPlacement"),review_class.prototype),review_applyDecoratedDescriptor(review_class.prototype,"_toggleMobileControls",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(review_class.prototype,"_toggleMobileControls"),review_class.prototype),review_applyDecoratedDescriptor(review_class.prototype,"_redirectAfterDeleted",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(review_class.prototype,"_redirectAfterDeleted"),review_class.prototype),review_applyDecoratedDescriptor(review_class.prototype,"_fayeConverted",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(review_class.prototype,"_fayeConverted"),review_class.prototype)),review_class);
// EXTERNAL MODULE: ./node_modules/p-defer/index.js
var p_defer = __webpack_require__(97313);
// EXTERNAL MODULE: ./node_modules/lodash/compact.js
var compact = __webpack_require__(83673);
var compact_default = /*#__PURE__*/__webpack_require__.n(compact);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/prevent_event.js
function preventEvent(e){e.stopImmediatePropagation();e.preventDefault();}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/shiki_editor.js
/* provided dependency */ var shiki_editor_$ = __webpack_require__(74692);
var shiki_editor_class;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function shiki_editor_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */shiki_editor_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function shiki_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function shiki_editor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){shiki_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){shiki_editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function shiki_editor_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}// TODO: REVEMO outdated editor
var ShikiEditor=(shiki_editor_class=class ShikiEditor extends ShikiView{constructor(...args){super(...args);this.initialization=(0,p_defer/* default */.A)();}initialize(){var _this=this;return shiki_editor_asyncToGenerator(/*#__PURE__*/shiki_editor_regeneratorRuntime().mark(function _callee2(){var $node,_yield$import,autosize,LINK_TYPES,fileTextPlaceholder;return shiki_editor_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$node=_this.$node;_this.$form=$node.closest('form');_this.isInnerForm=false;_this.$textarea=_this.$('textarea');// при вызове фокуса на shiki-editor передача сообщения в редактор
_this.on('focus',focus);_context2.next=7;return __webpack_require__.e(/* import() | shiki_editor_v1 */ 1471).then(__webpack_require__.t.bind(__webpack_require__, 1782, 23));case 7:_context2.next=9;return __webpack_require__.e(/* import() | shiki_editor_v1 */ 1471).then(__webpack_require__.bind(__webpack_require__, 31173));case 9:_yield$import=_context2.sent;autosize=_yield$import.default;// по первому фокусу на редактор включаем autosize
_this.$textarea.one('focus',()=>(0,delay/* default */.Ay)().then(()=>autosize(_this.$textarea[0])));_this.$textarea.on('keypress keydown',_this._onKeyPress);_this.$form.on('ajax:before',()=>{if(_this.text.replace(/\n| |\r|\t/g,'')){_this._shade();return;}shiki_utils.flash.error(i18n/* default */.A.t('frontend.shiki_editor.text_cant_be_blank'));return false;}).on('ajax:complete',_this._unshade).on('ajax:success',/*#__PURE__*/shiki_editor_asyncToGenerator(/*#__PURE__*/shiki_editor_regeneratorRuntime().mark(function _callee(){return shiki_editor_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this._hidePreview();_context.next=3;return (0,delay/* default */.Ay)();case 3:_this.$textarea[0].dispatchEvent(new Event('autosize:update'));case 4:case"end":return _context.stop();}},_callee);})));// при клике на неselected кнопку, закрываем все остальные selected кнопки
_this.$('.editor-controls span').on('click',e=>{if(!shiki_editor_$(e.target).hasClass('selected')){_this.$('.editor-controls span.selected').trigger('click');}});// бб коды
_this.$('.editor-bold').on('click',()=>_this.$textarea.insertAtCaret('[b]','[/b]'));_this.$('.editor-italic').on('click',()=>_this.$textarea.insertAtCaret('[i]','[/i]'));_this.$('.editor-underline').on('click',()=>_this.$textarea.insertAtCaret('[u]','[/u]'));_this.$('.editor-strike').on('click',()=>_this.$textarea.insertAtCaret('[s]','[/s]'));_this.$('.editor-spoiler').on('click',()=>_this.$textarea.insertAtCaret(`[spoiler=${i18n/* default */.A.t('frontend.shiki_editor.spoiler').toLowerCase()}]`,'[/spoiler]'));// смайлики и ссылка
['smiley','link','image','quote','upload'].forEach(key=>_this.$(`.editor-${key}`).on('click',e=>{var $button=shiki_editor_$(e.target);var $block=_this.$(`.${key}s`);if($button.hasClass('selected')){$block.addClass('hidden');}else{$block.removeClass('hidden');$block.trigger('click:open');}$button.toggleClass('selected');}));// кнопка сабмита OK
_this.$('.b-button.ok').on('click',e=>{var type=shiki_editor_$(e.target).data('type');var $input=_this.$(`.${type} input[type=text]`);if(type==='images'){return $input.trigger('keypress',[true]);}return $input.trigger('autocomplete:text',[$input.val()]);});// открытие блока ссылки
_this.$('.links').on('click:open',()=>{shiki_editor_$('.links input[type=text]',$node).val('');shiki_editor_$(_this.$('[name="link_type"]:checked')[0]||_this.$('[name="link_type"]')[0]).prop('checked',true).trigger('change');});// автокомплит для поля ввода ссылки
_this.$('.links input[type=text]').completable().on('autocomplete:success autocomplete:text',(e,result)=>{var $radio=_this.$('.links input[type=radio]:checked');var radioType=$radio.val();var param=(()=>{if(isString_default()(result)){if(radioType==='url'){return result;}}else{return{id:result.id,text:result.name,type:radioType};}})();if(param){return $radio.trigger('tag:build',param);}});// изменение типа ссылки
_this.$('.links input[type=radio]').on('change',function(){var $this=shiki_editor_$(this);var $input=shiki_editor_$('.links input[type=text]',$node);$input.attr({placeholder:$this.data('placeholder')});// меняем плейсхолдер
if($this.data('autocomplete')){$input.data({autocomplete:$this.data('autocomplete')});// устанавливаем урл для автокомплита
}else{$input.data({autocomplete:null});}// чистим кеш автокомплита
// .attr('value', '') // чистим текущий введённый текст
return $input.trigger('flushCache').focus();});// общий обработчик для всех радио кнопок, закрывающий блок со ссылками
_this.$('.links input[type=radio]').on('tag:build',(_e,_data)=>_this.$('.editor-link').trigger('click'));// открытие блока картинки
_this.$('.images').on('click:open',()=>// чистим текущий введённый текст
_this.$('.images input[type=text]').val('').focus());// сабмит картинки в текстовом поле
_this.$('.images input[type=text]').on('keypress',(e,isForceSubmit)=>{if(e.keyCode===10||e.keyCode===13||isForceSubmit){preventEvent(e);_this.$textarea.insertAtCaret('',`[img]${shiki_editor_$(e.target).val()}[/img]`);_this.$('.editor-image').trigger('click');}});// открытие блока цитаты
_this.$('.quotes').on('click:open',()=>// чистим текущий введённый текст
_this.$('.quotes input[type=text]').val('').focus());// сабмит цитаты в текстовом поле
_this.$('.quotes input[type=text]').on('keypress',e=>{if(e.keyCode===10||e.keyCode===13){preventEvent(e);_this.$textarea.insertAtCaret('[quote'+(!_this.value||!_this.value.trim()?'':`=${_this.value}`)+']','[/quote]');_this.$('.editor-quote').trigger('click');}});// автокомплит для поля ввода цитаты
_this.$('.quotes input[type=text]').completable().on('autocomplete:success autocomplete:text',(e,result)=>{var text=isString_default()(result)?result:result.value;_this.$textarea.insertAtCaret('[quote'+(!text||!text.trim()?'':`=${text}`)+']','[/quote]');_this.$('.editor-quote').trigger('click');});// построение бб-кода для url
_this.$('.links input[value=url]').on('tag:build',(e,value)=>_this.$textarea.insertAtCaret(`[url=${value}]`,'[/url]',value.replace(/^https?:\/\/|\/.*/g,'')));// построение бб-кода для аниме,манги,персонажа и человека
LINK_TYPES=['.links input[value=anime]','.links input[value=manga]','.links input[value=ranobe]','.links input[value=character]','.links input[value=person]'];_this.$(LINK_TYPES.join(',')).on('tag:build',(e,data)=>_this.$textarea.insertAtCaret(`[${data.type}=${data.id}]`,`[/${data.type}]`,data.text));_this.$('.smileys').one('click:open',_this._loadSmileys);_this.$('.b-offtopic_marker').on('click',_this._onMarkOfftopic);_this.$('footer .unpreview').on('click',_this._hidePreview);_this.$('footer .preview').on('click',()=>{// подстановка данных о текущем элементе, если они есть
var params={comment:_objectSpread(_objectSpread({},_this.$node.data('preview_params')||{}),{},{body:_this.text})};_this._shade();axios/* default */.A.post(shiki_editor_$('footer .preview',_this.$node).data('preview_url'),params).then(response=>_this._showPreview(response.data)).catch().then(_this._unshade);});// редактирование
// сохранение при редактировании коммента
_this.$('.item-apply').on('click',(_e,_data)=>_this.$form.submit());// фокус на редакторе
if(_this.text.length>0){// delay надо, т.к. IE не может делать focus и
// работать с Range (внутри setCursorPosition) для невидимых элементов
(0,delay/* default */.Ay)().then(()=>{_this.$textarea.focus();_this.$textarea.setCursorPosition(_this.text.length);});}// ajax загрузка файлов
fileTextPlaceholder=`[${i18n/* default */.A.t('frontend.shiki_editor.file')} #@]`;_this.$textarea.shikiFile({progress:$node.find('.b-upload_progress'),input:shiki_editor_$('.editor-file input',$node),maxfiles:6}).on('upload:started',(e,fileNum)=>{var fileText=fileTextPlaceholder.replace('@',fileNum);_this.$textarea.insertAtCaret('',fileText);_this.$textarea.focus();}).on('upload:success',(e,data,fileNum)=>{var fileText=fileTextPlaceholder.replace('@',fileNum);if(_this.text.indexOf(fileText)===-1){_this.$textarea.insertAtCaret('',`[image=${data.id}]`);}else{var text=data.id?`[image=${data.id}]`:'';_this.$textarea.val(_this.text.replace(fileText,text));}_this.$textarea.focus();}).on('upload:failed',(e,response,fileNum)=>{var fileText=fileTextPlaceholder.replace('@',fileNum);if(_this.text.indexOf(fileText)!==-1){_this.$textarea.val(_this.text.replace(fileText,''));}_this.$textarea.focus();});(0,delay/* default */.Ay)().then(()=>_this.initialization.resolve());case 43:case"end":return _context2.stop();}},_callee2);}))();}get type(){return this.$textarea.data('item_type');}get text(){return this.$textarea.val();}// does nothing. added for compatibility with shiki-editor-v2
reprocessCache(){}_showPreview(previewHtml){this.$node.addClass('previewed');shiki_editor_$('.body .preview',this.$node).html(previewHtml).process();}_hidePreview(){this.$node.removeClass('previewed');if(!this.$('.editor-controls').is(':appeared')&&this.$node.is(':visible')){shiki_editor_$.scrollTo(this.$node);}}_onMarkOfftopic(){this._markOfftopic(this.$('.b-offtopic_marker').hasClass('off'));}_loadSmileys(){var $smileys=this.$('.smileys');$smileys.load($smileys.data('href'),()=>{this.$('.smileys img').on('click',({currentTarget})=>{var bbCode=shiki_editor_$(currentTarget).attr('alt');this.$textarea.insertAtCaret('',bbCode);this.$('.editor-smiley').trigger('click');});});}_onKeyPress(e){if(e.keyCode===27){// esc
preventEvent(e);this.$textarea.blur();}if(!e.metaKey&&!e.ctrlKey){return;}if(e.keyCode===10||e.keyCode===13){// ctrl+enter - save
preventEvent(e);this.$form.submit();}if(e.keyCode===66){// b - [b] tag
preventEvent(e);this.$('.editor-bold').click();}if(e.keyCode===73){// i - [i] tag
preventEvent(e);this.$('.editor-italic').click();}if(e.keyCode===85){// u - [u] tag
preventEvent(e);this.$('.editor-underline').click();}if(e.keyCode===83){//  - spoiler tag
preventEvent(e);this.$('.editor-spoiler').click();}if(e.keyCode===79){// o - code tag
preventEvent(e);this.$textarea.insertAtCaret('[code]','[/code]');}}_markOfftopic(isOfftopic){this.$form.find('input[name="comment[is_offtopic]"]').val(isOfftopic?'true':'false');this.$('.b-offtopic_marker').toggleClass('off',!isOfftopic);}focus(){this.$textarea.focus();}// очистка редактора
cleanup(){this._markOfftopic(false);this.$textarea.val('').trigger('update');}// ответ на комментарий
replyComment({id,type,userId,nickname,text,url},isOfftopic){var _this2=this;return shiki_editor_asyncToGenerator(/*#__PURE__*/shiki_editor_regeneratorRuntime().mark(function _callee3(){var reply,ids,_ids,type0,prefix;return shiki_editor_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(isOfftopic){_this2._markOfftopic(true);}if(url){ids=compact_default()([id,userId]);reply=`[${type}=${ids.join(';')}], `;}else{_ids=[id,userId,nickname];type0=type[0];prefix=userId?`=${type0}${_ids.join(';')}`:'';reply=`[quote${prefix}]${text}[/quote]\n`;}_this2.$textarea.val(`${_this2.text}\n${reply}`.replace(/^\n+/,'')).focus().trigger('update')// для elastic плагина
.setCursorPosition(_this2.text.length);_context3.next=5;return (0,delay/* default */.Ay)();case 5:if((0,shiki_utils.isMobile)()&&!_this2.$textarea.is(':appeared')){shiki_editor_$.scrollTo(_this2.$form,null,_this2.focus);}case 6:case"end":return _context3.stop();}},_callee3);}))();}// added for compatibility with shiki-editor
destroy(){}},(shiki_editor_applyDecoratedDescriptor(shiki_editor_class.prototype,"_hidePreview",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_class.prototype,"_hidePreview"),shiki_editor_class.prototype),shiki_editor_applyDecoratedDescriptor(shiki_editor_class.prototype,"_onMarkOfftopic",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_class.prototype,"_onMarkOfftopic"),shiki_editor_class.prototype),shiki_editor_applyDecoratedDescriptor(shiki_editor_class.prototype,"_loadSmileys",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_class.prototype,"_loadSmileys"),shiki_editor_class.prototype),shiki_editor_applyDecoratedDescriptor(shiki_editor_class.prototype,"_onKeyPress",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_class.prototype,"_onKeyPress"),shiki_editor_class.prototype),shiki_editor_applyDecoratedDescriptor(shiki_editor_class.prototype,"focus",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_class.prototype,"focus"),shiki_editor_class.prototype)),shiki_editor_class);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/csrf.js
var csrf = __webpack_require__(68164);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/shiki_editor_v2.js
/* provided dependency */ var shiki_editor_v2_$ = __webpack_require__(74692);
var shiki_editor_v2_class;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function shiki_editor_v2_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */shiki_editor_v2_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function shiki_editor_v2_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function shiki_editor_v2_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){shiki_editor_v2_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){shiki_editor_v2_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function shiki_editor_v2_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}/* global IS_LOCAL_SHIKI_PACKAGES */var VUE_PENDING_CLASS='vue-node';var VUE_INITIALIZED_CLASS='vue-node-initialized';var ShikiEditorV2=(shiki_editor_v2_class=class ShikiEditorV2 extends view/* default */.A{initialize(){var _this=this;return shiki_editor_v2_asyncToGenerator(/*#__PURE__*/shiki_editor_v2_regeneratorRuntime().mark(function _callee(){return shiki_editor_v2_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.initialization=(0,p_defer/* default */.A)();_this.cacheProcessed=(0,p_defer/* default */.A)();_this.processedInitialContent=null;_this.isPendingSubmit=false;_this.editorApp=null;_context.next=7;return _this._buildEditor();case 7:_this.initialization.resolve();_context.next=10;return _this._processCache();case 10:_this.cacheProcessed.resolve();case 11:case"end":return _context.stop();}},_callee);}))();}get $form(){return this.$node.closest('form');}get isSessionStorageAvailable(){return typeof sessionStorage!=='undefined';}get cacheKey(){var cacheKey=this.node.getAttribute('data-cache_key');var fieldName=this.node.getAttribute('data-field_name');if(!cacheKey){return null;}return fieldName?`${cacheKey}/${fieldName}`:cacheKey;}get editorContent(){return this.editorApp.exportContent();}// added for compatibility with shiki-editor-v1
// used in
//  combineDescription(
//    $('.shiki_editor-selector[data-field_name$="description_ru_text]"]', $form).view().text,
//    $('[name$="description_ru_source]"]', $form).val()
//  )
get text(){return this.editorContent;}_buildEditor(){var _this2=this;return shiki_editor_v2_asyncToGenerator(/*#__PURE__*/shiki_editor_v2_regeneratorRuntime().mark(function _callee2(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,createApp,h,ShikiEditorApp,ShikiUploader,ShikiRequest;return shiki_editor_v2_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.vueNode=_this2.node.querySelector(`.${VUE_PENDING_CLASS}`);_this2.input=_this2.node.querySelector('input');_this2.appPlaceholder=_this2.node.querySelector('.app-placeholder');if(!_this2.vueNode){_this2._rebuildNodes();}_context2.next=6;return Promise.all([Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756)),Promise.all(/* import() | shiki-editor */[__webpack_require__.e(8096), __webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(6479)]).then(__webpack_require__.bind(__webpack_require__, 62608)),Promise.all(/* import() */[__webpack_require__.e(4200), __webpack_require__.e(2233)]).then(__webpack_require__.bind(__webpack_require__, 81857)),Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 79308))]);case 6:_yield$Promise$all=_context2.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,4);_yield$Promise$all2$=_yield$Promise$all2[0];createApp=_yield$Promise$all2$.createApp;h=_yield$Promise$all2$.h;ShikiEditorApp=_yield$Promise$all2[1].ShikiEditorApp;ShikiUploader=_yield$Promise$all2[2].default;ShikiRequest=_yield$Promise$all2[3].ShikiRequest;_this2.app=_this2._buildApp({createApp,h},ShikiEditorApp,ShikiUploader,ShikiRequest);_this2.vueNode=_this2.app.$el;_this2._bindForm();_this2._scheduleDestroy();case 18:case"end":return _context2.stop();}},_callee2);}))();}_rebuildNodes(){var _this$node$querySelec;(_this$node$querySelec=this.node.querySelector(`.${VUE_INITIALIZED_CLASS}`))===null||_this$node$querySelec===void 0||_this$node$querySelec.remove();this.appPlaceholder.classList.remove('hidden');this.vueNode=document.createElement('div');this.vueNode.classList.add(VUE_PENDING_CLASS);this.node.insertBefore(this.vueNode,this.node.querySelector('footer'));}replyComment(reply,isOfftopic){if(!this.$node.is(':appeared')){shiki_editor_v2_$.scrollTo(this.$node,()=>this.replyComment(reply,isOfftopic));return;}if(reply.constructor===String){this.editorApp.appendText(reply);}else if(reply.html){this.editorApp.appendQuote(reply);}else if(this._isNoReply(reply)){this.editorApp.appendReply(reply);}else{this.editorApp.focus();}if(isOfftopic){this._markOfftopic(true);}}focus(){if(!shiki_editor_v2_$(this.editorApp.$el).is(':appeared')){shiki_editor_v2_$.scrollTo(this.editorApp.$el);}this.editorApp.focus();}cleanup(){var _this3=this;return shiki_editor_v2_asyncToGenerator(/*#__PURE__*/shiki_editor_v2_regeneratorRuntime().mark(function _callee3(){return shiki_editor_v2_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_this3._markOfftopic(false);_this3.editorApp.clearContent();case 2:case"end":return _context3.stop();}},_callee3);}))();}_initialContent(){return this.input.value;}// checks cached content and discards it when cached content == current content
reprocessCache(){var _this4=this;return shiki_editor_v2_asyncToGenerator(/*#__PURE__*/shiki_editor_v2_regeneratorRuntime().mark(function _callee4(){return shiki_editor_v2_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this4._processCache();case 2:if(!_context4.sent){_context4.next=4;break;}return _context4.abrupt("return");case 4:_this4.editorApp.discardUnsavedContent();_this4.processedInitialContent='';case 6:case"end":return _context4.stop();}},_callee4);}))();}_processCache(){var _this5=this;return shiki_editor_v2_asyncToGenerator(/*#__PURE__*/shiki_editor_v2_regeneratorRuntime().mark(function _callee5(){var cachedValue;return shiki_editor_v2_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(_this5.isSessionStorageAvailable){_context5.next=2;break;}return _context5.abrupt("return");case 2:_context5.next=4;return (0,delay/* default */.Ay)(10);case 4:_this5.processedInitialContent=_this5.editorContent;cachedValue=_this5._readCacheValue();if(!(cachedValue&&cachedValue!==_this5.processedInitialContent)){_context5.next=11;break;}_this5.editorApp.setUnsavedContent(cachedValue);return _context5.abrupt("return",true);case 11:return _context5.abrupt("return",false);case 12:case"end":return _context5.stop();}},_callee5);}))();}_buildShikiUploader(ShikiUploader){return new ShikiUploader({locale:window.LOCALE,xhrEndpoint:'/api/user_images?linked_type=Comment',xhrHeaders:()=>(0,csrf/* default */.A)().headers});}_buildApp({createApp,h},ShikiEditorApp,ShikiUploader,ShikiRequest){var shikiUploader=this._buildShikiUploader(ShikiUploader);var shikiRequest=new ShikiRequest(window.location.origin,axios/* default */.A);var localizationField=document.body.getAttribute('data-localized_names')==='en'?'name':'russian';var $form=this.$form,appPlaceholder=this.appPlaceholder;var app=createApp({components:{ShikiEditorApp},mounted(){appPlaceholder.classList.add('hidden');// if ($('.l-top_menu-v2').css('position') === 'sticky') {
//   this.$children[0].isMenuBarOffset = true;
// }
},beforeUnmount(){appPlaceholder.classList.remove('hidden');},render:()=>h(ShikiEditorApp,{shikiUploader,shikiRequest,globalSearch:window.globalSearch,content:this._initialContent(),localizationField,previewParams:this.$node.data('preview_params'),class:VUE_INITIALIZED_CLASS,onPreview({node,JS_EXPORTS}){shiki_editor_v2_$(node).process(JS_EXPORTS);},onSubmit(){$form.submit();},ref:el=>this.editorApp=el})});app.config.globalProperties.I18n=i18n/* default */.A;app.mount(this.vueNode);return app;}_bindForm(){this.$form.on('submit',this._formSubmit).on('ajax:before',this._formAjaxBefore).on('ajax:complete',this._formAjaxComplete).on('ajax:success',this._formAjaxSuccess);this.$('.b-offtopic_marker').on('click',this._onMarkOfftopic);}_scheduleDestroy(){shiki_editor_v2_$(document).one('turbolinks:before-cache',this.destroy);shiki_editor_v2_$(window).one('beforeunload',this.destroy);}_markOfftopic(isOfftopic){this.$form.find('input[name$="[is_offtopic]"]').val(isOfftopic?'true':'false');this.$('.b-offtopic_marker').toggleClass('off',!isOfftopic);}_readCacheValue(){return this.cacheKey&&this.isSessionStorageAvailable?window.sessionStorage.getItem(this.cacheKey)||'':'';}_writeCacheValue(value){var trimmedValue=value===null||value===void 0?void 0:value.trim();if(!trimmedValue){if(this.editorApp.unsavedContent){return;}return this._clearCacheValue();}if(this.cacheKey&&this.isSessionStorageAvailable){if(trimmedValue!==this.processedInitialContent){window.sessionStorage.setItem(this.cacheKey,trimmedValue);}}}_clearCacheValue(){if(this.cacheKey&&this.isSessionStorageAvailable){window.sessionStorage.removeItem(this.cacheKey);}}_isNoReply(reply){return!this.editorContent.endsWith(`[${reply.type}=${reply.id};${reply.userId}],`);}_formSubmit(){this.input.value=this.editorContent;this.isPendingSubmit=true;}_formAjaxBefore(){if(this.input.value.replace(/\n| |\r|\t/g,'')){this.$node.addClass('b-ajax');return true;}shiki_utils.flash.error(i18n/* default */.A.t('frontend.shiki_editor.text_cant_be_blank'));return false;}_formAjaxComplete(){this.$node.removeClass('b-ajax');}_formAjaxSuccess(){var _this6=this;return shiki_editor_v2_asyncToGenerator(/*#__PURE__*/shiki_editor_v2_regeneratorRuntime().mark(function _callee6(){return shiki_editor_v2_regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return (0,delay/* default */.Ay)();case 2:_this6.input.value='';_this6.editorApp.setContent('');_this6._clearCacheValue();if(shiki_editor_v2_$(_this6.editorApp.$el).is(':visible')){_this6.focus();}case 6:case"end":return _context6.stop();}},_callee6);}))();}_onMarkOfftopic(){this._markOfftopic(this.$('.b-offtopic_marker').hasClass('off'));}destroy(){shiki_editor_v2_$(document).off('turbolinks:before-cache',this.destroy);shiki_editor_v2_$(window).off('beforeunload',this.destroy);this.$form.off('submit',this._formSubmit);this.$form.off('ajax:before',this._formAjaxBefore);this.$form.off('ajax:complete',this._formAjaxComplete);this.$form.off('ajax:success',this._formAjaxSuccess);if(!this.app){return;}if(this.isPendingSubmit){this._clearCacheValue();}else{this._writeCacheValue(this.editorContent);}}},(shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"$form",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"$form"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"isSessionStorageAvailable",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"isSessionStorageAvailable"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"cacheKey",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"cacheKey"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"_formSubmit",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"_formSubmit"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"_formAjaxBefore",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"_formAjaxBefore"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"_formAjaxComplete",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"_formAjaxComplete"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"_formAjaxSuccess",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"_formAjaxSuccess"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"_onMarkOfftopic",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"_onMarkOfftopic"),shiki_editor_v2_class.prototype),shiki_editor_v2_applyDecoratedDescriptor(shiki_editor_v2_class.prototype,"destroy",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(shiki_editor_v2_class.prototype,"destroy"),shiki_editor_v2_class.prototype)),shiki_editor_v2_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/short_dialog.js
class ShortDialog extends Topic{initialize(){this._scheduleCheckHeight(false);this.on('appear',this._appear);// по клику на ответить помечаем сущность прочитанной
this.$('.item-reply').on('click',()=>{this.$('.b-new_marker.active').click();});}_deactivateInaccessibleButtons(){}get type(){return'dialog';}get commentType(){return'message';}get typeLabel(){return i18n/* default */.A.t('frontend.dynamic_elements.dialog.type_label');}get $checkHeightNode(){return this.$inner;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/spoiler_block.js
/* provided dependency */ var spoiler_block_$ = __webpack_require__(74692);
var spoiler_block_class;function spoiler_block_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */spoiler_block_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function spoiler_block_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function spoiler_block_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){spoiler_block_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){spoiler_block_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function spoiler_block_slicedToArray(arr,i){return spoiler_block_arrayWithHoles(arr)||spoiler_block_iterableToArrayLimit(arr,i)||spoiler_block_unsupportedIterableToArray(arr,i)||spoiler_block_nonIterableRest();}function spoiler_block_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function spoiler_block_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return spoiler_block_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return spoiler_block_arrayLikeToArray(o,minLen);}function spoiler_block_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function spoiler_block_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function spoiler_block_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function spoiler_block_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var SpoilerBlock=(spoiler_block_class=class SpoilerBlock extends view/* default */.A{initialize(){var _this$node$children=spoiler_block_slicedToArray(this.node.children,2);this.button=_this$node$children[0];this.content=_this$node$children[1];this.button.addEventListener('click',this._toggle);this.node.addEventListener('keypress',this._keypress);this.node.addEventListener('keydown',this._keydown);}_toggle(e){var _this=this;return spoiler_block_asyncToGenerator(/*#__PURE__*/spoiler_block_regeneratorRuntime().mark(function _callee(){var wasOpened;return spoiler_block_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// prevent form submition
e.preventDefault();// prevent outers spoilers from trigger
e.stopImmediatePropagation();// remove :focus on mouse click (event has x=0,y=0 when pressed space on focused node)
if(e.x||e.y){_this.button.blur();}wasOpened=_this.node.classList.contains('is-opened');if(!wasOpened){_context.next=11;break;}_this.node.classList.add('is-closing');_context.next=8;return (0,animated/* animatedCollapse */.F)(_this.content);case 8:requestAnimationFrame(()=>{_this.node.classList.remove('is-opened');_this.node.classList.remove('is-closing');});_context.next=15;break;case 11:_this.node.classList.add('is-opened');_context.next=14;return (0,animated/* animatedExpand */.O)(_this.content);case 14:spoiler_block_$(_this.content).process_hidden_content();case 15:case"end":return _context.stop();}},_callee);}))();}_keypress(e){switch(e.keyCode){case 32:// space
case 13:// enter
this._toggle(e);}}_keydown(e){switch(e.keyCode){case 27:// esc
e.preventDefault();e.stopImmediatePropagation();this.button.blur();}}},(spoiler_block_applyDecoratedDescriptor(spoiler_block_class.prototype,"_toggle",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(spoiler_block_class.prototype,"_toggle"),spoiler_block_class.prototype),spoiler_block_applyDecoratedDescriptor(spoiler_block_class.prototype,"_keypress",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(spoiler_block_class.prototype,"_keypress"),spoiler_block_class.prototype),spoiler_block_applyDecoratedDescriptor(spoiler_block_class.prototype,"_keydown",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(spoiler_block_class.prototype,"_keydown"),spoiler_block_class.prototype)),spoiler_block_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/spoiler_inline.js
var spoiler_inline_class;function spoiler_inline_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */spoiler_inline_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function spoiler_inline_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function spoiler_inline_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){spoiler_inline_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){spoiler_inline_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function spoiler_inline_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var SpoilerInline=(spoiler_inline_class=class SpoilerInline extends view/* default */.A{initialize(){this.node.addEventListener('click',this._toggle);this.node.addEventListener('keypress',this._keypress);this.node.addEventListener('keydown',this._keydown);}_toggle(e){var _this=this;return spoiler_inline_asyncToGenerator(/*#__PURE__*/spoiler_inline_regeneratorRuntime().mark(function _callee(){return spoiler_inline_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!((e.x||e.y)&&(e.target.tagName==='A'||e.target.parentNode.tagName==='A'||e.target.parentNode.parentNode.tagName==='A'||e.target.parentNode.parentNode.parentNode.tagName==='A'))){_context.next=2;break;}return _context.abrupt("return");case 2:if(!(_this.isOpened&&getSelectionText()&&isGetSelectionTextSupported())){_context.next=6;break;}if(!e.currentTarget.contains(window.getSelection().focusNode)){_context.next=6;break;}e.currentTarget.blur();return _context.abrupt("return");case 6:// prevent form submition
e.preventDefault();e.stopImmediatePropagation();// remove :focus on mouse click (event has x=0,y=0 when pressed space on focused node)
if(e.x||e.y){_this.node.blur();}_this.node.classList.toggle('is-opened');case 10:case"end":return _context.stop();}},_callee);}))();}get isOpened(){return this.node.classList.contains('is-opened');}_keypress(e){switch(e.keyCode){case 32:// space
case 13:// enter
this._toggle(e);}}_keydown(e){switch(e.keyCode){case 27:// esc
e.preventDefault();e.stopImmediatePropagation();this.node.blur();}}},(spoiler_inline_applyDecoratedDescriptor(spoiler_inline_class.prototype,"_toggle",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(spoiler_inline_class.prototype,"_toggle"),spoiler_inline_class.prototype),spoiler_inline_applyDecoratedDescriptor(spoiler_inline_class.prototype,"_keypress",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(spoiler_inline_class.prototype,"_keypress"),spoiler_inline_class.prototype),spoiler_inline_applyDecoratedDescriptor(spoiler_inline_class.prototype,"_keydown",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(spoiler_inline_class.prototype,"_keydown"),spoiler_inline_class.prototype)),spoiler_inline_class);
// EXTERNAL MODULE: ./node_modules/lodash/first.js
var first = __webpack_require__(56170);
var first_default = /*#__PURE__*/__webpack_require__.n(first);
// EXTERNAL MODULE: ./node_modules/lodash/round.js
var round = __webpack_require__(36944);
var round_default = /*#__PURE__*/__webpack_require__.n(round);
// EXTERNAL MODULE: ./app/packs/javascripts/views/wall/view.js + 2 modules
var wall_view = __webpack_require__(68473);
// EXTERNAL MODULE: ./app/packs/javascripts/views/wall/cluster.js
var cluster = __webpack_require__(22494);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/swiper.js
/* provided dependency */ var swiper_$ = __webpack_require__(74692);
var swiper_class;function swiper_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */swiper_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function swiper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function swiper_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){swiper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){swiper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function swiper_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var GLOBAL_SELECTOR='b-shiki_swiper';var DATA_KEY='swiper';var GLOBAL_HANDLER=false;var COVER_RATIO=16.0/9;function setHanler(){GLOBAL_HANDLER=true;swiper_$(document).on('resize:debounced orientationchange',update);}function update(){swiper_$(`.${GLOBAL_SELECTOR}`).each((_index,node)=>{var _$$data;return(_$$data=swiper_$(node).data(DATA_KEY))===null||_$$data===void 0?void 0:_$$data.update();});}var Swiper=(swiper_class=class Swiper extends view/* default */.A{constructor(...args){super(...args);this.isPlaceholder=false;this.areaWidth=null;this.areaHeight=null;this.wall=null;this.swiper=null;}initialize(isGlobalUpdate=true){var _this=this;return swiper_asyncToGenerator(/*#__PURE__*/swiper_regeneratorRuntime().mark(function _callee(){var hasFailed;return swiper_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!GLOBAL_HANDLER){setHanler();}_this.$node.data(DATA_KEY,_this);_this.isGlobalUpdate=isGlobalUpdate;_this._computeSizes();_this.root.classList.add('is-loading');_context.next=7;return _this._loadImages();case 7:hasFailed=_context.sent;_this.root.classList.remove('is-loading');if(hasFailed&&_this.$images.length===1||!_this.$images.length){_this.isPlaceholder=true;}_this._initializeContent();_this.update();// await delay(500); // don't why I added it
// this.update();
case 12:case"end":return _context.stop();}},_callee);}))();}get width(){return Math.floor(this.$root.width());}get isEagerCropping(){return this.$images.length===1&&this.isAlignCover;}get isAlignCover(){return this.align==='cover';}get align(){return this.$root.data('swiper-align')||'contain';}get desiredHeight(){return this.$root.data('swiper-height')||0;}get isVideo(){return this.$root.children('.b-video').length;}get isVideoShrinked(){return this.isVideo&&this.$root.children('.b-video.shrinked').length;}get $links(){return this.$root.children();}get $images(){return this.$links.find('img');}update(isForced){if(!isForced&&!this.isGlobalUpdate){return;}if(this.swiper||this.wall){this.destroy();}this._computeSizes();this._initializeContent();}destroy(){if(this.wall){this.wall.destroy();this.wall=null;}else{this.$images.each((_index,node)=>swiper_$(node).removeAttr('style'));this.$node.removeAttr('style');}if(this.swiper){this.swiper.destroy();this.swiper=null;this.$links.unwrap();}}_initializeContent(){if(this.isPlaceholder){this.root.classList.add('is-placeholder');}else if(this.isEagerCropping){this._initializeEagerCroppedImage();}else{this._initializeWallOrSwiper();}}_initializeEagerCroppedImage(){var image=this.$images[0];var imageWidth=image.naturalWidth;var imageHeight=!this.isAlignCover&&this.isVideoShrinked?image.naturalHeight*0.744047619:image.naturalHeight;var imageRatio=imageWidth/imageHeight;var areaRatio=this.areaWidth/this.areaHeight;var isVertical=imageRatio<areaRatio;var isHorizontal=imageRatio>areaRatio;if(isVertical){if(this.isAlignCover){this._alignVertical(imageRatio);}else{this.$images.css('height',this.areaHeight);}}if(isHorizontal){if(this.isAlignCover){this._alignHorizontal(imageRatio);}else{this.$images.css('width',this.areaWidth);}}if(this.isVideo){this.$links.shikiVideo();}else{this.$links.shikiImage();}}_initializeWallOrSwiper(){if(this.wall){this.wall.destroy();this.wall=null;}if(this.swiper){this.swiper.destroy();this.swiper=null;}this.wall=this._buildWall();if(!this.wall.images.length){this._setPlaceholder();}else if(this.width<this.areaWidth&&this.isAlignCover){this._scaleWall(this.wall,this.areaWidth);}else if(this.wall.images.length>1){this._buildSwiper();}}_buildWall(){var maxHeight=null;if(this.isVideo){var image=this.$images[0];var imageWidth=image.naturalWidth;var imageHeight=image.naturalHeight;var imageRatio=imageWidth/imageHeight;if(imageWidth>this.areaWidth){maxHeight=this.areaWidth/imageRatio*(this.isVideoShrinked?0.744047619:1);}}return new wall_view/* default */.A(this.$root,{isOneCluster:true,maxWidth:9999,maxHeight:maxHeight||9999,awaitImagesLoaded:false});}_setPlaceholder(width,height){this.$root.css({width,height}).addClass('is-placeholder');}_scaleWall(wall,width){var firstImage=first_default()(wall.images);if(wall.images.length===1&&firstImage.ratio>COVER_RATIO){return;}var newWall=new wall_view/* default */.A(this.$root,{isOneCluster:true,maxWidth:width,maxHeight:9999,awaitImagesLoaded:false});newWall.images.forEach((image,index)=>{if(index>0){image.$root.css({left:'','margin-left':cluster/* default */.A.MARGIN});}});}_buildSwiper(){var _this2=this;return swiper_asyncToGenerator(/*#__PURE__*/swiper_regeneratorRuntime().mark(function _callee2(){var _yield$import,_Swiper;return swiper_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this2.$root.children().addClass('swiper-slide').removeAttr('style').wrapAll('<div class="swiper-wrapper" />');_context2.next=3;return __webpack_require__.e(/* import() | swiper */ 545).then(__webpack_require__.bind(__webpack_require__, 7913));case 3:_yield$import=_context2.sent;_Swiper=_yield$import.default;_this2.swiper=new _Swiper(_this2.root,{slidesPerView:'auto',spaceBetween:cluster/* default */.A.MARGIN,a11y:false});case 6:case"end":return _context2.stop();}},_callee2);}))();}_alignVertical(imageRatio){var scaledImageHeight=this.areaWidth/imageRatio;var scaleRatio=this.areaHeight/scaledImageHeight;var visiblePercent=scaleRatio*100;var marginTopPercent=Math.min(10,round_default()((100-visiblePercent)/2/scaleRatio,2));if(!this.isVideo){this.$links.css('margin-top',marginTopPercent>0?`-${marginTopPercent}%`:'');}this.$images.css('width',this.areaWidth);}_alignHorizontal(imageRatio){var scaledImageWidth=this.areaHeight*imageRatio;var scaleRatio=this.areaWidth/scaledImageWidth;var visiblePercent=scaleRatio*100;var marginLeftPercent=round_default()((100-visiblePercent)/2/scaleRatio,2);if(!this.isVideo){this.$links.css('margin-left',marginLeftPercent>0?`-${marginLeftPercent}%`:'');}this.$images.css('height',this.areaHeight);}_computeSizes(){var width=this.width;var height;if(this.desiredHeight!==0){height=this.desiredHeight;}else if(this.isEagerCropping){height=Math.floor(width/COVER_RATIO);}this.areaWidth=width;if(height){this.areaHeight=height;this.$root.css('max-height',this.areaHeight);}}_loadImages(){var _this3=this;return swiper_asyncToGenerator(/*#__PURE__*/swiper_regeneratorRuntime().mark(function _callee3(){var hasFailed;return swiper_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:hasFailed=false;// await loadImages(this.root).catch(() => hasFailed = true);
_context3.next=3;return (0,load_image/* loadImages */.z6)(_this3.root).catch((a,b,c)=>{hasFailed=true;});case 3:if(!_this3.$('.dynamically-replaced').length){_context3.next=6;break;}_context3.next=6;return (0,load_image/* loadImages */.z6)(_this3.root).catch(()=>hasFailed=true);case 6:return _context3.abrupt("return",hasFailed);case 7:case"end":return _context3.stop();}},_callee3);}))();}},(swiper_applyDecoratedDescriptor(swiper_class.prototype,"isEagerCropping",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"isEagerCropping"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"isAlignCover",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"isAlignCover"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"align",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"align"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"desiredHeight",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"desiredHeight"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"isVideo",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"isVideo"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"isVideoShrinked",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"isVideoShrinked"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"$links",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"$links"),swiper_class.prototype),swiper_applyDecoratedDescriptor(swiper_class.prototype,"$images",[shiki_decorators/* memoize */.Bj],Object.getOwnPropertyDescriptor(swiper_class.prototype,"$images"),swiper_class.prototype)),swiper_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/switcher.js
/* provided dependency */ var switcher_$ = __webpack_require__(74692);
class Switcher extends view/* default */.A{initialize(){var switcher=this.$root.data('switcher');this.on('click',()=>{switcher_$(`.active[data-switcher="${switcher}"]`).removeClass('active');this.$root.addClass('active');});}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/tabs.js
/* provided dependency */ var tabs_$ = __webpack_require__(74692);
class Tabs extends view/* default */.A{initialize(){this.$tabs=this.$('[data-tab]');this.$tabSwitches=this.$('[data-tab-switch]');this.$tabSwitches.on('click',({currentTarget})=>this._switchTab(currentTarget));}_switchTab(currentTarget){var tabIndex=this.$tabSwitches.toArray().indexOf(currentTarget);var $tab=tabs_$(this.$tabs[tabIndex]);this.$tabSwitches.removeClass('active');currentTarget.classList.add('active');this.$tabs.addClass('hidden');$tab.removeClass('hidden');$tab.process_hidden_content();}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/text_annotated.js
/* provided dependency */ var text_annotated_$ = __webpack_require__(74692);
class TextAnnotated extends view/* default */.A{initialize(){this.$node.data('texts').forEach(text=>this.addText(text));}addText(text){var groupSelector=text.group_index==null?'':`.cc-collection-groups[data-index=${text.group_index}]`;this.$(`
      ${groupSelector}
      .b-catalog_entry.c-${text.linked_type}#${text.linked_id}
      .image-decor
    `).each((_index,node)=>text_annotated_$(node).append(`<div class='text'>${text.text}</div>`).children('.text').process());}}
// EXTERNAL MODULE: ./app/packs/javascripts/services/user_rates/tracker.js + 4 modules
var tracker = __webpack_require__(9868);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/jst.js
var jst = __webpack_require__(60957);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/user_rates/button.js
/* provided dependency */ var button_$ = __webpack_require__(74692);
var button_class;function button_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */button_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function button_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function button_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var TEMPLATE='user_rates/button';var button_I18N_KEY='activerecord.attributes.user_rate.statuses';var UserRateButton=(button_class=class UserRateButton extends view/* default */.A{initialize(){// data attribute is set in UserRatesTracker
this.model=this.$root.data('model');this._render();// delegated handlers because @_render can be called multiple times
this.on('click','.trigger-arrow',this._toggleList);this.on('click','.edit-trigger',this._toggleList);this.on('click','.add-trigger',this._submitStatus);this.on('ajax:before',this._ajaxBefore);this.on('ajax:error',this._ajaxComplete);this.on('ajax:success',this._ajaxSuccess);}get isPersisted(){return!!this.model.id;}// handlers
_toggleList(){var _this=this;return button_asyncToGenerator(/*#__PURE__*/button_regeneratorRuntime().mark(function _callee(){var height;return button_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.$('.b-add_to_list').toggleClass('expanded');if(!_this.$('.expanded-options').data('height')){_this.$('.expanded-options').data('height',_this.$('.expanded-options').height()).css('height',0).show();}_context.next=4;return (0,delay/* default */.Ay)();case 4:height=_this.$('.b-add_to_list').hasClass('expanded')?_this.$('.expanded-options').data('height'):0;_this.$('.expanded-options').css('height',height);case 6:case"end":return _context.stop();}},_callee);}))();}_submitStatus(e){var $form=button_$(e.target).closest('form');$form.find('input[name="user_rate[status]"]').val(button_$(e.currentTarget).data('status'));$form.submit();}_ajaxBefore(){if(!window.SHIKI_USER.isSignedIn){shiki_utils.flash.info(i18n/* default */.A.t(`${authorized_action_I18N_KEY}.register_to_complete_action`),{escapeMarkup:false});return false;}this.$root.addClass('b-ajax');}_ajaxComplete(){this.$root.removeClass('b-ajax');}_ajaxSuccess(e,model){tracker/* default */.A.update(model||this._newUserRate());this._ajaxComplete();}// functions
update(model){this.model=model;this._render();}_render(){this.html(jst/* default */.A[TEMPLATE](this._renderParams())).process();}_renderParams(){var submitUrl=this.isPersisted?`/api/v2/user_rates/${this.model.id}`:'/api/v2/user_rates';return{model:this.model,user_id:window.SHIKI_USER.id,statuses:i18n/* default */.A.t(`${button_I18N_KEY}.${this.model.target_type.toLowerCase()}`),form_url:submitUrl,form_method:this.isPersisted?'PATCH':'POST',destroy_url:this.isPersisted?`/api/v2/user_rates/${this.model.id}`:undefined,extended_html:this._extendedHtml()};}_newUserRate(){return{status:'planned',target_id:this.model.target_id,target_type:this.model.target_type};}// must be redefined in inherited class
_extendedHtml(){}},(button_applyDecoratedDescriptor(button_class.prototype,"_toggleList",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(button_class.prototype,"_toggleList"),button_class.prototype),button_applyDecoratedDescriptor(button_class.prototype,"_submitStatus",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(button_class.prototype,"_submitStatus"),button_class.prototype),button_applyDecoratedDescriptor(button_class.prototype,"_ajaxBefore",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(button_class.prototype,"_ajaxBefore"),button_class.prototype),button_applyDecoratedDescriptor(button_class.prototype,"_ajaxComplete",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(button_class.prototype,"_ajaxComplete"),button_class.prototype),button_applyDecoratedDescriptor(button_class.prototype,"_ajaxSuccess",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(button_class.prototype,"_ajaxSuccess"),button_class.prototype)),button_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/user_rates/extended.js
var extended_class;function extended_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */extended_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function extended_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function extended_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){extended_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){extended_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function extended_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var EXTENDED_TEMPLATE='user_rates/extended';var SCORE_TEMPLATE='user_rates/score';var UserRateExtended=(extended_class=class UserRateExtended extends UserRateButton{constructor(...args){super(...args);this.formHtml=null;}initialize(){this.entry=this.$root.data('entry');this.on('click','.cancel',this._hideForm);this.on('ajax:success','.remove',this._hideForm);this.on('ajax:success','.rate-edit',this._hideForm);this.on('rate:change',this._changeScore);super.initialize();}// handlers
_toggleList({currentTarget}){if(this.isPersisted&&currentTarget.classList.contains('edit-trigger')){if(this.formHtml){this._hideForm();}else{this._fetchForm();}}else{super._toggleList();}}_fetchForm(){var _this=this;return extended_asyncToGenerator(/*#__PURE__*/extended_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return extended_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this._ajaxBefore();_context.next=3;return axios/* default */.A.get(`/user_rates/${_this.model.id}/edit`);case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;_this._ajaxComplete();_this._showForm(data);case 7:case"end":return _context.stop();}},_callee);}))();}_showForm(html){this.formHtml=html;this._render();this.$('.remove.bottom').addClass('hidden');this.$('.delete-button.top').removeClass('hidden');}_hideForm(){this.formHtml=null;this._render();}_changeScore(e,score){this.$('input[name="user_rate[score]"]').val(score);this.$('form').submit();}// functions
_extendedHtml(){if(this.isPersisted){return this.formHtml||this._renderExtended();}}_renderExtended(){return jst/* default */.A[EXTENDED_TEMPLATE]({entry:this.entry,model:this.model,increment_url:this._incrementUrl(),rate_html:jst/* default */.A[SCORE_TEMPLATE]({score:this.model.score})});}_render(){super._render();this.$('.b-rate').rateable();}_incrementUrl(){if(this.isPersisted){var suffix;if(this.model.volumes!==0){suffix='?volumes';}return`/api/v2/user_rates/${this.model.id}/increment${suffix||''}`;}}},(extended_applyDecoratedDescriptor(extended_class.prototype,"_toggleList",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(extended_class.prototype,"_toggleList"),extended_class.prototype),extended_applyDecoratedDescriptor(extended_class.prototype,"_fetchForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(extended_class.prototype,"_fetchForm"),extended_class.prototype),extended_applyDecoratedDescriptor(extended_class.prototype,"_showForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(extended_class.prototype,"_showForm"),extended_class.prototype),extended_applyDecoratedDescriptor(extended_class.prototype,"_hideForm",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(extended_class.prototype,"_hideForm"),extended_class.prototype),extended_applyDecoratedDescriptor(extended_class.prototype,"_changeScore",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(extended_class.prototype,"_changeScore"),extended_class.prototype)),extended_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/wall_or_swiper.js
/* provided dependency */ var wall_or_swiper_$ = __webpack_require__(74692);
var wall_or_swiper_GLOBAL_HANDLER=false;var wall_or_swiper_GLOBAL_SELECTOR='b-shiki_swiper,.b-shiki_wall';var wall_or_swiper_DATA_KEY='wall_or_swiper';function wall_or_swiper_setHanler(){wall_or_swiper_GLOBAL_HANDLER=true;wall_or_swiper_$(document).on('resize:debounced orientationchange',wall_or_swiper_update);}function wall_or_swiper_update(){wall_or_swiper_$(`.${wall_or_swiper_GLOBAL_SELECTOR}`).each((_index,node)=>{var _$$data;return(_$$data=wall_or_swiper_$(node).data(wall_or_swiper_DATA_KEY))===null||_$$data===void 0?void 0:_$$data.update();});}class WallOrSwiper extends view/* default */.A{initialize(){if(!wall_or_swiper_GLOBAL_HANDLER){wall_or_swiper_setHanler();}this.$node.data(wall_or_swiper_DATA_KEY,this);this.update();}get isPhone(){return (0,shiki_utils.isPhone)();}update(){if(this.isPhone&&!this.$node.data('wall_always')){this._updatePhone();}else{this._updateDesktop();}}_updatePhone(){if(this.wall){this.wall.destroy();this.wall=null;}if(this.swiper){this.swiper.update(true);}else{this._buildSwiper();}}_updateDesktop(){if(this.swiper){this.swiper.destroy();this.swiper=null;}if(this.wall){this.wall.update();}else{this._buildWall();}}_buildSwiper(){this.node.classList.remove('b-shiki_wall');this.node.classList.add('b-shiki_swiper');this.swiper=new Swiper(this.node,false);}_buildWall(){this.node.classList.add('b-shiki_wall');this.node.classList.remove('b-shiki_swiper');this.wall=new wall_view/* default */.A(this.node);}}
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/week_registered_action.js
var week_registered_action_class;function week_registered_action_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var week_registered_action_I18N_KEY='frontend.dynamic_elements.week_registered_action';var WeekRegisteredAction=(week_registered_action_class=class WeekRegisteredAction extends view/* default */.A{initialize(){this.$node.on('click',this.onClick);}onClick(e){if(!window.SHIKI_USER.isSignedIn){shiki_utils.flash.info(i18n/* default */.A.t(`${authorized_action_I18N_KEY}.register_to_complete_action`),{escapeMarkup:false});e.stopImmediatePropagation();e.preventDefault();}else if(!window.SHIKI_USER.isWeekRegistered){shiki_utils.flash.info(i18n/* default */.A.t(`${week_registered_action_I18N_KEY}.action_will_be_available`),{escapeMarkup:false});e.stopImmediatePropagation();e.preventDefault();}}},(week_registered_action_applyDecoratedDescriptor(week_registered_action_class.prototype,"onClick",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(week_registered_action_class.prototype,"onClick"),week_registered_action_class.prototype)),week_registered_action_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/dynamic_elements/_parser.js
function _parser_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_parser_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function _parser_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _parser_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){_parser_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){_parser_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}class DynamicParser{constructor($nodes){$nodes.each((index,node)=>{// DynamicParser can be called recursively
// For example at dynamic_elements/topic `this.editor = this.$editor.process().view();`
if(!node.classList.contains(DynamicParser.PENDING_CLASS)){return;}node.classList.remove(DynamicParser.PENDING_CLASS);node.attributes['data-dynamic'].value.split(',').forEach(type=>{var processor=camelCase_default()(type);if(this[processor]){this[processor](node);}else{console.error(`unexpected processor: ${processor}`,node);// eslint-disable-line no-console
}});});}alignedPosters(node){return _parser_asyncToGenerator(/*#__PURE__*/_parser_regeneratorRuntime().mark(function _callee(){var _yield$import,AlignedPosters;return _parser_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | aligned_posters */ 7022).then(__webpack_require__.bind(__webpack_require__, 59117));case 2:_yield$import=_context.sent;AlignedPosters=_yield$import.AlignedPosters;new AlignedPosters(node);case 5:case"end":return _context.stop();}},_callee);}))();}authorized(node){new AuthorizedAction(node);}clickloaded(node){new Clickloaded(node);}cuttedCovers(node){return _parser_asyncToGenerator(/*#__PURE__*/_parser_regeneratorRuntime().mark(function _callee2(){var _yield$import2,CuttedCovers;return _parser_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __webpack_require__.e(/* import() | cutted_covers */ 3999).then(__webpack_require__.bind(__webpack_require__, 98822));case 2:_yield$import2=_context2.sent;CuttedCovers=_yield$import2.CuttedCovers;new CuttedCovers(node);case 5:case"end":return _context2.stop();}},_callee2);}))();}codeHighlight(node){new code_highlight/* default */.A(node);}comment(node){new Comment(node);}dayRegistered(node){new DayRegisteredAction(node);}desktopAd(node){new DesktopAd(node);}forum(node){new Forum(node);}fullDialog(node){new FullDialog(node);}html5Video(node){new Html5Video(node);}logEntry(node){new LogEntry(node);}message(node){new Message(node);}notImplementedYetAction(node){new NotImplementedYetAction(node);}postloaded(node){new Postloaded(node);}shortDialog(node){new ShortDialog(node);}shikiEditor(node){new ShikiEditor(node);}shikiEditorV2(node){new ShikiEditorV2(node);}swiper(node){new Swiper(node);}switcher(node){new Switcher(node);}spoilerBlock(node){new SpoilerBlock(node);}spoilerInline(node){new SpoilerInline(node);}review(node){new Review(node);}critique(node){new Critique(node);}tabs(node){new Tabs(node);}textAnnotated(node){new TextAnnotated(node);}topic(node){new Topic(node);}userRate(node){if(node.attributes['data-extended'].value==='true'){new UserRateExtended(node);}else{new UserRateButton(node);}}wall(node){new WallOrSwiper(node);}weekRegistered(node){new WeekRegisteredAction(node);}}DynamicParser.PENDING_CLASS='to-process';

/***/ }),

/***/ 89312:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ CodeHighlight)
/* harmony export */ });
/* harmony import */ var _views_application_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(27349);
/* harmony import */ var shiki_editor_src_utils_lowlight_shiki_markdown__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10018);
/* harmony import */ var json_fn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84834);
/* harmony import */ var json_fn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(json_fn__WEBPACK_IMPORTED_MODULE_1__);
/* global importScripts */var NO_HIGHLIGHT='nohighlight';var shikiMarkdownJSONfn=null;class CodeHighlight extends _views_application_view__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A{initialize(){this.klass=CodeHighlight;this.klass.hljsInitialize();this.highlight();}highlight(){var _this$root$attributes;var node=this.root.childNodes[0];var language=(_this$root$attributes=this.root.attributes['data-language'])===null||_this$root$attributes===void 0?void 0:_this$root$attributes.value;if(node.classList.contains(NO_HIGHLIGHT)||!language||!('Blob'in window)||!('Worker'in window)){return;}node.id=`code_${this.klass.lastId}`;this.klass.lastId+=1;shikiMarkdownJSONfn||(shikiMarkdownJSONfn=json_fn__WEBPACK_IMPORTED_MODULE_1___default().stringify(shiki_editor_src_utils_lowlight_shiki_markdown__WEBPACK_IMPORTED_MODULE_2__["default"]));this.klass.worker.postMessage({node_id:node.id,code:node.textContent,language,shikiMarkdownJSONfn});}// hljs usage example https://highlightjs.org/usage/
static hljsInitialize(){if(this.hljsInitialized){return;}this.hljsInitialized=true;this.lastId=0;this.worker=this.buildWorker(function(){importScripts('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js'// requested them to add json-fn https://github.com/cdnjs/packages/issues/1380
// 'https://cdnjs.cloudflare.com/ajax/libs/json-fn/1.1.1/jsonfn.js'
);// https://raw.githubusercontent.com/vkiryukhin/jsonfn/master/jsonfn.js
var parseJSONfn=function parseJSONfn(str,date2obj){var iso8061=date2obj?/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/:false;return JSON.parse(str,function(key,value){var prefix;if(typeof value!=='string'){return value;}if(value.length<8){return value;}prefix=value.substring(0,8);if(iso8061&&value.match(iso8061)){return new Date(value);}if(prefix==='function'){return eval('('+value+')');}if(prefix==='_PxEgEr_'){return eval(value.slice(8));}if(prefix==='_NuFrRa_'){return eval(value.slice(8));}return value;});};this.onmessage=function(event){if(!self.hljs.listLanguages().includes(event.data.language)){return;}if(!self.hljs.listLanguages().includes('shiki')){self.hljs.registerLanguage('shiki',parseJSONfn(event.data.shikiMarkdownJSONfn));}var result=self.hljs.highlight(event.data.language,event.data.code,true);postMessage({html:result.value,node_id:event.data.node_id});};});this.worker.onmessage=event=>{var node=document.getElementById(event.data.node_id);if(node){node.innerHTML=event.data.html;}};}static buildWorker(func){var code=func.toString();code=code.substring(code.indexOf('{')+1,code.lastIndexOf('}'));var blob=new Blob([code],{type:'application/javascript'});return new Worker(URL.createObjectURL(blob));}}

/***/ }),

/***/ 71786:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_compact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83673);
/* harmony import */ var lodash_compact__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_compact__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_maxBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97551);
/* harmony import */ var lodash_maxBy__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_maxBy__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_mean__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(55083);
/* harmony import */ var lodash_mean__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_mean__WEBPACK_IMPORTED_MODULE_2__);
/* provided dependency */ var $ = __webpack_require__(74692);
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}// TODO: refactor to view object
$.fn.extend({bar(options){return this.each(function(){var $chart=$(this);switch($chart.data('bar')){case'horizontal':simpleBar($chart,_objectSpread(_objectSpread({},options),{},{type:'horizontal'}));break;case'vertical':simpleBar($chart,_objectSpread(_objectSpread({},options),{},{type:'vertical'}));break;// when 'vertical-complex'
// complex_bar $chart, { ...options, type: 'vertical' }
default:throw'unknown bar-type: '+$chart.data('bar');// eslint-disable-line no-throw-literal
}});}});// горизонтальный график
function simpleBar($chart,options){var _maxBy;var originalMaximum;var percent;$chart.addClass(`bar simple ${options.type}`);var field=options.field||'value';var stats=$chart.data('stats');if(stats&&options.map){stats=stats.map(entry=>options.map(entry));}if(!stats||!stats.length){if(options.noData){options.noData($chart);}return;}var intervalsCount=$chart.data('intervals_count');var maximum=(_maxBy=lodash_maxBy__WEBPACK_IMPORTED_MODULE_1___default()(stats,v=>v[field]))===null||_maxBy===void 0?void 0:_maxBy[field];var flattened=false;if($chart.data('flattened')){var values=stats.map((v,_k)=>v[field]).filter(v=>v>0&&v!==maximum);var average=lodash_mean__WEBPACK_IMPORTED_MODULE_2___default()(values);if(maximum>average*5&&average>0){originalMaximum=maximum;maximum=average*3;flattened=true;}}// колбек перед началом создания графика
if(options.before){options.before(stats,options,$chart);}if(options.y_axis){var html=[];var i=-1;while(i<10){percent=i!==-1?100-i*10:0;html.push(`<div class='y_label' style='top: ${100-percent}%;'>`+options.y_axis(percent,maximum,originalMaximum)+'</div>');i+=1;}$chart.append(html.join(''));}if(options.filter){stats=stats.filter(entry=>{percent=parseInt(entry[field]/maximum*100*100)*0.01;return options.filter(entry,percent);});}stats.forEach((entry,index)=>{percent=parseInt(entry[field]/maximum*100*100)*0.01;if(flattened){percent*=0.9;// до 90% обычная шкала,
// а затем в зависимости от приближения к максимальному значению
if(percent>100){percent=90+entry[field]*10.0/originalMaximum;}}var color=colorByPercent(percent);var dimension=options.type==='vertical'?'height':'width';var xAxis=options.xAxis?options.xAxis(entry,index,stats,options):entry.name;var trimmedValue=String(entry[field]).replace(/\.0+$/,'');var title=options.title?options.title(entry,percent):trimmedValue;var valueText=percent>25||percent>17&&entry[field]<1000||percent>10&&entry[field]<100||percent>5&&entry[field]<10?trimmedValue:'';var cssStyles=options.type==='vertical'?` style="width: ${100.0/intervalsCount}%;"`:'';var cssClasses=lodash_compact__WEBPACK_IMPORTED_MODULE_0___default()(['value',percent<10?'narrow':null,entry[field]>99?'mini':null]);$chart.append(`<div class="line"${cssStyles}>`+`<div class="x_label">${xAxis}</div>`+'<div class="bar-container">'+`<div class="bar ${color}${percent>0?' min':''}"`+` style="${dimension}: ${percent}%" title="${title}">`+`<div class="${cssClasses.join(' ')}">${valueText}</div>`+'</div>'+'</div>'+'</div>');});}function colorByPercent(percent){if(percent<=80&&percent>60){return's1';}if(percent<=60&&percent>30){return's2';}if(percent<=30){return's3';}return's0';}

/***/ }),

/***/ 78492:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({changeTag(tagName){return this.map(function(){var replacement=document.createElement(tagName);for(var i=0;i<this.attributes.length;i+=1){var attribute=this.attributes[i];var attributeName=attribute.name;if(tagName==='a'){if(attributeName==='data-href'){attributeName='href';}if(attributeName==='data-title'){attributeName='title';}}replacement.setAttribute(attributeName,attribute.value);}while(this.childNodes.length){replacement.appendChild(this.childNodes[0]);}$(this).replaceWith(replacement);return replacement;});}});

/***/ }),

/***/ 20131:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(14792);
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_capitalize__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62193);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var DB_ENTRY_URL_REGEXP=/\/(animes|mangas|characters|people|ranobe|clubs|collections)\/[A-z]*(\d+)([\w-]*)/;var DB_ENTRY_KIND_REPLACEMENTS={animes:{en:'Anime',ru:'Аниме'},mangas:{en:'Manga',ru:'Манга'},characters:{en:'Character',ru:'Персонаж'},people:{en:'Person',ru:'Человек'},ranobe:{en:'Ranobe',ru:'Ранобэ'},clubs:{en:'Club',ru:'Клуб'},collections:{en:'Collection',ru:'Коллекция'}};function paramToName([_,kind,id,name]){return name.split('-').filter(v=>!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default()(v)).map(v=>lodash_capitalize__WEBPACK_IMPORTED_MODULE_1___default()(v)).join(' ')||`${DB_ENTRY_KIND_REPLACEMENTS[kind][window.LOCALE]}#${id}`;}var defaultOptions={// autoFill: true,
// cacheLength: 10,
cacheLength:0,delay:10,max:30,matchContains:1,matchSubset:1,minChars:2,dataType:'JSON',$anchor:null,selectFirst:false};$.fn.extend({completable(options={}){return this.each(function(){var $node=$(this);return $node.autocomplete('data-autocomplete',_objectSpread(_objectSpread({},defaultOptions),{},{formatItem(entry){return entry.label;},parse(data){$node.trigger('parse');return data.reverse();}},options)).on('result',function(e,entry){if(entry){entry.id=entry.data;entry.name=entry.value;$node.trigger('autocomplete:success',[entry]);return;}if(this.value){var matches=this.value.match(DB_ENTRY_URL_REGEXP);if(matches){$node.trigger('autocomplete:success',[{url:this.value,id:matches[2],name:paramToName(matches)}]);return;}$node.trigger('autocomplete:text',[this.value]);}}).on('paste',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee({originalEvent}){var url,matches,id,value;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url=originalEvent.clipboardData.getData('Text');matches=url.match(DB_ENTRY_URL_REGEXP);_context.next=4;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(100);case 4:if(matches){id=matches[2];value=paramToName(matches);$node.trigger('autocomplete:receiveData',[[{data:id,label:`<div class='name'>${value}</div>`,value,url}]]);}case 5:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());});},completableVariant(){return this.each(function(){return $(this).completable().on('autocomplete:success',function(e,entry){var $variants=$(this).parent().find('.variants');var variantName=$(this).data('variant_name');if($variants.find(`[value="${entry.id}"]`).exists()){return;}$('<div class="variant">'+'<input type="checkbox" name="'+variantName+'" value="'+entry.id+'" checked="true" />'+'<a class="b-link" href="'+entry.url+'" class="bubbled">'+entry.name+'</a>'+'</div>').appendTo($variants).process();this.value='';});});},completablePlain(){return this.each(function(){var $node=$(this);return $node.autocomplete('data-autocomplete',_objectSpread(_objectSpread({},defaultOptions),{},{minChars:1,parse(data){return data.map(value=>({value}));},formatItem(entry){return entry.value;}})).on('result',(_e,entry)=>{if(entry){$node.trigger('autocomplete:text',[entry.value]);}});});}});

/***/ }),

/***/ 32019:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
jQuery.fn.exists=function(){return this.length>0;};

/***/ }),

/***/ 63571:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
if(window.history&&window.history.navigationMode){window.history.navigationMode='compatible';}$.extend({formNavigate(options){$(document.body).on('change paste keypress','textarea',({currentTarget})=>{$(currentTarget).data('navigate_check_required',true);});$(document.body).on('submit','form',({currentTarget})=>{$(currentTarget).find('textarea').data('navigate_check_required',false);});$(window).on('beforeunload turbolinks:before-visit',e=>{var hasUnsavedChanges=false;$('textarea:visible').each((_index,node)=>{var $node=$(node);if(!$node.data('navigate_check_required')){return;}$node.data('navigate_check_required',false);if(node.value.length>options.size){hasUnsavedChanges=true;}});if(hasUnsavedChanges&&!window.confirm(options.message)){e.preventDefault();}});}});

/***/ }),

/***/ 91448:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.extend({galleryOptions:{cyclic:true,hideOnContentClick:true,transitionIn:'elastic',transitionOut:'elastic',speedIn:400,speedOut:200}});$.extend({youtubeOptions:$.extend({},$.galleryOptions,{padding:0,autoScale:false,width:680,showNavArrows:false,hideOnContentClick:false,height:495,type:'swf',swf:{wmode:'transparent',allowfullscreen:true},onStart(){$('#fancybox-expand').hide();return true;},onComplete(){$('#fancybox-expand').hide();}})});$.extend({vkOptions:$.extend({},$.youtubeOptions,{type:'iframe'})});

/***/ }),

/***/ 36797:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$.fn.extend({imageEditable(){return this.each(function(){var $node=$(this);if($node.data('imageEditable')){return;}$node.data('imageEditable',true);// редактирование в мобильной версии
$('.mobile-edit',$node).on('click',()=>{$node.toggleClass('mobile-editing');return false;});// удаление
$('.delete',$node).on('click',()=>{$node.addClass('deletable');return false;});// отмена удаления
$('.cancel',$node).on('click',()=>{$node.removeClass('deletable').removeClass('mobile-editing');return false;});// подтверждение удаления
$('.confirm',$node).on('click',function(){if($(this).data('remote')){$(this).callRemote();}else{$node.removeClass('deletable').addClass('deleted');}return false;});// восстановление удалённого
// $('.restore', $node).on 'click', ->
// $node.removeClass('deleted')
// $node.removeClass('mobile-editing')
// false
// результат удаления при удалении через аякс-запрос
$('.confirm',$node).on('ajax:before',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var packery;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$node.removeClass('deletable').addClass('deleted');packery=$node.closest('.packery').data('packery');if(!packery){_context.next=7;break;}packery.remove($node[0]);_context.next=6;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(250);case 6:packery.layout();case 7:case"end":return _context.stop();}},_callee);})));// перемещение влево
$('.move-left',$node).on('click',()=>{$node.insertBefore($node.prev());return false;});// перемещение вправо
$('.move-right',$node).on('click',()=>{$node.insertAfter($node.next());return false;});});}});

/***/ }),

/***/ 32268:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({insertAtCaret(prefix,postfix,filler){return this.each(function(){if(document.selection){this.focus();var sel=document.selection.createRange();sel.text=prefix+(sel.text===''&&filler?filler:sel.text)+postfix;this.focus();}else if(this.selectionStart||this.selectionStart==='0'||this.selectionStart===0){var startPos=this.selectionStart;var endPos=this.selectionEnd;var scrollTop=this.scrollTop;var selectedText=this.value.substring(startPos,endPos);selectedText=selectedText===''&&filler?filler:selectedText;this.value=this.value.substring(0,startPos)+prefix+selectedText+postfix+this.value.substring(endPos,this.value.length);this.focus();this.selectionEnd=startPos+prefix.length+selectedText.length+postfix.length;this.selectionStart=this.selectionEnd;this.scrollTop=scrollTop;}else{this.value+=prefix+postfix;this.focus();}$(this).trigger('change');});}});

/***/ }),

/***/ 39356:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13269);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
var I18N_TIME_FORMATS={ru:'D MMMM YYYY, H:mm:ss',en:'MMMM D YYYY, h:mm:ss a'};var I18N_DATE_FORMATS={ru:'ll',en:'ll'};var initialized=false;var refreshInterval=60000;$.fn.extend({livetime(){if(!initialized){setInterval(updateTimes,refreshInterval);initialized=true;}return this.each((_index,node)=>{updateTime(node);return $(node).one('mouseover',function(){var time=parseTime($(this));var format=I18N_TIME_FORMATS[_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.locale];if(!$(this).data('no-tooltip')){$(this).attr({title:time.format(format)});}});});}});function updateTimes(){$('time').each((_index,node)=>updateTime(node));}function updateTime(node){var $node=$(node);var timeinfo=getTimeinfo($node);var newValue;if(timeinfo.format==='1_day_absolute'){newValue=timeinfo.dayjs.unix()>(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])().subtract(1,'day').unix()?timeinfo.dayjs.fromNow():timeinfo.dayjs.format(I18N_DATE_FORMATS[_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.locale]);}else{newValue=timeinfo.dayjs.fromNow();}if(newValue!==timeinfo.value){$node.text(newValue);timeinfo.value=newValue;}}function parseTime($node){return (0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($node.attr('datetime')).subtract(window.MOMENT_DIFF).add(2,'seconds');}function getTimeinfo($node){return $node.data('timeinfo')||generateTimeinfo($node);}function generateTimeinfo($node){var timeinfo={};var nodeTime=parseTime($node);timeinfo.dayjs=(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])().isBefore(nodeTime)&&!$node.data('allow-future-time')?(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])():nodeTime;timeinfo.value=$node.text();timeinfo.format=$node.data('format');$node.data({timeinfo});return timeinfo;}

/***/ }),

/***/ 40198:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
// import { isMobile, isWebkit } from 'shiki-utils';
// ссылки на camo в href содержат оригинальный url картинки,
// а в data-href проксированный url картинки
var extractUrl=item=>item.src=item.el.data('href')||item.src;// const GLOBAL_EVENTS = 'gesturestart gesturechange gestureend resize';
//
// async function disableScroll() {
//   const { disablePageScroll } = await import('scroll-lock');
//   disablePageScroll();
// }
// async function enableScroll(e) {
//   const { enablePageScroll } = await import('scroll-lock');
//   enablePageScroll();
//
//   $(window).off(GLOBAL_EVENTS, enableScroll);
// }
$.fn.extend({magnificRelGallery(){return this.each(function(){var $node=$(this);if(!$node.data('magnificPopup')){return $node.magnificPopup({type:'image',closeOnContentClick:true,// closeBtnInside: false
// alignTop: true,
fixedContentPos:true,fixedBgPos:true,gallery:{enabled:true,navigateByImgClick:true,preload:[0,1]},callbacks:{beforeOpen(){var item=this.items[this.index];if(item.rel&&this.items.length===1){this.items=$(`a[rel='${item.rel}']`).toArray();this.index=this.items.indexOf(item);}// if (!isMobile || isWebkit) {
//   disableScroll();
//   $(window).one(GLOBAL_EVENTS, enableScroll);
// }
},afterClose(){// if (!isMobile || isWebkit) {
//   enableScroll();
// }
},elementParse:extractUrl},mainClass:'mfp-no-margins mfp-img-mobile'// mainClass: 'mfp-with-zoom',
// zoom: {
//   enabled: true,
//   duration: 300,
//   easing: 'ease-in-out',
//   opener(openerElement) {
//     if (openerElement.is('img')) { return openerElement; } else { return openerElement.find('img'); }
//   }
// }
});}});}});

/***/ }),

/***/ 56503:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
var NS='webm';var FRAME_HTML='<div class="mfp-figure mfp-webm-holder mfp-image-holder">'+'<button title="Close (Esc)" type="button" class="mfp-close">×</button>'+'<figure>'+'<div class="mfp-img">'+'<div class="b-fancy_loader"></div>'+'</div>'+'</figure>'+'</div>';$.magnificPopup.registerModule(NS,{options:{settings:null,cursor:'mfp-ajax-cur'},proto:{initWebm(){return this.types.push(NS);},getWebm(item){var $html=$(FRAME_HTML);var $videoContainer=$html.find('.mfp-img');var $video=$('<video>').attr({class:'mfp-webm',src:item.el.data('video'),controls:'controls',autoplay:true// preload: 'none'
});__webpack_require__.e(/* import() | html5player */ 9098).then(__webpack_require__.bind(__webpack_require__, 84123)).then(({ShikiHtml5Video})=>new ShikiHtml5Video($video));$video.appendTo($videoContainer);var loaded=false;$video.one('loadedmetadata play playing canplay',()=>{if(loaded){return;}loaded=true;$html.addClass('loaded');});$video.on('error',()=>{$videoContainer.html('<p style="color: #fff;">broken video link</p>');});this.appendContent($html);this.updateStatus('ready');}}});

/***/ }),

/***/ 18966:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var _utils_load_image__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(75612);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}// почему-то без задержки не работает
function checkImage(image,options){var $image=$(image);var imageWidth=image.naturalWidth||$image.width();var imageHeight=image.naturalHeight||$image.height();if(imageWidth>300&&!$image.attr('width')&&!$image.attr('height')){var normalizationClass=imageWidth>imageHeight?'normalized_width':'normalized_height';$image.addClass(normalizationClass);}var $link=$image.parent();if(options.appendMarker&&$link.attr('href')&&!$link.children('.marker').exists()&&imageWidth>300&&imageHeight>300){$link.append(`<span class='marker'><span class='marker-text'>${imageWidth}x${imageHeight}</span></span>`);}if(imageWidth<300&&imageHeight<300&&$link.tagName()==='a'&&$link.prop('href')===$image.prop('src')){$image.unwrap();}}$.fn.extend({normalizeImage(options){return this.each(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var image;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:image=this;_context.next=3;return (0,_utils_load_image__WEBPACK_IMPORTED_MODULE_1__/* .imagePromiseFinally */ .yb)(image);case 3:_context.next=5;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 5:if(image.loading==='lazy'&&!image.naturalWidth&&!image.complete){$(image).on('load',()=>checkImage(image,options));}else{checkImage(image,options);}case 6:case"end":return _context.stop();}},_callee,this);})));}});

/***/ }),

/***/ 90977:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
// EXTERNAL MODULE: ./node_modules/js-cookie/dist/js.cookie.mjs
var js_cookie = __webpack_require__(18987);
// EXTERNAL MODULE: ./app/packs/javascripts/services/user_rates/tracker.js + 4 modules
var tracker = __webpack_require__(9868);
// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js
var isEmpty = __webpack_require__(62193);
var isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/with.js
var utils_with = __webpack_require__(89234);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/topics/track_topic.js
class TrackTopic{constructor(topic,$root){(0,utils_with/* default */.A)(this._selector(topic),$root).data('model',topic);}_selector(topic){return`.b-topic#${topic.id}`;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/topics/tracker.js
class TopicsTracker{static track(jsExports,$root){if(isEmpty_default()(jsExports!=null?jsExports.topics:undefined)){return;}jsExports.topics.forEach(topic=>new TrackTopic(topic,$root));jsExports.topics=null;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/reviews/track_review.js
class TrackReview{constructor(review,$root){(0,utils_with/* default */.A)(this._selector(review),$root).data('model',review);}_selector(review){return`.b-review#${review.id}`;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/reviews/tracker.js
class ReviewsTracker{static track(jsExports,$root){if(isEmpty_default()(jsExports!=null?jsExports.reviews:undefined)){return;}jsExports.reviews.forEach(review=>new TrackReview(review,$root));jsExports.reviews=null;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/comments/track_comment.js
class TrackComment{constructor(comment,$root){(0,utils_with/* default */.A)(this._selector(comment),$root).data('model',comment);}_selector(comment){return`.b-comment#${comment.id}`;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/comments/tracker.js
class CommentsTracker{static track(jsExports,$root){if(isEmpty_default()(jsExports!=null?jsExports.comments:undefined)){return;}jsExports.comments.forEach(comment=>new TrackComment(comment,$root));jsExports.comments=null;}}
// EXTERNAL MODULE: ./node_modules/shiki-decorators/index.js + 2 modules
var shiki_decorators = __webpack_require__(89752);
// EXTERNAL MODULE: ./node_modules/lodash/round.js
var round = __webpack_require__(36944);
var round_default = /*#__PURE__*/__webpack_require__.n(round);
// EXTERNAL MODULE: ./node_modules/lodash/sumBy.js
var sumBy = __webpack_require__(31126);
var sumBy_default = /*#__PURE__*/__webpack_require__.n(sumBy);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/axios.js
var axios = __webpack_require__(24418);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/view.js
var view = __webpack_require__(27349);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/jst.js
var jst = __webpack_require__(60957);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/polls/view.js
/* provided dependency */ var $ = __webpack_require__(74692);
var _class;function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var TEMPLATE='polls/poll';var Poll=(_class=class Poll extends view/* default */.A{initialize(model){this.model=model;this._render();if(!this.canVote){return;}this.$vote=this.$('.poll-actions .vote');this.$abstain=this.$('.poll-actions .abstain');this._toggleActions();this.$('.b-radio').on('click',this._radioClick);this.$vote.on('click',this._voteVariant);this.$abstain.on('click',this._abstain);}get canVote(){return window.SHIKI_USER.isSignedIn&&this.model.state==='started'&&!this.model.vote.is_abstained&&!this.model.vote.variant_id;}get checkedRadio(){return this.$('input[type=radio]:checked')[0];}// handlers
_radioClick(e){if(e.target.tagName==='A'){return;}e.preventDefault();var $radio=$(e.currentTarget).find('input');$radio.prop({checked:!$radio.prop('checked')});this._toggleActions();}_voteVariant(){var variantId=parseInt(this.checkedRadio.value);var variant=this.model.variants.find(v=>v.id===variantId);this.model.vote={is_abstained:false,variant_id:variant.id};variant.votes_total+=1;this._vote(variant.vote_for_url);}_abstain(){this.model.vote={is_abstained:true,variant_id:null};this._vote(this.model.vote_abstain_url);}// private functions
_render(){var $oldRoot=this.$root;this._setRoot(jst/* default */.A[TEMPLATE]({model:this.model,can_vote:this.canVote,bar_percent:this._variantPercent,bar_class:this._variantClass}));$oldRoot.replaceWith(this.$root);}_vote(url){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.$root.addClass('b-ajax');_context.next=3;return axios/* default */.A.post(url);case 3:_this.$root.removeClass('b-ajax');_this._render();case 5:case"end":return _context.stop();}},_callee);}))();}_toggleActions(){if(this.checkedRadio){this.$abstain.addClass('hidden');this.$vote.removeClass('hidden');}else{this.$abstain.removeClass('hidden');this.$vote.addClass('hidden');}}_variantPercent(variant){var totalVotes=sumBy_default()(this.model.variants,'votes_total');if(totalVotes===0){return 0;}return round_default()(100.0*variant.votes_total/totalVotes,2);}_variantClass(variant){var votesPercent=this._variantPercent(variant);if(votesPercent<=80&&votesPercent>60){return's1';}if(votesPercent<=60&&votesPercent>30){return's2';}if(votesPercent<=30){return's1';}return's0';}},(_applyDecoratedDescriptor(_class.prototype,"_radioClick",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_radioClick"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_voteVariant",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_voteVariant"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_abstain",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_abstain"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_variantPercent",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_variantPercent"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_variantClass",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_variantClass"),_class.prototype)),_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/polls/track_poll.js
class TrackPoll{constructor(poll,$root){(0,utils_with/* default */.A)(this._selector(poll),$root).data('model',poll).each((_,node)=>new Poll(node,poll));}_selector(poll){return`.poll-placeholder#${poll.id}`;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/polls/tracker.js
class PollsTracker{static track(jsExports,$root){if(isEmpty_default()(jsExports)||isEmpty_default()(jsExports.polls)){return;}jsExports.polls.forEach(poll=>new TrackPoll(poll,$root));jsExports.polls=null;}}
// EXTERNAL MODULE: ./app/packs/javascripts/dynamic_elements/_parser.js + 35 modules
var _parser = __webpack_require__(96219);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/tooltip_options.js
var tooltip_options = __webpack_require__(27910);
// EXTERNAL MODULE: ./node_modules/shiki-utils/index.js + 5 modules
var shiki_utils = __webpack_require__(79308);
;// CONCATENATED MODULE: ./app/packs/javascripts/jquery.plugins/jquery.process.js
/* provided dependency */ var jquery_process_$ = __webpack_require__(74692);
function jquery_process_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jquery_process_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function jquery_process_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function jquery_process_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){jquery_process_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){jquery_process_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}jquery_process_$.fn.extend({process(jsExports){processCurrentDom(this,jsExports);return this;}});function processCurrentDom(){return _processCurrentDom.apply(this,arguments);}function _processCurrentDom(){_processCurrentDom=jquery_process_asyncToGenerator(/*#__PURE__*/jquery_process_regeneratorRuntime().mark(function _callee(root=document.body,jsExports=window.JS_EXPORTS){var $root,collapses;return jquery_process_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$root=jquery_process_$(root);tracker/* default */.A.track(jsExports,$root);TopicsTracker.track(jsExports,$root);ReviewsTracker.track(jsExports,$root);CommentsTracker.track(jsExports,$root);PollsTracker.track(jsExports,$root);// video must be processed before dynamic Wall, otherwise "shrinked" class sometimes
// is assigned too late for video inside wall (after WallVideo is initialized)
(0,utils_with/* default */.A)('.b-video.unprocessed',$root).shikiVideo();new _parser/* default */.A((0,utils_with/* default */.A)('.to-process',$root));(0,utils_with/* default */.A)('time',$root).livetime();// TODO: move all logic into DynamicParser
// то, что должно превратиться в ссылки
(0,utils_with/* default */.A)('.linkeable',$root).changeTag('a').removeClass('linkeable');// чёрные мелкие тултипы
(0,utils_with/* default */.A)('.b-tooltipped.unprocessed',$root).removeClass('unprocessed').each(function(){if((0,shiki_utils.isMobile)()&&!this.classList.contains('mobile')){return;}var $tip=jquery_process_$(this);var gravity=(()=>{switch($tip.data('direction')){case'top':return's';case'bottom':return'n';case'right':return'w';default:return'e';}})();var size=$tip.data('tipsy-size');var className=size?`tipsy-${size}`:null;$tip.tipsy({gravity,className,html:true,prependTo:document.body});});// подгружаемые тултипы
(0,utils_with/* default */.A)('.anime-tooltip',$root).tooltip(tooltip_options/* ANIME_TOOLTIP_OPTIONS */.s).removeClass('anime-tooltip').addClass('anime-tooltip-processed').removeAttr('title');(0,utils_with/* default */.A)('.bubbled',$root).addClass('bubbled-processed').removeClass('bubbled').tooltip(_objectSpread(_objectSpread({},tooltip_options/* COMMON_TOOLTIP_OPTIONS */.B),{},{offset:[-48,10,-10]}));(0,utils_with/* default */.A)('.b-spoiler.unprocessed',$root).spoiler();(0,utils_with/* default */.A)('img.check-width',$root).removeClass('check-width').normalizeImage({appendMarker:true});(0,utils_with/* default */.A)('.b-image.unprocessed',$root).removeClass('unprocessed').magnificRelGallery();(0,utils_with/* default */.A)('.b-show_more.unprocessed',$root).removeClass('unprocessed').showMore();// с задержкой делаем потому, что collapsed блоки могут быть в контенте,
// загруженном аяксом, а process для таких случаев вызывается ещё до вставки в DOM
collapses=js_cookie/* default */.A.get('collapses');if(!collapses){_context.next=22;break;}_context.next=21;return (0,delay/* default */.Ay)();case 21:// сворачиваение всех нужных блоков "свернуть"
collapses.replace(/;$/,'').split(';').forEach(id=>jquery_process_$(`#collapse-${id}`).filter(':not(.triggered)').trigger('click',true));case 22:case"end":return _context.stop();}},_callee);}));return _processCurrentDom.apply(this,arguments);}

/***/ }),

/***/ 60015:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$.fn.extend({process_hidden_content(){return this.each(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var $content,AlignedPosters;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$content=$(this);_context.next=3;return __webpack_require__.e(/* import() | aligned_posters */ 7022).then(__webpack_require__.bind(__webpack_require__, 59117));case 3:AlignedPosters=_context.sent;$content.find(`.${AlignedPosters.GLOBAL_SELECTOR}`).each(function(){var data=$(this).data(AlignedPosters.DATA_KEY);if(data){data.process();}});case 5:case"end":return _context.stop();}},_callee,this);})));}});

/***/ }),

/***/ 22389:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({rateable(){return this.each(function(){var $stars=$('.stars-container',this);var $hover=$('.hover',this);var $hoverableTrigger=$('.hoverable-trigger',this);var $score=$('.score',this);var $scoreValue=$('.score-value',this);var $scoreNotice=$('.score-notice',this);var notices=$(this).data('notices');var inputSelector=$(this).data('input_selector');var isWithInput=!!inputSelector;var scoreInitial=parseInt($scoreValue.text())||0;var scoreNew=null;$hoverableTrigger.on('mousemove',e=>{var offset=$(e.target).offset().left;var scoreRaw=(e.clientX-offset)*10.0/$stars.width();scoreNew=scoreRaw>0.5?Math.min(Math.floor(scoreRaw)+1,10):0;$scoreNotice.html(notices[scoreNew]||'&nbsp;');$hover.attr('class',`${withoutScore($hover)} score-${scoreNew}`);$scoreValue.html(scoreNew).attr('class',`${withoutScore($scoreValue)} score-${scoreNew}`);}).on('mouseover',_e=>{$score.addClass('hovered');}).on('mouseout',_e=>{$score.removeClass('hovered');$scoreNotice.html(notices[scoreInitial]||'&nbsp;');$hover.attr('class',withoutScore($hover));$score.attr('class',`${withoutScore($score)} score-${scoreInitial}`);$scoreValue.attr('class',`${withoutScore($scoreValue)} score-${scoreInitial}`).html(scoreInitial);}).on('click',({currentTarget})=>{if(isWithInput){scoreInitial=scoreNew;$(currentTarget).trigger('mouseout');$(currentTarget).closest('form').find(inputSelector).val(scoreNew);}$(currentTarget).trigger('rate:change',scoreNew);});});}});function withoutScore($node){return $node.attr('class').replace(/\s?score-\d+/,'');}

/***/ }),

/***/ 6992:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$.extend({scrollTo(marker,callback){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var top,$marker,$topMenu;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(typeof marker==='number'){top=marker;}else{$marker=$(marker);if($marker.length){top=$marker.offset().top-10;}else{top=0;}}$topMenu=$('.l-top_menu-v2');if(top!==0&&$topMenu.css('position')==='sticky'){top-=$topMenu.height();}$('html, body').animate({scrollTop:top},300);// easeInOutCirc // easeOutElastic
if(!callback){_context.next=8;break;}_context.next=7;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(300);case 7:callback();case 8:case"end":return _context.stop();}},_callee);}))();}});

/***/ }),

/***/ 98420:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({setCursorPosition(pos){var el=$(this).get(0);if(!el){return;}var isSelectionDone=false;try{if(el.setSelectionRange){el.setSelectionRange(pos,pos);isSelectionDone=true;}}catch(error){}if(!isSelectionDone&&el.createTextRange){var range=el.createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}}});

/***/ }),

/***/ 6278:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79308);
/* harmony import */ var lodash_isString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85015);
/* harmony import */ var lodash_isString__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_csrf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(68164);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var I18N_KEY='frontend.lib.jquery_shiki_file';var defaults={maxfiles:150,progress:null,input:null};var globalDragLock=false;$.fn.extend({shikiFile(opts){return this.each(function(){var options=$.extend({},defaults,opts);var $node=$(this);// плейсхолдер того места, куда будет класться файл
var $dropArea=null;// прогресс-бар
var $progressContainer=$(options.progress);var $progressBar=$progressContainer.children();var $input=$(options.input);// выбор файла в инпуте - триггер файлдропа
$input.change(function(){if(this.files.length>0){$node.trigger('drop',[this.files]);}});var csrfTokens=(0,_utils_csrf__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)();$node.filedrop({url:$node.data('upload_url'),paramname:'image',data:csrfTokens.post,headers:csrfTokens.headers,allowedfiletypes:['image/jpg','image/jpeg','image/png'],error(status,_file,_fileIndex,_status,errorText){this.afterAll();switch(status){case'TooManyFiles':shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.too_many_files`,{count:options.maxfiles}));break;case'FileTooLarge':shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.too_large_file`));break;case'Unprocessable Entity':if(errorText){shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(errorText);}else{shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.please_try_again_later`));}break;case'FileTypeNotAllowed':shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.file_type_not_allowed`));break;// when 'BrowserNotSupported'
default:shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.browser_not_supported`));}globalDragLock=false;},maxfiles:options.maxfiles,maxfilesize:4,// max file size in MBs
queuefiles:1,refresh:50,beforeEach(file){// $progressBar.width '0%'
var filename=file.name;var filesize=Math.ceil(file.size/10)/100;return $progressBar.html(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.loading_file`,{filename,filesize}));},drop(){if(globalDragLock){return false;}globalDragLock=true;$node.trigger('upload:before');$(document.body).trigger('dragleave');$progressContainer.addClass('active');return true;},afterAll(){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$node.trigger('upload:after');globalDragLock=false;$progressContainer.removeClass('active');_context.next=5;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(250);case 5:$progressBar.width('0%');case 6:case"end":return _context.stop();}},_callee);}))();},docOver(_e){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var height,width,text,cls;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!($node.data('placeholder_displayed')||!$node.is(':visible'))){_context2.next=2;break;}return _context2.abrupt("return");case 2:$node.data({placeholder_displayed:true});height=$node.outerHeight();width=$node.outerWidth();text=globalDragLock?_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.wait_till_loaded`):_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t(`${I18N_KEY}.drop_pictures_here`);cls=globalDragLock?'disallowed':'allowed';$dropArea=$(`<div data-text='${text}' class='shiki-file_uploader-drop_placeholder ${cls}' style='width:${width}px!important;height:${height}px;line-height:${Math.max(height,75)}px;'></div>`).css({opacity:0}).on('drop',e=>$node.trigger(e)).on('dragenter',function(){return $(this).addClass('hovered');}).on('dragleave',function(){return $(this).removeClass('hovered');}).insertBefore($node);_context2.next=10;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 10:$dropArea.css({opacity:0.75});case 11:case"end":return _context2.stop();}},_callee2);}))();},docLeave(_e){if(!$node.data('placeholder_displayed')){return;}$dropArea=$node.parent().find('.shiki-file_uploader-drop_placeholder').css({opacity:0});(0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(350).then(()=>$dropArea.remove());$node.data({placeholder_displayed:false});},uploadStarted(i,_file,_len){return $node.trigger('upload:started',i);},uploadFinished(i,file,response,_time){if(lodash_isString__WEBPACK_IMPORTED_MODULE_2___default()(response)||'error'in response){$node.trigger('upload:failed',[response,i]);}else{$node.trigger('upload:success',[response,i]);}},progressUpdated(i,file,progress){if(progress>85||i>0){$progressBar.width('100%');}else{$progressBar.width(progress+'%');}}});$node.pastableTextarea();$node.on('pasteImage',(e,data)=>{var file=new File([data.blob],`pasted_file.${data.blob.type.split('/')[1]}`,{type:data.blob.type,lastModified:Date.now()});$node.trigger('drop',[[file]]);});});}});

/***/ }),

/***/ 48455:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({shikiImage(){return this.each(function(){return $(this).magnificRelGallery().imageEditable();});}});

/***/ }),

/***/ 57857:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(36944);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_load_image__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(75612);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var prepare=(domain,href)=>({index:`${domain}/`,src:'%id%',id(_url){return href;}});var hostingPatterns=url=>({youtube:prepare('youtube.com',url),vimeo:prepare('vimeo.com',url),youtu_be:prepare('youtu.be',url),// rutube_ru: prepare('rutube.ru', url),
vk_com:prepare('vk.com',url),vkontakte_ru:prepare('vkontakte.ru',url),coub_com:prepare('coub.com',url),// twitch_tv: prepare('twitch.tv', url),
myvi_ru:prepare('myvi.ru',url),myvi_tv:prepare('myvi.tv',url),myvi_top:prepare('myvi.top',url),sibnet:prepare('sibnet.ru',url),yandex_ru:prepare('yandex.ru',url),// dailymotion_com: prepare('dailymotion.com', url),
// streamable_com: prepare('streamable.com', url),
// smotret_anime: prepare('smotretanime.ru', url),
ok_ru:prepare('ok.ru',url),// youmite_ru: prepare('youmite.ru', url),
// viuly_io: prepare('viuly.io', url),
stormo_xyz:prepare('stormo.xyz',url),stormo_tv:prepare('stormo.tv',url)// mediafile_online: prepare('mediafile.online', url)
});// youtube_example:
//   index: 'youtube.com' # String that detects type of video (in this case YouTube). Simply via url.indexOf(index).
//   id: 'v=' # String that splits URL in a two parts, second part should be %id%
//   Or null - full URL will be returned
//   Or a function that should return %id%, for example:
//   id: function(url) { return 'parsed id'; }
//   src: '//www.youtube.com/embed/%id%?autoplay=1' # URL that will be set as a source for iframe.
$.fn.extend({shikiVideo(){return this.each(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var root,$root,$link,posterImg,ratio;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:root=this;$root=$(root);if($root.hasClass('unprocessed')){_context.next=4;break;}return _context.abrupt("return");case 4:$root.removeClass('unprocessed');$link=$root.find('.video-link');// const isSpecialCoub = $root.hasClass('b-coub');
$link.magnificPopup({preloader:false,type:'iframe',iframe:{// HTML markup of popup, `mfp-close` will be replaced by the close button
markup:`
            <div class='mfp-iframe-scaler'>
              <div class="mfp-close"></div>
              <iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>
            </div>
          `,// markup: `
//   <div
//     class='mfp-iframe-scaler ${isSpecialCoub ? 'mfp-coub' : ''}'
//     ${isSpecialCoub ? 'onclick="$.magnificPopup.instance.close()"' : ''}
//   >
//     <div class="mfp-close"></div>
//     <iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>
//   </div>
// `,
// Templating object key. First part defines CSS selector, second attribute.
// "iframe_src" means: find "iframe" and set attribute "src".
srcAction:'iframe_src',// closeOnContentClick: isSpecialCoub,
patterns:hostingPatterns($link.data('href'))}});posterImg=root.querySelector('img');_context.next=10;return (0,_utils_load_image__WEBPACK_IMPORTED_MODULE_1__/* .imagePromiseFinally */ .yb)(posterImg);case 10:if(!($root.hasClass('youtube')&&posterImg.naturalWidth===120&&posterImg.naturalHeight===90)){_context.next=14;break;}posterImg.src='/assets/globals/missing_video.png';$root.addClass('shrinked-1_3 dynamically-replaced');return _context.abrupt("return");case 14:ratio=lodash_round__WEBPACK_IMPORTED_MODULE_0___default()(posterImg.naturalWidth*1.0/posterImg.naturalHeight,1);// http://vk.com/video98023184_165811692
if(ratio===1.3){$root.addClass('shrinked-1_3');}// https://video.sibnet.ru/video305613-SouL_Eater__AMW/
if(ratio===1.5){$root.addClass('shrinked-1_5');}case 17:case"end":return _context.stop();}},_callee,this);})));}});

/***/ }),

/***/ 34324:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({showMore(){return this.each(function(){var $showMore=$(this);var $hideMore=$showMore.next().find('.hide-more');$showMore.on('click',()=>{$showMore.hide();$hideMore.parent().show();});return $hideMore.on('click',()=>{$showMore.show();$hideMore.parent().hide();});});}});

/***/ }),

/***/ 75225:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({spoiler(){return this.each(function(){var $root=$(this);if(!$root.hasClass('unprocessed')){return;}$root.removeClass('unprocessed');var $label=$root.children('label');var $content=$label.next();$root.on('spoiler:open',()=>$label.click());$label.on('click',function(e){if(e.target!==$label[0]&&!$(this).closest($label).exists()){return;}$label.hide();$content.css({display:'inline'});$content.process_hidden_content();});if(!$content.hasClass('only-show')){$content.on('click',e=>{if(e.target!==$content[0]&&$(e.target).parent()[0]!==$content[0]&&!$(e.target).hasClass('inner-prgrph')){return;}$label.css({display:'inline'});$content.hide();});}});}});

/***/ }),

/***/ 42253:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({tagName(){return this.get(0).tagName.toLowerCase();}});

/***/ }),

/***/ 10403:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({triggerWithReturn(name,data){var event=new $.Event(name);this.trigger(event,data);return event.result;}});

/***/ }),

/***/ 88894:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
$.fn.extend({view(value){if(value){return this.data('view_object',value);}return this.data('view_object');}});

/***/ }),

/***/ 2668:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}$.fn.extend({yellowFade(){return this.each(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var $root;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$root=$(this);if(!$root.hasClass('yellow-fade')){_context.next=3;break;}return _context.abrupt("return");case 3:$root.addClass('yellow-fade');_context.next=6;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(50);case 6:$root.addClass('yellow-fade-animated');_context.next=9;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(1000);case 9:$root.removeClass('yellow-fade yellow-fade-animated');case 10:case"end":return _context.stop();}},_callee,this);})));}});

/***/ }),

/***/ 7043:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79308);
/* harmony import */ var lodash_isArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56449);
/* harmony import */ var lodash_isArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62193);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_isString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85015);
/* harmony import */ var lodash_isString__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_in_new_tab__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(70416);
/* provided dependency */ var $ = __webpack_require__(74692);
/* provided dependency */ var jQuery = __webpack_require__(74692);
/* eslint-disable */$(document).ajaxSend((e,xhr,options)=>{var token=$('meta[name=\'csrf-token\']').attr('content');xhr.setRequestHeader('X-CSRF-Token',token);if('SHIKI_FAYE_LOADER'in window&&SHIKI_FAYE_LOADER.id){xhr.setRequestHeader('X-Faye-Token',SHIKI_FAYE_LOADER.id);}});jQuery($=>{var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');$.fn.extend({/**
         * Triggers a custom event on an element and returns the event result
         * this is used to get around not being able to ensure callbacks are placed
         * at the end of the chain.
         *
         * TODO: deprecate with jQuery 1.4.2 release, in favor of subscribing to our
         *       own events and placing ourselves at the end of the chain.
         */triggerAndReturn(name,data){var event=new $.Event(name);this.trigger(event,data);return event.result!==false;},/**
         * Handles execution of remote calls firing overridable events along the way
         */callRemote(originalTarget){var $this=$(this);var is_form=$this.is('form');var should_lock=is_form;var el=this;// иногда бывает надо отключить функционал
if($this.data('disabled')){return false;}if(el.triggerAndReturn('ajax:before')){// шлём только один запрос
if(should_lock&&$this.data('ajax:locked')){return;}$this.data('ajax:locked',true);var data=is_form?el.serializeArray():$this.data('form')||[];// next 5 lines were moved from before "if ($this.data('disabled')) {" line
var method=el.data('method')||el.attr('method')||'GET';var url=el.data('action')||el.attr('action')||el.attr('href');var dataType=el.data('type')||'script';if(url===undefined){return false;}$.ajax({url,data,dataType,type:method.toUpperCase(),beforeSend(xhr){el.trigger('ajax:loading',{xhr,ajax:this});if(xhr.statusText=='abort'){$this.data('ajax:locked',false);}},success(data,status,xhr){$this.data('ajax:locked',false);if(!lodash_isString__WEBPACK_IMPORTED_MODULE_3___default()(data)&&data&&'notice'in data&&data.notice){shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.notice(data.notice);}el.trigger('ajax:success',[data,status,xhr]);},complete(xhr){$this.data('ajax:locked',false);el.trigger('ajax:complete',xhr);},error(xhr,status,error){$this.data('ajax:locked',false);if(xhr.responseText&&xhr.responseText.match(/invalid/)){// || xhr.responseText.match(/unauthenticated/)) {
shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(I18n.t('frontend.lib.rails_ujs_modified.invalid_login_or_password'));}else if(xhr.status==403){try{var errors=JSON.parse(xhr.responseText);}catch(e){var errors={};}if(Object.isObject(errors)&&errors.message){shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(errors.message);}else{shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(xhr.responseText!='Forbidden'?xhr.responseText:I18n.t('frontend.lib.rails_ujs_modified.you_are_not_authorized'));}}else if(xhr.status==500){shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(I18n.t('frontend.lib.please_try_again_later'));}else{try{var errors=JSON.parse(xhr.responseText);}catch(e){var errors={};}if('errors'in errors){errors=errors.errors;}else if('error'in errors){errors=[errors.error];}if(!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default()(errors)){if(lodash_isArray__WEBPACK_IMPORTED_MODULE_1___default()(errors)){shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(errors.join('<br />'));}else{var text=errors.map((v,k)=>{if(k=='base'){return v;}return'<strong>'+I18n.t('frontend.lib.rails_ujs_modified.'+k,{defaultValue:k})+'</strong> '+(Object.isArray(v)?v.join(', '):v);}).join('<br />');shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(text);}}else{shiki_utils__WEBPACK_IMPORTED_MODULE_0__.flash.error(I18n.t('frontend.lib.please_try_again_later'));}}el.trigger('ajax:failure',[xhr,status,error]);}});}else{return false;}el.trigger('ajax:after');}});/**
     * remote handlers
     */$(document).on('click','a[data-method]:not([data-remote]),span[data-method]:not([data-remote])',function(e){var link=$(this);var href=link.attr('href')||link.data('action');var method=link.attr('data-method');var form=$('<form method="post" action="'+href+'"></form>');var metadata_input='<input name="_method" value="'+method+'" type="hidden" />';if(link.attr('data-confirm')&&!confirm(link.attr('data-confirm'))){e.stopImmediatePropagation();return false;}if(csrf_param!=null&&csrf_token!=null){metadata_input+='<input name="'+csrf_param+'" value="'+csrf_token+'" type="hidden" />';}form.hide().append(metadata_input).appendTo('body');e.preventDefault();e.stopImmediatePropagation();form.submit();});/**
     *  confirmation handler
     */$(document).on('click','a[data-confirm]:not([data-remote]),input[data-confirm]',function(){var el=$(this);if(el.triggerAndReturn('confirm')){if(!confirm(el.attr('data-confirm'))){return false;}}});/**
     * remote handlers
     */$(document).on('submit','form[data-remote]',function(e){$(this).callRemote();e.preventDefault();});$(document).on('click','a[data-remote],input[data-remote],span[data-remote],div[data-remote],li[data-remote],button[data-remote],tr[data-remote]',function(e){if((0,_utils_in_new_tab__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A)(e)){return;}// когда кликаем на ссылку без data-remote внутри элемента с data-remote,
// то аякс запрос не должен отправляться на сервер - нужно дать браузеру перейти по ссылке
if(e.target.tagName=='A'&&!$(e.target).data('remote')){e.stopImmediatePropagation();return;}var $this=$(this);if($this.attr('data-confirm')&&!confirm($this.attr('data-confirm'))){return false;}if($this.callRemote()!==false){e.preventDefault();}});/**
    * disable-with handlers
    */var disable_with_input_selector='input[data-disable-with]';var disable_with_form_remote_selector='form[data-remote]:has('+disable_with_input_selector+')';var disable_with_form_not_remote_selector='form:not([data-remote]):has('+disable_with_input_selector+')';var disable_with_input_function=function disable_with_input_function(){$(this).find(disable_with_input_selector).each(function(){var input=$(this);input.data('enable-with',input.val()).attr('value',input.attr('data-disable-with')).attr('disabled','disabled');});};$(document).on('ajax:before',disable_with_form_remote_selector,disable_with_input_function);$(document).on('submit',disable_with_form_not_remote_selector,disable_with_input_function);$(document).on('ajax:complete',disable_with_form_remote_selector,function(){$(this).find(disable_with_input_selector).each(function(){var input=$(this);input.removeAttr('disabled').val(input.data('enable-with'));});});});

/***/ }),

/***/ 35635:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('.animes','.mangas','.ranobe',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,AnimesMenu,_yield$import2,ReviewsNavigation;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!$('.b-animes-menu').exists()){_context.next=6;break;}_context.next=3;return __webpack_require__.e(/* import() | db_entries_menu */ 8538).then(__webpack_require__.bind(__webpack_require__, 80014));case 3:_yield$import=_context.sent;AnimesMenu=_yield$import.AnimesMenu;new AnimesMenu('.b-animes-menu');case 6:if(!$('.b-reviews_navigation').exists()){_context.next=12;break;}_context.next=9;return __webpack_require__.e(/* import() | reviews_navigation */ 6663).then(__webpack_require__.bind(__webpack_require__, 6425));case 9:_yield$import2=_context.sent;ReviewsNavigation=_yield$import2.ReviewsNavigation;new ReviewsNavigation('.b-reviews_navigation');case 12:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 8777:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var gallery;pageLoad('animes_art','mangas_art','ranobe_art',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,ImageboardsGallery;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 18619));case 2:_yield$import=_context.sent;ImageboardsGallery=_yield$import.ImageboardsGallery;gallery=new ImageboardsGallery('.b-gallery');case 5:case"end":return _context.stop();}},_callee);})));pageUnload('animes_art','mangas_art','ranobe_art',()=>{gallery.destroy();gallery=null;});

/***/ }),

/***/ 55981:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('animes_cosplay','mangas_cosplay',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,Cosplay;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | animes_cosplay */ 8302).then(__webpack_require__.bind(__webpack_require__, 97468));case 2:_yield$import=_context.sent;Cosplay=_yield$import.Cosplay;new Cosplay('.l-content');case 5:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 80511:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('animes_coub',()=>{$.force_appear();});

/***/ }),

/***/ 30118:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73148);
/* harmony import */ var _utils_dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13269);
/* provided dependency */ var $ = __webpack_require__(74692);
var DATE_FORMAT='DD.MM.YYYY HH:mm';pageLoad('animes_edit',()=>{$('.increment-episode').on('click',e=>{var defaultDate=(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])(new Date()).format(DATE_FORMAT);var $node=$(e.currentTarget);var date=prompt($node.data('custom_confirm_text'),defaultDate);if(date){var newUrl=new tiny_uri__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A($node.attr('href')).query.set('aired_at',(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])(date,DATE_FORMAT).toString()).toString();$node.attr('href',newUrl);}else{e.stopImmediatePropagation();e.preventDefault();}});});

/***/ }),

/***/ 64891:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('animes_files','mangas_files',()=>{$('.b-options-floated.collapse').trigger('click');});

/***/ }),

/***/ 34567:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('animes_franchise','mangas_franchise','ranobe_franchise',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var d3,_yield$import,ShikiMath,_yield$import2,FranchiseGraph;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | d3 */ 1110).then(__webpack_require__.t.bind(__webpack_require__, 24143, 23));case 2:d3=_context.sent;_context.next=5;return Promise.all(/* import() | franchise */[__webpack_require__.e(1110), __webpack_require__.e(7358)]).then(__webpack_require__.bind(__webpack_require__, 8742));case 5:_yield$import=_context.sent;ShikiMath=_yield$import.ShikiMath;_context.next=9;return Promise.all(/* import() | franchise */[__webpack_require__.e(1110), __webpack_require__.e(7358)]).then(__webpack_require__.bind(__webpack_require__, 92262));case 9:_yield$import2=_context.sent;FranchiseGraph=_yield$import2.FranchiseGraph;_context.prev=11;render(ShikiMath,FranchiseGraph,d3);_context.next=19;break;case 15:_context.prev=15;_context.t0=_context["catch"](11);document.write(`${_context.t0.name}: ${_context.t0.message||JSON.stringify(_context.t0)}`);throw _context.t0;case 19:case"end":return _context.stop();}},_callee,null,[[11,15]]);})));function render(ShikiMath,FranchiseGraph,d3){if(false){}var $graph=$('.graph').empty();d3.json($graph.data('api_url'),(_error,data)=>{var graph=new FranchiseGraph(data);graph.render_to($graph[0]);$('.sticky-tooltip .close').on('click',()=>{var node=$('.node.selected')[0];d3.select(node).on('click')(node.__data__);});// node = $(".node##{$graph.data 'id'}")[0]
// d3.select(node).on('click')(node.__data__)
});}

/***/ }),

/***/ 54861:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('animes_screenshots',()=>{$('.c-screenshot').magnificRelGallery();});

/***/ }),

/***/ 78847:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_check_height__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41696);
/* harmony import */ var _utils_dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13269);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('animes_show','mangas_show','ranobe_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var $newCritique,newCritiqueUrl,_yield$Promise$all,_yield$Promise$all2,FavoriteStar,LangTrigger;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$('.b-notice').tipsy({gravity:'s'});$('.c-screenshot').magnificRelGallery();(0,_utils_check_height__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)($('.text'),{maxHeight:200});$newCritique=$('.new_critique');if(window.SHIKI_USER.isSignedIn){newCritiqueUrl=$newCritique.attr('href').replace(/%5Buser_id%5D=(\d+|ID)/,`%5Buser_id%5D=${window.SHIKI_USER.id}`);$newCritique.attr({href:newCritiqueUrl});}else{$newCritique.hide();}// autoload of resource info for guests
$('.l-content').on('postloaded:success','.resources-loader',()=>$('.c-screenshot').magnificRelGallery());$('.other-names').on('clickloaded:success',({currentTarget},data)=>{$(currentTarget).closest('.line, .line-container').replaceWith(data);});$('.more-info').on('clickloaded:success',({currentTarget},data)=>{$(currentTarget).replaceWith(data);});$('.b-subposter-actions .new_comment').on('click',()=>{$('.shiki_editor-selector').view().focus();});$('.local-time').each((_index,node)=>{var time=(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_1__["default"])(node.getAttribute('data-datetime')).subtract(window.MOMENT_DIFF);node.innerHTML=time.format({ru:'D MMM HH:mm',en:'MMM D HH:mm'}[window.LOCALE]);});_context.next=12;return Promise.all([__webpack_require__.e(/* import() | db_entries_show */ 1904).then(__webpack_require__.bind(__webpack_require__, 49892)),__webpack_require__.e(/* import() | db_entries_show */ 1904).then(__webpack_require__.bind(__webpack_require__, 68694))]);case 12:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);FavoriteStar=_yield$Promise$all2[0].FavoriteStar;LangTrigger=_yield$Promise$all2[1].LangTrigger;new LangTrigger('.b-lang_trigger');new FavoriteStar($('.b-subposter-actions .fav-add'),gon.is_favoured);case 18:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 13029:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _pages_p_pages_about__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17566);
/* harmony import */ var lodash_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95950);
/* harmony import */ var lodash_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_keys__WEBPACK_IMPORTED_MODULE_1__);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('animes_stats',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var Highcharts,_yield$import,colors;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.t.bind(__webpack_require__, 8524, 23));case 2:Highcharts=_context.sent;_context.next=5;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.bind(__webpack_require__, 34151));case 5:_yield$import=_context.sent;colors=_yield$import.colors;Highcharts.getOptions().colors.length=0;colors.forEach(color=>Highcharts.getOptions().colors.push(color));chart($('.list_stats-chart'),Highcharts);chart($('.scores_stats-chart'),Highcharts);case 11:case"end":return _context.stop();}},_callee);})));function chart($node,Highcharts){var data=$node.data('stats');var colors=Highcharts.getOptions().colors;var statFields=lodash_keys__WEBPACK_IMPORTED_MODULE_1___default()(data[0]).filter(field=>field!=='date');return $node.highcharts((0,_pages_p_pages_about__WEBPACK_IMPORTED_MODULE_0__.dailyChartOptions)({series:statFields.map((field,index)=>({name:field,pointInterval:24*3600*1000,pointStart:new Date(data[0].date).getTime(),data:data.map(v=>v[field]),visible:true}))},{isStacking:true}));}

/***/ }),

/***/ 47808:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/js-cookie/dist/js.cookie.mjs
var js_cookie = __webpack_require__(18987);
// EXTERNAL MODULE: ./node_modules/turbolinks/dist/turbolinks.js
var turbolinks = __webpack_require__(6224);
// EXTERNAL MODULE: ./node_modules/shiki-utils/index.js + 5 modules
var shiki_utils = __webpack_require__(79308);
// EXTERNAL MODULE: ./node_modules/shiki-decorators/index.js + 2 modules
var shiki_decorators = __webpack_require__(89752);
// EXTERNAL MODULE: ./node_modules/lodash/cloneDeep.js
var cloneDeep = __webpack_require__(88055);
var cloneDeep_default = /*#__PURE__*/__webpack_require__.n(cloneDeep);
// EXTERNAL MODULE: ./app/packs/javascripts/services/user_rates/tracker.js + 4 modules
var tracker = __webpack_require__(9868);
// EXTERNAL MODULE: ./app/packs/javascripts/services/ajax_cacher.js
var ajax_cacher = __webpack_require__(68292);
// EXTERNAL MODULE: ./app/packs/javascripts/dynamic_elements/_parser.js + 35 modules
var _parser = __webpack_require__(96219);
// EXTERNAL MODULE: ./app/packs/javascripts/views/animes/catalog_filters.js
var catalog_filters = __webpack_require__(16346);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/in_new_tab.js
var in_new_tab = __webpack_require__(70416);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/i18n.js + 1 modules
var i18n = __webpack_require__(12691);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/animes/paginated_catalog.js
/* provided dependency */ var $ = __webpack_require__(74692);
var _class;function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var PaginatedCatalog=(_class=class PaginatedCatalog{constructor(basePath){this.$content=$('.l-content');this.$pagination=$('.pagination');this.$linkCurrent=this.$pagination.find('.link-current');this.$linkNext=this.$pagination.find('.link-next');this.$linkPrev=this.$pagination.find('.link-prev');this.$linkTotal=this.$pagination.find('.link-total');this.$linkTitle=this.$pagination.find('.link-title');if(this.$linkNext.hasClass('disabled')&&this.$linkPrev.hasClass('disabled')){this.$pagination.hide();}this.pageChange={};this.$content.on('postloader:before',this._onPageLoadByScroll);this.$pagination.on('click','.link',this._onPaginationLinkClick).on('click','.no-hover',this._onPaginationPageSelect);this.filters=new catalog_filters/* default */.A(basePath,window.location.href,this.load);}load(url){window.history.pushState({turbolinks:true,url},'',url);this.filters.parse(url);this._fetch(url);}// events
_onPaginationLinkClick(e){if((0,in_new_tab/* default */.A)(e)){return;}e.preventDefault();var $link=$(e.target);if($link.hasClass('disabled')){return;}if($(window).scrollTop()>400){$.scrollTo('.head');}this.load($link.attr('href'));}_onPaginationPageSelect({currentTarget}){var $link=$(currentTarget).find('.link-current');if($link.has('input').length){return;}this.pageChange.priorValue=parseInt($link.html());this.pageChange.maxValue=parseInt(this.$linkTotal.html());$link.addClass('active').html(`<input type='number' min='1' max='${this.pageChange.maxValue}' value='${this.pageChange.priorValue}' />`);this.pageChange.$input=$link.children().focus().on('blur',()=>this._changePage(false)).on('keydown',({keyCode})=>{if(keyCode===27){this._changePage(true);}}).on('keypress',({keyCode})=>{if(keyCode===13){this._changePage(false);}});}_onPageLoadByScroll(_e,$content,data){var pages=this.$linkCurrent.html().split('-').map(parseInt);var currentPage=data.page,pagesCount=data.pages_count;var isLastPage=currentPage===pagesCount;pages[1]=currentPage;this.$linkCurrent.html(pages.join('-'));this.$linkTitle.html(this.$linkTitle.data('text'));this.$linkTotal.html(pagesCount);this.$linkNext.attr('href',isLastPage?null:this.filters.compile(currentPage+1)).toggleClass('disabled',isLastPage);// this.$content.process(data.JS_EXPORTS)
}// private methods
_changePage(isRollback){var currentPage=parseInt(this.pageChange.$input.val())||1;this.$linkCurrent.removeClass('active');if(isRollback||currentPage===this.pageChange.priorValue){this.$linkCurrent.html(this.pageChange.priorValue);}else{this.$linkCurrent.html(currentPage);this.load(this.filters.compile(currentPage));}this.pageChange.$input=null;}_fetch(url){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var absoulteUrl,_yield$ajaxCacher$fet,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:absoulteUrl=url;if(url.indexOf(`${window.location.protocol}//${window.location.host}`)===-1){absoulteUrl=`${window.location.protocol}//${window.location.host}${url}`;}_this._showAjax();_context.next=5;return ajax_cacher/* default */.A.fetch(absoulteUrl);case 5:_yield$ajaxCacher$fet=_context.sent;data=_yield$ajaxCacher$fet.data;status=_yield$ajaxCacher$fet.status;_this._hideAjax();if(!(status!==200)){_context.next=12;break;}if(status===451){window.location.reload();}else{shiki_utils.flash.error(i18n/* default */.A.t('frontend.lib.please_try_again_later'));}return _context.abrupt("return");case 12:if(window.location.href===absoulteUrl||decodeURI(window.location.href)===absoulteUrl){_this._processResponse(data,absoulteUrl);}case 13:case"end":return _context.stop();}},_callee);}))();}_processResponse(data,url){var currentPage=data.page,pagesCount=data.pages_count,content=data.content,title=data.title,notice=data.notice;var isFirstPage=currentPage===1;var isLastPage=currentPage===pagesCount;var $content=$(content);// using data.JS_EXPORTS cause UserRatesTracker changes data in its its argument
tracker/* default */.A.track(cloneDeep_default()(data.JS_EXPORTS),$content);// for cutted_covers
if(this.$content.data('dynamic')){this.$content.addClass(_parser/* default */.A.PENDING_CLASS);}this.$content.html($content).process();if(data.title){$('.head h1').html(title);document.title=`${title}`;}if(data.notice){$('.head .notice').html(notice);}this.$linkCurrent.html(currentPage);this.$linkTotal.html(pagesCount);this.$linkPrev.attr('href',isFirstPage?null:this.filters.compile(currentPage-1)).toggleClass('disabled',isFirstPage);this.$linkNext.attr('href',isLastPage?null:this.filters.compile(currentPage+1)).toggleClass('disabled',isLastPage);this.$pagination.toggle(!isLastPage||!isFirstPage);this.$content.trigger('ajax:success');if(url){// google analytics
if('_gaq'in window){window._gaq.push(['_trackPageview',url]);}// yandex metrika
if('yaCounter7915231'in window){window.yaCounter7915231.hit(url);}}}_showAjax(){this.$content.addClass('b-ajax');}_hideAjax(){this.$content.removeClass('b-ajax');}},(_applyDecoratedDescriptor(_class.prototype,"load",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"load"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onPaginationLinkClick",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_onPaginationLinkClick"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onPaginationPageSelect",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_onPaginationPageSelect"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onPageLoadByScroll",[shiki_decorators/* bind */.oI],Object.getOwnPropertyDescriptor(_class.prototype,"_onPageLoadByScroll"),_class.prototype)),_class);
;// CONCATENATED MODULE: ./app/packs/javascripts/pages/p-animes_collection-index.js
/* provided dependency */ var p_animes_collection_index_$ = __webpack_require__(74692);
pageLoad('animes_collection_index','recommendations_index','userlist_comparer_show',()=>{if(p_animes_collection_index_$('.l-menu [data-dynamic=postloaded]').exists()){p_animes_collection_index_$('.l-menu').one('postloaded:success',initCatalog);}else{initCatalog();}p_animes_collection_index_$('.b-search-results').on('click','.b-age_restricted .censored-rejected',({currentTarget})=>{js_cookie/* default */.A.set(currentTarget.getAttribute('data-cookie'),'true',{expires:9999,path:'/'});window.location.reload();});});function initCatalog(){var baseCatalogPath=p_animes_collection_index_$('.b-collection-filters').data('base_path');if(window.location.pathname.match(/\/recommendations\//)){baseCatalogPath=window.location.pathname.split('/').slice(0,5).join('/');}else if(window.location.pathname.match(/\/comparer\//)){baseCatalogPath=window.location.pathname.split('/').slice(0,6).join('/');}new PaginatedCatalog(baseCatalogPath);}pageUnload('animes_collection_index','recommendations_index','userlist_comparer_show',()=>{// восстановление плюсика у фильтра в актуальное состояние
var $blockFilter=p_animes_collection_index_$('.block-filter.item-add');var $blockList=$blockFilter.siblings('.b-block_list');if($blockList.find('.filter').length===$blockList.find('.item-minus').length){$blockFilter.removeClass('item-add').addClass('item-minus');}});

/***/ }),

/***/ 91797:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19974);
/* provided dependency */ var $ = __webpack_require__(74692);
var tagsApp;pageUnload('articles_new','articles_edit','articles_create','articles_update',()=>{if(tagsApp){tagsApp.$destroy();}});pageLoad('articles_new','articles_edit','articles_create','articles_update',()=>{var $form=$('.b-form.edit_article, .b-form.new_article');var $wall=$form.find('.b-shiki_wall');var $video=(0,_p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__.initVideo)('article',$form,$wall);(0,_p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__.initWall)($form,$wall);(0,_p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__.initTagsApp)('article').then(app=>tagsApp=app);(0,_p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__.initForm)('article',$form,$wall,$video);});

/***/ }),

/***/ 79218:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_check_height__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41696);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('characters_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,FavoriteStar,LangTrigger;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:(0,_utils_check_height__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)($('.text'),{maxHeight:200});$('.b-subposter-actions .new_comment').on('click',()=>{$('.shiki_editor-selector').view().focus();});_context.next=4;return Promise.all([__webpack_require__.e(/* import() | db_entries_show */ 1904).then(__webpack_require__.bind(__webpack_require__, 49892)),__webpack_require__.e(/* import() | db_entries_show */ 1904).then(__webpack_require__.bind(__webpack_require__, 68694))]);case 4:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);FavoriteStar=_yield$Promise$all2[0].FavoriteStar;LangTrigger=_yield$Promise$all2[1].LangTrigger;new LangTrigger('.b-lang_trigger');new FavoriteStar($('.b-subposter-actions .fav-add'),gon.is_favoured);case 10:case"end":return _context.stop();}},_callee);})));pageLoad('characters_art',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$import,ImageboardsGallery;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 18619));case 2:_yield$import=_context2.sent;ImageboardsGallery=_yield$import.ImageboardsGallery;new ImageboardsGallery('.b-gallery');case 5:case"end":return _context2.stop();}},_callee2);})));pageLoad('characters_cosplay',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$import2,Cosplay;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return __webpack_require__.e(/* import() | animes_cosplay */ 8302).then(__webpack_require__.bind(__webpack_require__, 97468));case 2:_yield$import2=_context3.sent;Cosplay=_yield$import2.Cosplay;new Cosplay('.l-content');case 5:case"end":return _context3.stop();}},_callee3);})));

/***/ }),

/***/ 99292:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('.clubs',()=>{var $menu=$('.b-clubs-menu');var $actionsBlock=$('.b-subposter-actions',$menu);var $inviteBlock=$menu.children('.invite');var $nicknameInput=$('#club_invite_dst_id',$inviteBlock);$('.invite',$actionsBlock).on('click',()=>{$actionsBlock.hide();$inviteBlock.show();$nicknameInput.focus();});$('.cancel',$inviteBlock).on('click',()=>{$actionsBlock.show();$inviteBlock.hide();});$('form',$inviteBlock).on('ajax:success',()=>{$nicknameInput.val('');$('.cancel',$inviteBlock).click();});$nicknameInput.completable().on('autocomplete:success autocomplete:text',(_e,entry)=>{if(entry.constructor===Object&&entry.name){$nicknameInput.val(entry.name);}$nicknameInput.closest('form').submit();}).on('keydown',e=>{if(e.keyCode===27){// esc
$('.cancel',$inviteBlock).click();}});$('.upload input',$menu).on('change',({currentTarget})=>{$(currentTarget).closest('form').submit();});});

/***/ }),

/***/ 38769:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_0__);
/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('.clubs-broadcast',()=>{$('.b-form.new_comment').on('ajax:success',({currentTarget},comment)=>{var nextUrl=$(currentTarget).data('next-url')+'#comment-'+comment.id;turbolinks__WEBPACK_IMPORTED_MODULE_0___default().visit(nextUrl);});});

/***/ }),

/***/ 95256:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('clubs_edit',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,EditStyles;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// links page
if($('.edit-page.links').exists()){$('.anime-suggest').completableVariant();$('.manga-suggest').completableVariant();$('.ranobe-suggest').completableVariant();$('.character-suggest').completableVariant();$('.club-suggest').completableVariant();$('.collection-suggest').completableVariant();}// members page
if($('.edit-page.members').exists()){$('.moderator-suggest').completableVariant();$('.admin-suggest').completableVariant();$('.kick-suggest').completableVariant();$('.ban-suggest').completableVariant();}// styles page
if(!$('.edit-page.styles').exists()){_context.next=8;break;}_context.next=5;return Promise.all(/* import() | edit_styles */[__webpack_require__.e(8096), __webpack_require__.e(7094)]).then(__webpack_require__.bind(__webpack_require__, 90337));case 5:_yield$import=_context.sent;EditStyles=_yield$import.EditStyles;new EditStyles('.b-edit_styles');case 8:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 60646:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var gallery=null;pageUnload('clubs_images',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(gallery){gallery.destroy();gallery=null;}case 1:case"end":return _context.stop();}},_callee);})));pageLoad('clubs_images',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$import,PreloadedGallery;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 79571));case 2:_yield$import=_context2.sent;PreloadedGallery=_yield$import.PreloadedGallery;gallery=new PreloadedGallery('.b-gallery');case 5:case"end":return _context2.stop();}},_callee2);})));

/***/ }),

/***/ 84573:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var gallery=null;pageUnload('clubs_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(gallery){gallery.destroy();gallery=null;}case 1:case"end":return _context.stop();}},_callee);})));pageLoad('clubs_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$import,PreloadedGallery;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!$('.b-gallery').exists()){_context2.next=6;break;}_context2.next=3;return __webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 79571));case 3:_yield$import=_context2.sent;PreloadedGallery=_yield$import.PreloadedGallery;gallery=new PreloadedGallery('.b-gallery');case 6:case"end":return _context2.stop();}},_callee2);})));

/***/ }),

/***/ 83685:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19974);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var tagsApp;pageUnload('collections_new','collections_edit','collections_create','collections_update',()=>{if(tagsApp){tagsApp.$destroy();}});pageLoad('collections_new','collections_edit','collections_create','collections_update',()=>{initVueApp();(0,_p_topics_extended_form__WEBPACK_IMPORTED_MODULE_0__.initTagsApp)('collection').then(app=>tagsApp=app);var $coauthorSuggest=$('.coauthor-suggest');if($coauthorSuggest.length){$coauthorSuggest.completable().on('autocomplete:success',(_e,entry)=>{var $form=$('#new_collection_role');$form.find('#collection_role_user_id').val(entry.id);$form.submit();});}});function enableSaveButtons(){$('[id*="submit_collection"]').removeAttr('disabled');}function initVueApp(){return _initVueApp.apply(this,arguments);}function _initVueApp(){_initVueApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,createApp,_yield$import2,createStore,_yield$import3,CollectionLinks,_yield$import4,storeSchema,collection,autocompleteUrl,maxLinks,store,app;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if($('#vue_collection_links').exists()){_context.next=3;break;}enableSaveButtons();return _context.abrupt("return");case 3:_context.next=5;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 5:_yield$import=_context.sent;createApp=_yield$import.createApp;_context.next=9;return Promise.all(/* import() | vuex */[__webpack_require__.e(8210), __webpack_require__.e(4641)]).then(__webpack_require__.bind(__webpack_require__, 80034));case 9:_yield$import2=_context.sent;createStore=_yield$import2.createStore;_context.next=13;return Promise.all(/* import() */[__webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(828), __webpack_require__.e(848), __webpack_require__.e(4641), __webpack_require__.e(6470), __webpack_require__.e(2882), __webpack_require__.e(8299)]).then(__webpack_require__.bind(__webpack_require__, 31981));case 13:_yield$import3=_context.sent;CollectionLinks=_yield$import3.default;_context.next=17;return __webpack_require__.e(/* import() */ 1788).then(__webpack_require__.bind(__webpack_require__, 1788));case 17:_yield$import4=_context.sent;storeSchema=_yield$import4.default;collection=$('#collection_form').data('collection');autocompleteUrl=$('#collection_form').data('autocomplete_url');maxLinks=$('#collection_form').data('max_links');store=createStore(storeSchema);store.state.collection=collection;app=createApp(CollectionLinks,{maxLinks,autocompleteUrl});app.use(store);app.config.globalProperties.I18n=_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A;app.mount('#vue_collection_links');enableSaveButtons();case 29:case"end":return _context.stop();}},_callee);}));return _initVueApp.apply(this,arguments);}

/***/ }),

/***/ 38259:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('contests_edit',()=>{$('.edit .proposing .hidden').removeClass('hidden');// удаление элемента из опроса
$('form').on('click','input[type=checkbox]',()=>updateMembersCount());$('form .proposing .take').on('click',({currentTarget})=>{$(currentTarget).parent().hide();$('.member-suggest').trigger('autocomplete:success',[{id:$(currentTarget).data('id'),name:$(currentTarget).data('text')}]);$('.member-suggest').trigger('blur');});$('.member-suggest').completableVariant().on('autocomplete:success',(_e,_entry)=>updateMembersCount());updateMembersCount();});// пересчёт числа аниме
function updateMembersCount(){var membersCount=$('#contest_member_ids_').next().find('input:checked').length;$('.members_count').html(_utils_i18n__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.t('frontend.pages.p_contests.candidate',{count:membersCount}));}

/***/ }),

/***/ 73552:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62193);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24418);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('contests_show','contests_edit',()=>{if(!$('.proposing').exists()){return;}$('.proposing .suggestion .show').on('click',({currentTarget})=>{$voters(currentTarget).show();$hide(currentTarget).show();$show(currentTarget).hide();});$('.proposing .suggestion .hide').on('click',({currentTarget})=>{$voters(currentTarget).hide();$hide(currentTarget).hide();$show(currentTarget).show();});$('.proposing .suggestion .show.ajaxable').on('click',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee({currentTarget}){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if($(currentTarget).hasClass('ajaxable')){_context.next=2;break;}return _context.abrupt("return");case 2:$(currentTarget).removeClass('ajaxable');_context.next=5;return _utils_axios__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.get($(currentTarget).data('href'));case 5:_yield$axios$get=_context.sent;data=_yield$axios$get.data;$(currentTarget).trigger('ajax:success',data);case 8:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());$('.proposing .suggestion .show').on('ajax:success',({currentTarget},html)=>{$voters(currentTarget).html(html);});});pageLoad('contests_show',()=>{if(!$('.proposing').exists()){return;}var $suggest=$('.proposing .item-suggest');$suggest.completable().on('autocomplete:success',({currentTarget},entry)=>{$(currentTarget).val(entry.name);$(currentTarget).parents('form').find('#contest_suggestion_item_id').val(entry.id);$(currentTarget).parents('form').submit();});$('.proposing form').on('submit',function(e){if(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()($(this).find('#contest_suggestion_item_id').val())){e.preventDefault();}});});function $voters(node){return $(node).parents('.suggestion').find('.voters-container');}function $hide(node){return $(node).parents('.suggestion').find('.hide');}function $show(node){return $(node).parents('.suggestion').find('.show');}

/***/ }),

/***/ 4150:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('contests_grid',()=>{placeFinal();$(window).on('resize',placeFinal);});pageUnload('contests_grid',()=>{$(window).off('resize',placeFinal);});function placeFinal(){var height;var $grid=$('.contest-grid');var $final=$grid.find('.final');var $top=$grid.find('.winners .round:last-child .entry:first-child');var $bottom=$grid.find('.losers .round:last-child .entry:first-child');// если $bottom - пусто, значит у нас контест без дополнительных раундов
if($bottom.length){height=$bottom.offset().top-$top.offset().top+1;}else{$top=$grid.find('.winners .round:last-child .entry:first-child');$bottom=$grid.find('.winners .round:last-child .entry:last-child p:first-child');height=$bottom.offset().top-$top.offset().top-23;}$final.css({height,width:1,top:$top.offset().top+$top.outerHeight()-1,left:$top.offset().left+$top.outerWidth()});var $entry=$final.find('.entry');$entry.css({marginTop:height/2-$entry.outerHeight()});}

/***/ }),

/***/ 31047:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/lodash/first.js
var first = __webpack_require__(56170);
var first_default = /*#__PURE__*/__webpack_require__.n(first);
// EXTERNAL MODULE: ./node_modules/lodash/last.js
var last = __webpack_require__(68090);
var last_default = /*#__PURE__*/__webpack_require__.n(last);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/axios.js
var axios = __webpack_require__(24418);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/view.js
var view = __webpack_require__(27349);
// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/in_new_tab.js
var in_new_tab = __webpack_require__(70416);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/contests/match.js
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var VOTE_LEFT='left';var VOTE_RIGHT='right';var VOTE_ABSTAIN='abstain';class ContestMatch extends view/* default */.A{initialize(vote,roundView){this.roundView=roundView;this.model=this.$root.data('model');this.vote=vote||{};this.$left=this.$('.match-member[data-variant="left"]');this.$right=this.$('.match-member[data-variant="right"]');this.$('.next-match').on('click',()=>this._toNextMatch());this.$('.prev-match').on('click',()=>this._toPrevMatch());this.$('.action .to-next-not-voted').on('click',()=>this._toNextNotVotedMatch());this.$('.match-member img').on('click',e=>this._voteClick(e));this.$('.match-member').on('ajax:success',e=>this._voteMember(e));this.$('.action .abstain').on('ajax:success',()=>this._abstain());if(this.isStarted){this.$('.match-member .b-catalog_entry').hover(e=>{if(this.vote.vote){return;}this.$('.match-member').addClass('unhovered');$(e.target).closest('.match-member').removeClass('unhovered').addClass('hovered');},()=>this.$('.match-member').removeClass('hovered unhovered'));this._setVote(this.vote.vote);}this.initialized=true;}get isStarted(){return this.model.state==='started';}// handlers
_toNextMatch(){this.roundView.switchMatch(this.roundView.nextMatchId(this.model.id));}_toPrevMatch(){this.roundView.switchMatch(this.roundView.prevMatchId(this.model.id));}_toNextNotVotedMatch(){this.roundView.switchMatch(this._nextMatchId());}_abstain(){this._vote(VOTE_ABSTAIN);}_voteMember({target}){$(target).find('.b-catalog_entry').yellowFade();this._vote($(target).data('variant'));}_voteClick(e){if((0,in_new_tab/* default */.A)(e)){return;}e.preventDefault();e.stopImmediatePropagation();if(this.isStarted){$(e.target).closest('.match-member').callRemote();}}// private functions
_vote(vote){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this._setVote(vote);if(!_this._nextMatchId()){_context.next=5;break;}_context.next=4;return (0,delay/* default */.Ay)(500);case 4:_this._toNextNotVotedMatch();case 5:case"end":return _context.stop();}},_callee);}))();}_setVote(vote){this.roundView.setVote(this.model.id,vote);this.vote.vote=vote;this.$left.toggleClass('voted',vote===VOTE_LEFT).toggleClass('unvoted',!!(vote&&vote!==VOTE_LEFT));this.$right.toggleClass('voted',vote===VOTE_RIGHT).toggleClass('unvoted',!!(vote&&vote!==VOTE_RIGHT));this.$('.invitation').toggle(!vote);this.$('.vote-voted').toggle(!!(vote&&vote!==VOTE_ABSTAIN));this.$('.vote-abstained').toggle(vote===VOTE_ABSTAIN);this.$('.thanks').toggle(!!(vote&&!this._nextMatchId()));this.$('.action .abstain').toggleClass('hidden',vote===VOTE_ABSTAIN);this.$('.action .to-next-not-voted').toggleClass('hidden',!this._nextMatchId());}_nextMatchId(){return this.roundView.nextNotVotedMatchId(this.model.id);}}
;// CONCATENATED MODULE: ./app/packs/javascripts/views/contests/round.js
/* provided dependency */ var round_$ = __webpack_require__(74692);
var NEXT_MATCH_SELECTOR='.match-day .match-link.started:not(.voted-left):not(.voted-right):not(.voted-abstain)';var STARTED_MATCH_SELECTOR='.match-day .match-link.started';var ANY_MATCH_SELECTOR='.match-day .match-link';class ContestRound extends view/* default */.A{initialize(votes){this.model=this.$root.data('model');this.votes=votes||[];this.$matchContainer=this.$('.match-container');this._setVotes(this.votes);this.switchMatch(this._initialMatchId());this.$('.match-day .match-link').on('click',e=>this.switchMatch(round_$(e.currentTarget).data('id')));}// public functions
switchMatch(matchId){var $match=this._$matchLine(matchId);this.$matchContainer.addClass('b-ajax');axios/* default */.A.get($match.data('match_url')).then(response=>{this.$('.match-link.active').removeClass('active');$match.addClass('active');this._matchLoaded(matchId,response.data);});}setVote(matchId,vote){this._$matchLine(matchId).removeClass('voted-left voted-rigth voted-abstain').addClass(`voted-${vote}`);}nextMatchId(matchId){var index=this.model.matches.findIndex(v=>v.id===matchId);return(this.model.matches[index+1]||first_default()(this.model.matches)).id;}prevMatchId(matchId){var index=this.model.matches.findIndex(v=>v.id===matchId);return(this.model.matches[index-1]||last_default()(this.model.matches)).id;}nextNotVotedMatchId(matchId){var nextNotVotedMatch=this.votes.find(v=>v.match_id!==matchId&&!v.vote);return nextNotVotedMatch?nextNotVotedMatch.match_id:null;}// private functions
_setVotes(votes){Object.entries(votes).forEach(([_,vote])=>{if(vote.vote){this.setVote(vote.match_id,vote.vote);}});}_$matchLine(matchId){return round_$(`.match-day .match-link[data-id=${matchId}]`);}_initialMatchId(){return this.$root.data('match_id')||this.$(NEXT_MATCH_SELECTOR).first().data('id')||this.$(STARTED_MATCH_SELECTOR).first().data('id')||this.$(ANY_MATCH_SELECTOR).first().data('id');}_matchLoaded(matchId,html){var $html=round_$(html).process();var $match=$html.filter('.b-contest_match');var vote=this.votes.find(v=>v.match_id===matchId);this.$matchContainer.removeClass('b-ajax').html($html);new ContestMatch($match,vote,this);var $firstMember=this.$('.match-members .match-member').first();if(!$firstMember.is(':appeared')){round_$.scrollTo($firstMember);}var pageUrl=$match.data('page_url');if(pageUrl){window.history.replaceState({turbolinks:true,url:pageUrl},'',pageUrl);}}}
;// CONCATENATED MODULE: ./app/packs/javascripts/pages/p-contests/show.js
/* provided dependency */ var show_$ = __webpack_require__(74692);
pageLoad('contests_show',()=>{if(!show_$('.contest_round').length){return;}new ContestRound(show_$('.contest_round'),gon.votes);});

/***/ }),

/***/ 75917:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('critiques_new','critiques_edit','critiques_create','critiques_update',()=>{$('.b-rate').rateable();});

/***/ }),

/***/ 89611:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var _utils_load_image__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(75612);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('dashboards_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var $node;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!$('.p-dashboards-show .v2').length){_context.next=2;break;}return _context.abrupt("return");case 2:$('.l-page').on('click','.user_list .switch',({currentTarget})=>{$(currentTarget).closest('.list-type').toggleClass('hidden').siblings('.list-type').toggleClass('hidden');});_context.next=5;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(500);case 5:(0,_utils_load_image__WEBPACK_IMPORTED_MODULE_1__/* .loadImagesFinally */ .U6)('.cc-news').then(()=>{var $userNews=$('.c-news_topics');var $generatedNews=$('.c-generated_news');alignBlocks($userNews,$generatedNews);});_context.next=8;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(500);case 8:$node=$('.y-sponsored');if($node.children().length){$node.addClass('block');}case 10:case"end":return _context.stop();}},_callee);})));function alignBlocks($userNews,$generatedNews){var $topics=$generatedNews.find('.b-topic');var height=$userNews.outerHeight();if($topics.length&&height<$generatedNews.outerHeight()){$topics.last().remove();alignBlocks($userNews,$generatedNews);}}

/***/ }),

/***/ 54398:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79308);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var swipers=[];pageLoad('dashboards_show',()=>{if(!$('.p-dashboards-show .v2').length){return;}reInitSwipers();$(document).on('resize:debounced orientationchange',reInitSwipers);var createTopic=document.querySelector('.create-topic');if(createTopic){createTopic.href=createTopic.href.replace('USER_ID',window.SHIKI_USER.id);}$('.fc-user-sections .f-user').on('postloaded:success',()=>{var $devise=$('.fc-user-sections .f-user .devise');if($devise.length&&!location.hostname.match(/^shikimori.(?:one|me|local)$/)){function part2(){return'__UNEXISTING'in window?window.__UNEXISTING:'mori';};$devise.html('<p class="auth-alert">Авторизация возможна только на <a href="https://shiki'+part2()+'.me">shiki'+part2()+'.me</a> домене</p>');}});});pageUnload('dashboards_show',()=>{if(!$('.p-dashboards-show .v2').length){return;}destroySwipers();$(document).off('resize:debounced orientationchange',reInitSwipers);});function reInitSwipers(){return _reInitSwipers.apply(this,arguments);}function _reInitSwipers(){_reInitSwipers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,Swiper;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:destroySwipers();if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_0__.isMobile)()){_context.next=3;break;}return _context.abrupt("return");case 3:_context.next=5;return __webpack_require__.e(/* import() | swiper */ 545).then(__webpack_require__.bind(__webpack_require__, 7913));case 5:_yield$import=_context.sent;Swiper=_yield$import.default;if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_0__.isMobile)()){swipers.push(new Swiper('.fc-ongoings',{slidesPerView:'auto',slidesPerColumn:1,spaceBetween:0,wrapperClass:'inner',slideClass:'b-catalog_entry',navigation:{nextEl:'.mobile-slider-next',prevEl:'.mobile-slider-prev'}}));swipers.push(new Swiper('.db-updates',{slidesPerView:'auto',slidesPerColumn:2,spaceBetween:30,wrapperClass:'inner',slideClass:'db-update',navigation:{nextEl:'.mobile-slider-next',prevEl:'.mobile-slider-prev'}}));}if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_0__.isPhone)()){swipers.push(new Swiper('.content-updates',{slidesPerView:'auto',slidesPerColumn:3,spaceBetween:30,wrapperClass:'inner',slideClass:'b-news_line-topic',navigation:{nextEl:'.mobile-slider-next',prevEl:'.mobile-slider-prev'}}));swipers.push(new Swiper('.hot-topics',{slidesPerView:'auto',slidesPerColumn:3,spaceBetween:30,wrapperClass:'inner',slideClass:'b-news_line-topic',navigation:{nextEl:'.mobile-slider-next',prevEl:'.mobile-slider-prev'}}));}case 9:case"end":return _context.stop();}},_callee);}));return _reInitSwipers.apply(this,arguments);}function destroySwipers(){swipers.forEach(swiper=>swiper.destroy());swipers=[];}

/***/ }),

/***/ 61286:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('.db_entries-edit',()=>{$('.merge_target_id').each((_index,node)=>{var $merge=$(node);var $form=$merge.closest('form');var $submit=$form.find('input[type=submit]');var $targetId=$form.find('input[name=target_id]');var $episode=$form.find('input[name=episode]');$form.find('input[data-autocomplete]').completable().on('autocomplete:success',({currentTarget},entry)=>{var type=$merge.data('type');var pluralType=`${type.toLowerCase()}s`.replace('ranobes','ranobe').replace('persons','people');$targetId.val(entry.id);$merge.append(`
            <a href='/${pluralType}/${entry.id}' class='bubbled b-link'>
              ${entry.name}
            </a>
          `).process();$(currentTarget).remove();syncSubmit($submit,$targetId,$episode);});$form.on('submit',e=>{if(!isValid($targetId,$episode)){e.preventDefault();e.stopImmediatePropagation();}});$episode.on('keyup change',()=>{syncSubmit($submit,$targetId,$episode);});});});function syncSubmit($submit,$targetId,$episode){$submit.prop('disabled',!isValid($targetId,$episode));}function isValid($targetId,$episode){return!!$targetId.val()&&(!$episode.length||!!$episode.val());}

/***/ }),

/***/ 56069:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initArrayFieldApp: () => (/* binding */ initArrayFieldApp)
/* harmony export */ });
/* harmony import */ var lodash_isString__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85015);
/* harmony import */ var lodash_isString__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}/* eslint-disable vue/one-component-per-file */var gallery;pageUnload('.db_entries-edit_field',()=>{if(gallery){gallery.destroy();gallery=null;}});pageLoad('.db_entries-edit_field',()=>{var $description=$('.edit-page.description_ru, .edit-page.description_en');if($description.exists()){$('form',$description).on('submit',function(){var $form=$(this);var combineDescription=function combineDescription(text,source){if(source){return`${text}[source]${source}[/source]`;}return`${text}`;};if($description.hasClass('description_ru')){$('[name$="description_ru]"]',$form).val(combineDescription($('.shiki_editor-selector[data-field_name$="description_ru_text]"]',$form).view().text,$('[name$="description_ru_source]"]',$form).val()));}else{$('[name$="description_en]"]',$form).val(combineDescription($('.shiki_editor-selector[data-field_name$="description_en_text]"]',$form).view().text,$('[name$="description_en_source]"]',$form).val()));}});}if($('.edit-page.screenshots').exists()){$('.c-screenshot').shikiImage();initSortableApp($('.screenshots-positioner'));initUploaderApp($('.screenshots-uploader'));}if($('.edit-page.videos').exists()){$('.videos-deleter .b-video').imageEditable();}if($('.edit-page.imageboard_tag').exists()){var $gallery=$('.b-gallery');var galleryHtml=$gallery.html();if($gallery.data('imageboard_tag')){__webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 18619)).then(({ImageboardsGallery})=>{if(gallery){gallery.destroy();}gallery=new ImageboardsGallery($gallery);});}$('#anime_imageboard_tag, #manga_imageboard_tag, #character_imageboard_tag').completable().on('autocomplete:success autocomplete:text',function(e,result){this.value=lodash_isString__WEBPACK_IMPORTED_MODULE_0___default()(result)?result:result.value;$gallery.data({imageboard_tag:this.value});$gallery.html(galleryHtml);__webpack_require__.e(/* import() | galleries */ 3637).then(__webpack_require__.bind(__webpack_require__, 18619)).then(({ImageboardsGallery})=>{if(gallery){gallery.destroy();}gallery=new ImageboardsGallery($gallery);});});}if($('.edit-page.genre_ids').exists()||$('.edit-page.genre_v2_ids').exists()){var $currentGenres=$('.c-current_genres').children().last();var $allGenres=$('.c-all_genres');$currentGenres.on('click','.remove',function(){var $genre=$(this).closest('.genre').remove();$allGenres.find(`#${$genre.attr('id')}`).removeClass('included').yellowFade();});$currentGenres.on('click','.up',function(){var $genre=$(this).closest('.genre');var $prior=$genre.prev();$genre.detach().insertBefore($prior).yellowFade();});$currentGenres.on('click','.down',function(){var $genre=$(this).closest('.genre');var $next=$genre.next();$genre.detach().insertAfter($next).yellowFade();});$allGenres.on('click','.name',function(){var $genre=$(this).closest('.genre');if($genre.hasClass('included')){$currentGenres.find(`#${$genre.attr('id')} .remove`).click();return;}$genre.clone().appendTo($currentGenres).yellowFade();$genre.addClass('included');});$('form.new_version').on('submit',()=>{var $itemDiff=$('.item_diff');var newIds=$currentGenres.find('.c-column.genre').map((_index,node)=>parseInt(node.id)).toArray();var currentIds=$itemDiff.data('current_ids');var diff={[$itemDiff.data('field')]:[currentIds,newIds]};$itemDiff.find('input').val(JSON.stringify(diff));});}if($('.edit-page.external_links').exists()){initExternalLinksApp();}if($('.edit-page.poster').exists()){initEditPosterApp();}var ARRAY_FIELDS=['synonyms','licensors','coub_tags','fansubbers','fandubbers','desynced','options'];if($(ARRAY_FIELDS.map(v=>`.edit-page.${v}`).join(',')).exists()){initArrayFieldApp();}});function initExternalLinksApp(){return _initExternalLinksApp.apply(this,arguments);}function _initExternalLinksApp(){_initExternalLinksApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,createApp,_yield$import2,createStore,_yield$import3,ExternalLinks,_yield$import4,storeSchema,$app,values,store,app,externalLinksApp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 2:_yield$import=_context.sent;createApp=_yield$import.createApp;_context.next=6;return Promise.all(/* import() | vuex */[__webpack_require__.e(8210), __webpack_require__.e(4641)]).then(__webpack_require__.bind(__webpack_require__, 80034));case 6:_yield$import2=_context.sent;createStore=_yield$import2.createStore;_context.next=10;return Promise.all(/* import() */[__webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(828), __webpack_require__.e(848), __webpack_require__.e(4641), __webpack_require__.e(6470), __webpack_require__.e(2882), __webpack_require__.e(2803)]).then(__webpack_require__.bind(__webpack_require__, 30581));case 10:_yield$import3=_context.sent;ExternalLinks=_yield$import3.default;_context.next=14;return __webpack_require__.e(/* import() */ 8590).then(__webpack_require__.bind(__webpack_require__, 98590));case 14:_yield$import4=_context.sent;storeSchema=_yield$import4.default;$app=$('#vue_external_links');values=$app.data('external_links').map(v=>_objectSpread(_objectSpread({},v),{},{key:v.id}));store=createStore(storeSchema);store.state.collection=values;app=createApp(ExternalLinks,{kindOptions:$app.data('kind_options'),resourceType:$app.data('resource_type'),entryType:$app.data('entry_type'),entryId:$app.data('entry_id'),watchOnlineKinds:$app.data('watch_online_kinds')});app.use(store);app.config.globalProperties.I18n=_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A;externalLinksApp=app.mount('#vue_external_links');$('.external_link-wrapper .delete').on('click',({currentTarget})=>{var $root=$(currentTarget).closest('.external_link-wrapper');externalLinksApp.cleanupLink({kind:$root.find('select').val(),url:$root.find('input').val()});});case 25:case"end":return _context.stop();}},_callee);}));return _initExternalLinksApp.apply(this,arguments);}function initArrayFieldApp(){return _initArrayFieldApp.apply(this,arguments);}function _initArrayFieldApp(){_initArrayFieldApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$import5,createApp,nextTick,_yield$import6,createStore,_yield$import7,ArrayField,_yield$import8,storeSchema,$app,values,store,app;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 2:_yield$import5=_context3.sent;createApp=_yield$import5.createApp;nextTick=_yield$import5.nextTick;_context3.next=7;return Promise.all(/* import() | vuex */[__webpack_require__.e(8210), __webpack_require__.e(4641)]).then(__webpack_require__.bind(__webpack_require__, 80034));case 7:_yield$import6=_context3.sent;createStore=_yield$import6.createStore;_context3.next=11;return Promise.all(/* import() */[__webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(828), __webpack_require__.e(848), __webpack_require__.e(4641), __webpack_require__.e(6470), __webpack_require__.e(2882), __webpack_require__.e(3536)]).then(__webpack_require__.bind(__webpack_require__, 71050));case 11:_yield$import7=_context3.sent;ArrayField=_yield$import7.default;_context3.next=15;return __webpack_require__.e(/* import() */ 8590).then(__webpack_require__.bind(__webpack_require__, 98590));case 15:_yield$import8=_context3.sent;storeSchema=_yield$import8.default;$app=$('#vue_app');values=$app.data('values');store=createStore(storeSchema);store.state.collection=values.map((value,index)=>({key:index,value}));app=createApp(ArrayField,{resourceType:$app.data('resource_type'),field:$app.data('field'),autocompleteUrl:$app.data('autocomplete_url'),autocompleteType:$app.data('autocomplete_type')});app.use(store);app.config.globalProperties.I18n=_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A;app.mount('#vue_app');$('form').one('submit',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();e.stopImmediatePropagation();_context2.next=4;return store.dispatch('cleanup');case 4:_context2.next=6;return nextTick();case 6:e.currentTarget.submit();case 7:case"end":return _context2.stop();}},_callee2);}));return function(_x3){return _ref.apply(this,arguments);};}());case 26:case"end":return _context3.stop();}},_callee3);}));return _initArrayFieldApp.apply(this,arguments);}function initSortableApp(_x){return _initSortableApp.apply(this,arguments);}function _initSortableApp(){_initSortableApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4($node){var _yield$import9,Sortable;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if($node.length){_context4.next=2;break;}return _context4.abrupt("return");case 2:$('form',$node).on('submit',()=>{var $images=$('.c-screenshot:not(.deleted) img',$node);var ids=$images.map(function(){return $(this).data('id');});$node.find('#entry_ids').val($.makeArray(ids).join(','));});_context4.next=5;return __webpack_require__.e(/* import() */ 848).then(__webpack_require__.bind(__webpack_require__, 10246));case 5:_yield$import9=_context4.sent;Sortable=_yield$import9.default;new Sortable($node.find('.cc')[0],{draggable:'.b-image',handle:'.drag-handle'});case 8:case"end":return _context4.stop();}},_callee4);}));return _initSortableApp.apply(this,arguments);}function initUploaderApp(_x2){return _initUploaderApp.apply(this,arguments);}function _initUploaderApp(){_initUploaderApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5($node){var _yield$import10,FileUploader;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Promise.all(/* import() */[__webpack_require__.e(4200), __webpack_require__.e(1600)]).then(__webpack_require__.bind(__webpack_require__, 2470));case 2:_yield$import10=_context5.sent;FileUploader=_yield$import10.FileUploader;new FileUploader($node[0],{isResetAfterUpload:false}).on('upload:file:success',(_e,{response})=>$(response.html).appendTo($('.cc',$node)).shikiImage()).on('upload:complete',()=>$node.find('.thank-you').show());case 5:case"end":return _context5.stop();}},_callee5);}));return _initUploaderApp.apply(this,arguments);}function initEditPosterApp(){return _initEditPosterApp.apply(this,arguments);}function _initEditPosterApp(){_initEditPosterApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var _yield$import11,createApp,_yield$import12,PosterField,$app,$form,$cropData,$posterDataUri,$posterId,app,posterFieldApp;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 2:_yield$import11=_context6.sent;createApp=_yield$import11.createApp;_context6.next=6;return Promise.all(/* import() */[__webpack_require__.e(8096), __webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(4480), __webpack_require__.e(1621)]).then(__webpack_require__.bind(__webpack_require__, 61621));case 6:_yield$import12=_context6.sent;PosterField=_yield$import12.default;$app=$('#vue_app');$form=$app.closest('form');$cropData=$form.find('input[id$=_poster_crop_data]');$posterDataUri=$form.find('input[id$=_poster_data_uri]');$posterId=$form.find('input[id$=_poster_id]');console.log($app.data('is-two_lines_hint'));app=createApp(PosterField,{src:$app.data('src'),previewTemplateHTML:$('.template-html').html(),cropData:JSON.parse($cropData.val()),posterId:parseInt($posterId.val()),previewWidth:$app.data('preview-width'),previewHeight:$app.data('preview-height'),isTwoLinesHint:$app.data('is-two_lines_hint')});app.config.globalProperties.I18n=_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A;posterFieldApp=app.mount('#vue_app');$form.on('submit',({currentTarget})=>{$posterId.val(posterFieldApp.posterId());$cropData.val(JSON.stringify(posterFieldApp.cropData()));$posterDataUri.val(posterFieldApp.toDataURI());});case 18:case"end":return _context6.stop();}},_callee6);}));return _initEditPosterApp.apply(this,arguments);}

/***/ }),

/***/ 90193:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('dialogs_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var editor,_gon,reply,url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(25);case 2:editor=$('.shiki_editor-selector').view();_context.next=5;return editor.initialization.promise;case 5:if(!editor.cacheProcessed){_context.next=8;break;}_context.next=8;return editor.cacheProcessed.promise;case 8:_gon=gon,reply=_gon.reply;if(gon.reply){editor.replyComment(reply);editor.reprocessCache();url=window.location.href.replace(/\/reply\/.*$/,'');if(url!==window.location.href){window.history.replaceState({turbolinks:true,url},'',url);}}else{editor.focus();}case 10:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 22547:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_1__);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('list_imports_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!$('.b-nothing_here').exists()){_context.next=5;break;}url=document.location.href;_context.next=4;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(5000);case 4:if(url===document.location.href){turbolinks__WEBPACK_IMPORTED_MODULE_1___default().visit(document.location.href);}case 5:// сворачиваем все списки
$('.b-options-floated.collapse .action').click();case 6:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 38518:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('messages_index',()=>{process();$('.l-page').on('postloader:success',process);});function process(){$('.item-request-confirm, .item-request-reject').on('ajax:success',({currentTarget})=>{readMessage($(currentTarget).closest('.b-message'));});$('.item-request-reject.friend-request').on('click',({currentTarget})=>{readMessage($(currentTarget).closest('.b-message'));});}function readMessage($message){var $appearMarker=$message.find('.b-appear_marker').data({disabled:false});$message.trigger('appear',[$appearMarker,true]);$message.find('.main-controls').children(':not(.item-delete)').remove();$message.find('.main-controls').children('.item-delete').show();}

/***/ }),

/***/ 53269:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/tiny-uri/dist/tiny-uri.js
var tiny_uri = __webpack_require__(73148);
// EXTERNAL MODULE: ./node_modules/turbolinks/dist/turbolinks.js
var turbolinks = __webpack_require__(6224);
var turbolinks_default = /*#__PURE__*/__webpack_require__.n(turbolinks);
// EXTERNAL MODULE: ./node_modules/js-cookie/dist/js.cookie.mjs
var js_cookie = __webpack_require__(18987);
// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
// EXTERNAL MODULE: ./app/packs/javascripts/pages/p-db_entries/edit_field.js
var edit_field = __webpack_require__(56069);
// EXTERNAL MODULE: ./app/packs/javascripts/views/search/collection.js
var collection = __webpack_require__(11442);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/check_height.js
var check_height = __webpack_require__(41696);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/view.js
var view = __webpack_require__(27349);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/dayjs.js
var dayjs = __webpack_require__(13269);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/application/date_picker.js
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var INPUT_FORMAT='YYYY-MM-DD';class DatePicker extends view/* default */.A{initialize(){Promise.all(/* import() | pikaday */[__webpack_require__.e(8096), __webpack_require__.e(2974)]).then(__webpack_require__.bind(__webpack_require__, 91899));this.initPromise=Promise.all(/* import() | pikaday */[__webpack_require__.e(8096), __webpack_require__.e(2974)]).then(__webpack_require__.t.bind(__webpack_require__, 97697, 23)).then(Pikaday=>this._initPicker(Pikaday.default));}set(value,silent){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var inputValue;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.initPromise;case 2:if(value){inputValue=(0,dayjs["default"])(value).format(INPUT_FORMAT);}_this.root.value=inputValue;if(!silent){_this.$root.trigger('date:picked');}case 5:case"end":return _context.stop();}},_callee);}))();}_initPicker(Pikaday){var initialValue;new Pikaday({field:this.root,onSelect:date=>this.set(date),firstDay:1,maxDate:new Date(),i18n:this._i18n()});// устанавливает после создания Pikaday, т.к. плагин перетирает значение
// инпута и ставит дату в своём собственном форматировании,
// а не в INPUT_FORMAT
if(this.root.value){initialValue=(0,dayjs["default"])(this.root.value).toDate();}if(initialValue){this.set(initialValue,true);}this.$root.on('keydown',e=>{if(e.keyCode===13){this.$root.trigger('date:picked');}});}_i18n(){var localeData=(0,dayjs["default"])().localeData();return{months:localeData.months(),weekdays:localeData.weekdays(),weekdaysShort:localeData.weekdaysShort()};}}
// EXTERNAL MODULE: ./app/packs/javascripts/utils/animated.js + 1 modules
var animated = __webpack_require__(7084);
;// CONCATENATED MODULE: ./app/packs/javascripts/pages/p-moderations.js
/* provided dependency */ var $ = __webpack_require__(74692);
function p_moderations_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */p_moderations_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function p_moderations_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function p_moderations_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){p_moderations_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){p_moderations_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function datePicker(){if(!$('.date-filter').exists()){return;}new DatePicker('.date-filter').on('date:picked',function(){var newUrl=new tiny_uri/* default */.A(window.location.href).query.set('created_on',this.value||null).toString();turbolinks_default().visit(newUrl);});}pageLoad('moderations_show',()=>{var $form=$('form#sync');if(js_cookie/* default */.A.get('sync_type')){$form.find('select').val(js_cookie/* default */.A.get('sync_type'));}$form.find('select').on('change',({currentTarget})=>js_cookie/* default */.A.set('sync_type',currentTarget.value,{expires:1,path:'/'}));$form.find('input,select').on('change keyup paste',()=>{var type=$('form#sync select').val();var id=$('form#sync input[type=text]').val();$form.prop('action',$form.data('url_template').replace('anime',type).replace('persons','people'));$form.find('input[type=submit]').prop('disabled',!id);}).trigger('change');});pageLoad('versions_index','users_index',datePicker);pageLoad('versions_show','user_rate_logs_show',/*#__PURE__*/p_moderations_asyncToGenerator(/*#__PURE__*/p_moderations_regeneratorRuntime().mark(function _callee(){return p_moderations_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay/* default */.Ay)();case 2:// need log entries to be processed first
$('.collapsed.spoiler','.b-log_entry, .b-user_rate_log').click();case 3:case"end":return _context.stop();}},_callee);})));pageLoad('.moderations-index',()=>{(0,check_height/* default */.A)($('.b-brief'),{maxHeight:150});$('.expand-all').on('click',function(){$(this).parent().next().next().find('.collapsed.spoiler:visible').click();$(this).remove();});$('.l-page').on('ajax:before','.b-log_entry .link.destroy',/*#__PURE__*/function(){var _ref2=p_moderations_asyncToGenerator(/*#__PURE__*/p_moderations_regeneratorRuntime().mark(function _callee2({currentTarget}){return p_moderations_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$(currentTarget).closest('.b-log_entry').addClass('b-ajax');case 1:case"end":return _context2.stop();}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}()).on('ajax:success','.b-log_entry .link.destroy',/*#__PURE__*/function(){var _ref3=p_moderations_asyncToGenerator(/*#__PURE__*/p_moderations_regeneratorRuntime().mark(function _callee3({currentTarget}){var $root;return p_moderations_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:$root=$(currentTarget).closest('.b-log_entry');_context3.next=3;return (0,animated/* animatedCollapse */.F)($root[0]);case 3:$root.remove();case 4:case"end":return _context3.stop();}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}()).on('ajax:complete','.b-log_entry .link.destroy',/*#__PURE__*/function(){var _ref4=p_moderations_asyncToGenerator(/*#__PURE__*/p_moderations_regeneratorRuntime().mark(function _callee4({currentTarget}){return p_moderations_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:$(currentTarget).closest('.b-log_entry').removeClass('b-ajax');case 1:case"end":return _context4.stop();}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}());var $form=$('form#versions_form').removeClass('b-ajax');if(!$form.length){return;}['user_id','moderator_id'].forEach(type=>{var $input=$(`#version_${type}`);var $suggest=$(`.${type}-suggest`);var $placeholder=$suggest.parent().find('.placeholder');$suggest.completable({minChars:1}).on('autocomplete:success',(_e,{id,name,url})=>{$input.val(id);$suggest.addClass('hidden');$placeholder.removeClass('hidden');$placeholder.find('.nickname').html(`<a href="${url}">${name}</a>`);$form.addClass('b-ajax').submit();});$placeholder.find('.b-js-action.remove').on('click',()=>{$input.val('');$placeholder.addClass('hidden');$suggest.removeClass('hidden').val('');$form.addClass('b-ajax').submit();});});$('#version_field').on('change',({currentTarget})=>{var itemType=currentTarget.selectedOptions[0].getAttribute('data-item_type');$('#version_item_type').val(itemType);$form.addClass('b-ajax').submit();});});pageLoad('roles_show',()=>{new collection/* default */.A('.b-collection_search');$('.l-page').on('ajax:before','.b-user',({currentTarget})=>{$(`.b-user[id=${currentTarget.id}]`).addClass('b-ajax');}).on('ajax:success','.b-user',({currentTarget},{content})=>{$(`.b-user[id=${currentTarget.id}]`).replaceWith(content);});});// users#index matches this too
pageLoad('users_index',()=>{if($('.b-collection_search').length){new collection/* default */.A('.b-collection_search');}});pageLoad('studios_edit','publishers_edit',()=>{(0,edit_field.initArrayFieldApp)();});pageLoad('posters_index',()=>{$('.posters').on('ajax:before','.poster-cell',({currentTarget})=>{currentTarget.classList.add('b-ajax');}).on('ajax:success','.poster-cell',({currentTarget},html)=>{var $html=$(html);$(currentTarget).replaceWith($html);$html.process();});});

/***/ }),

/***/ 47017:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_check_height__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41696);
/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('oauth_applications_new','oauth_applications_create','oauth_applications_edit','oauth_applications_update',()=>{$('.oauth_application_redirect_uri .hint .sample').on('click',({currentTarget})=>{$('.oauth_application_redirect_uri input').val(currentTarget.innerHTML);});});pageLoad('oauth_applications_show',()=>{(0,_utils_check_height__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)($('.description'),{maxHeight:200});});

/***/ }),

/***/ 17566:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dailyChartOptions: () => (/* binding */ dailyChartOptions)
/* harmony export */ });
/* harmony import */ var lodash_first__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56170);
/* harmony import */ var lodash_first__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_first__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55364);
/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('pages_about',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var Highcharts,_yield$import,colors;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.t.bind(__webpack_require__, 8524, 23));case 2:Highcharts=_context.sent;_context.next=5;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.bind(__webpack_require__, 34151));case 5:_yield$import=_context.sent;colors=_yield$import.colors;Highcharts.getOptions().colors.length=0;colors.forEach(color=>Highcharts.getOptions().colors.push(color));trafficChart(Highcharts);commentsChart(Highcharts);usersChart(Highcharts);case 12:case"end":return _context.stop();}},_callee);})));function commentsChart(Highcharts){var data=$('.comments-chart').data('stats');var color=Highcharts.getOptions().colors[3];$('.comments-chart').highcharts(dailyChartOptions({series:[{name:_utils_i18n__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.t('frontend.about.comments_per_day'),pointInterval:24*3600*1000,pointStart:new Date(lodash_first__WEBPACK_IMPORTED_MODULE_0___default()(data).date).getTime(),data:data.map(v=>v.count),color,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,color],[1,new Highcharts.Color(color).setOpacity(0).get('rgba')]]}}],legend:{enabled:false}}));}function usersChart(Highcharts){var data=$('.users-chart').data('stats');var color=Highcharts.getOptions().colors[4];$('.users-chart').highcharts(dailyChartOptions({series:[{name:_utils_i18n__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.t('frontend.about.new_users_per_day'),pointInterval:24*3600*1000,pointStart:new Date(lodash_first__WEBPACK_IMPORTED_MODULE_0___default()(data).date).getTime(),data:data.map(v=>[new Date(v.date).getTime(),v.count]),color,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,color],[1,new Highcharts.Color(color).setOpacity(0).get('rgba')]]}}],legend:{enabled:false}}));}function trafficChart(Highcharts){var data=$('.traffic-chart').data('stats');var colors=[Highcharts.getOptions().colors[2],Highcharts.getOptions().colors[1],Highcharts.getOptions().colors[0]];return $('.traffic-chart').highcharts(dailyChartOptions({series:[{name:_utils_i18n__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.t('frontend.about.views'),pointInterval:24*3600*1000,pointStart:new Date(lodash_first__WEBPACK_IMPORTED_MODULE_0___default()(data).date).getTime(),data:data.map(v=>v.page_views),visible:false,color:colors[0],fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,colors[0]],[1,new Highcharts.Color(colors[0]).setOpacity(0).get('rgba')]]}},{name:_utils_i18n__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.t('frontend.about.visits'),pointInterval:24*3600*1000,pointStart:new Date(lodash_first__WEBPACK_IMPORTED_MODULE_0___default()(data).date).getTime(),data:data.map(v=>v.visits),visible:false,color:colors[1],fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,colors[1]],[1,new Highcharts.Color(colors[1]).setOpacity(0).get('rgba')]]}},{name:_utils_i18n__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.t('frontend.about.unique_visitors'),pointInterval:24*3600*1000,pointStart:new Date(lodash_first__WEBPACK_IMPORTED_MODULE_0___default()(data).date).getTime(),data:data.map(v=>v.visitors),color:colors[2],fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,colors[2]],[1,new Highcharts.Color(colors[2]).setOpacity(0).get('rgba')]]}}]}));}function dailyChartOptions(options,{isStacking}={}){return lodash_merge__WEBPACK_IMPORTED_MODULE_1___default()({chart:{zoomType:'x',type:'areaspline'},title:null,xAxis:{type:'datetime',title:null,maxZoom:14*24*3600000,dateTimeLabelFormats:{millisecond:'%H:%M:%S.%L',second:'%H:%M:%S',minute:'%H:%M',hour:'%H:%M',day:'%e. %b',week:'%e. %b',month:'%b, %Y',year:'%Y'}},yAxis:{title:null,gridLineColor:'#eaeaea',min:0},tooltip:{shared:true},legend:{borderRadius:0,borderWidth:0},plotOptions:{areaspline:{stacking:isStacking?'normal':null,lineWidth:1,fillOpacity:0.5,marker:{enabled:false},shadow:false,states:{hover:{lineWidth:1}},threshold:null}},credits:false},options);}

/***/ }),

/***/ 37642:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('pages_development',()=>{var $ajax=$('.b-ajax');var $iframe=$('iframe');var height=$(window).height()-$ajax.offset().top-5;$ajax.css({width:'100%',height:height-10});$iframe.prop({width:'100%',height});$iframe.on('load',()=>{$ajax.hide();$iframe.removeClass('hidden');});});

/***/ }),

/***/ 21988:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('pages_hentai',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$('.edit-page').on('postloader:success',process);process();$('.edit-page').on('click','.delete-all',({currentTarget})=>{if(!window.confirm('Точно?')){return;}$(currentTarget).prev().find('.confirm').click();});case 3:case"end":return _context.stop();}},_callee);})));function process(){$('.c-screenshot').shikiImage();}

/***/ }),

/***/ 80476:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80473);
/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('pages_oauth',()=>{$('select#oauth_application_id, input[name="scopes[]"]').on('change',({currentTarget})=>{$('.l-page').addClass('b-ajax');$(currentTarget).closest('form').submit();});$('#request_acces_token').on('click',({currentTarget})=>{var $node=$(currentTarget);var $formatResponse=$('.access-token-response').html('').addClass('b-ajax').show();axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.request({url:$node.data('token_url'),method:'post',headers:{},data:{grant_type:'authorization_code',client_id:$node.data('client_id'),client_secret:$node.data('client_secret'),code:$node.data('code'),redirect_uri:$node.data('redirect_uri')},responseType:'json',validateStatus(status){return status>=200&&status<300||status===401;}}).then(request=>{$formatResponse.removeClass('b-ajax').html(formatResponse(JSON.stringify(request.data))).process();$('#access_token').val(request.data.access_token);$('#refresh_token').val(request.data.refresh_token);}).catch(error=>$formatResponse.removeClass('b-ajax').html(formatResponse(error.toString())));});$('#refresh_acces_token').on('click',({currentTarget})=>{var $node=$(currentTarget);var $refreshTokenResponse=$('.refresh-token-response').html('').addClass('b-ajax').show();axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.request({url:$node.data('token_url'),method:'post',headers:{},data:{grant_type:'refresh_token',client_id:$node.data('client_id'),client_secret:$node.data('client_secret'),refresh_token:$node.data('refresh_token')},responseType:'json',validateStatus(status){return status>=200&&status<300||status===401;}}).then(request=>$refreshTokenResponse.removeClass('b-ajax').html(formatResponse(JSON.stringify(request.data))).process()).catch(error=>$refreshTokenResponse.removeClass('b-ajax').html(formatResponse(error.toString())));});});function formatResponse(text){return'<div class=\'to-process\' data-dynamic=\'code_highlight\'>'+'<code class=\'b-code-v2\' data-language=\'json\'>'+text+'</code>'+'</div>';}

/***/ }),

/***/ 10569:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_check_height__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41696);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('people_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,FavoriteStar;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:(0,_utils_check_height__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)($('.c-info-left .b-entry-info'),{maxHeight:101,isNoShade:true});(0,_utils_check_height__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)($('.c-info-right .b-entry-info'),{maxHeight:101,isNoShade:true});// комментировать
$('.b-subposter-actions .new_comment').on('click',()=>{$('.shiki_editor-selector').view().focus();});_context.next=5;return __webpack_require__.e(/* import() | db_entries_show */ 1904).then(__webpack_require__.bind(__webpack_require__, 49892));case 5:_yield$import=_context.sent;FavoriteStar=_yield$import.FavoriteStar;Object.keys(gon.is_favoured).forEach(role=>{if(gon.person_role[role]||gon.is_favoured[role]){var $button=$(`.b-subposter-actions .fav-add[data-kind='${role}']`);$button.show();new FavoriteStar($button,gon.is_favoured[role]);}});case 8:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 56138:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('.polls',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,createApp,_yield$import2,createStore,_yield$import3,ArrayField,_yield$import4,storeSchema,pollVariants,store,app;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if($('#vue_poll_variants').exists()){_context.next=2;break;}return _context.abrupt("return");case 2:_context.next=4;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 4:_yield$import=_context.sent;createApp=_yield$import.createApp;_context.next=8;return Promise.all(/* import() | vuex */[__webpack_require__.e(8210), __webpack_require__.e(4641)]).then(__webpack_require__.bind(__webpack_require__, 80034));case 8:_yield$import2=_context.sent;createStore=_yield$import2.createStore;_context.next=12;return Promise.all(/* import() */[__webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(828), __webpack_require__.e(848), __webpack_require__.e(4641), __webpack_require__.e(6470), __webpack_require__.e(2882), __webpack_require__.e(3536)]).then(__webpack_require__.bind(__webpack_require__, 71050));case 12:_yield$import3=_context.sent;ArrayField=_yield$import3.default;_context.next=16;return __webpack_require__.e(/* import() */ 8590).then(__webpack_require__.bind(__webpack_require__, 98590));case 16:_yield$import4=_context.sent;storeSchema=_yield$import4.default;pollVariants=$('#poll_form').data('poll').variants;store=createStore(storeSchema);store.state.collection=pollVariants.map((pollVariant,index)=>({key:index,value:pollVariant.label}));app=createApp(ArrayField,{resourceType:'Poll',field:'poll_variants',inputName:'poll[variants_attributes][][label]',emptyInputName:'poll[variants_attributes][]'});app.use(store);app.config.globalProperties.I18n=_utils_i18n__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A;app.mount('#vue_poll_variants');case 25:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 44493:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73148);
/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('profiles_comments',()=>$('form.comments-search').on('submit',e=>{e.preventDefault();var $search=$(e.currentTarget).find('input.search');var url=new tiny_uri__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A($search.data('search_url')).query.set('phrase',$search.val()).toString();turbolinks__WEBPACK_IMPORTED_MODULE_0___default().visit(url);}));

/***/ }),

/***/ 22571:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18987);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('profiles_edit',()=>{if($('.edit-page.account').exists()){pageAccount();}if($('.edit-page.styles').exists()){pageStyles();}if($('.edit-page.list, .edit-page.misc').exists()){pageListAndMisc();}});function pageAccount(){$('.censored-rejected').on('click',({currentTarget})=>{$('.censored-rejected-container').remove();js_cookie__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.remove(currentTarget.getAttribute('data-cookie'));});}function pageStyles(){return _pageStyles.apply(this,arguments);}function _pageStyles(){_pageStyles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,EditStyles;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$('#user_preferences_body_width').on('change',({currentTarget})=>{$(document.body).removeClass('x1000 x1200').addClass(currentTarget.value);});_context.next=3;return Promise.all(/* import() | edit_styles */[__webpack_require__.e(8096), __webpack_require__.e(7094)]).then(__webpack_require__.bind(__webpack_require__, 90337));case 3:_yield$import=_context.sent;EditStyles=_yield$import.EditStyles;new EditStyles('.b-edit_styles');case 6:case"end":return _context.stop();}},_callee);}));return _pageStyles.apply(this,arguments);}function pageListAndMisc(){// восстановление залокированных рекомендаций
// выбор варианта
$('.profile-action .controls .b-js-link').on('click',({currentTarget})=>{var type=$(currentTarget).data('type');$(currentTarget).closest('.controls').hide();$(currentTarget).closest('.profile-action').find(`.form.${type}`).show();});// отмена
$('.profile-action .cancel').on('click',({currentTarget})=>{$(currentTarget).closest('.profile-action').find('.controls').show();$(currentTarget).closest('.profile-action').find('.form').hide();});// успешное завершение
$('.profile-action a').on('ajax:success',({currentTarget})=>{$(currentTarget).closest('.profile-action').find('.cancel').click();});// nickname changes cleanup
// выбор варианта
$('.nickname-changes .controls .b-js-link').on('click',()=>{$('.nickname-changes .controls').hide();$('.nickname-changes .form').show();});// отмена
$('.nickname-changes .cancel').on('click',()=>{$('.nickname-changes .controls').show();$('.nickname-changes .form').hide();});// успешное завершение
$('.nickname-changes a').on('ajax:success',()=>{$('.nickname-changes .cancel').click();});}

/***/ }),

/***/ 37254:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(73148);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24418);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('profiles_favorites',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var $sortable,favoriteIds,reorderUrlTemplate,_yield$import,Sortable;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$sortable=$('.cc-favourites.sortable');if($sortable.length){_context2.next=3;break;}return _context2.abrupt("return");case 3:favoriteIds=$sortable.data('favorite_ids');reorderUrlTemplate=$sortable.data('reorder_url');$sortable.children('.b-catalog_entry').each((index,node)=>$(node).data('reorder_url',reorderUrlTemplate.replace('ID',favoriteIds[index])));_context2.next=8;return __webpack_require__.e(/* import() */ 848).then(__webpack_require__.bind(__webpack_require__, 10246));case 8:_yield$import=_context2.sent;Sortable=_yield$import.default;_context2.t0=Sortable;_context2.t1=$sortable[0];_context2.t2={draggable:'.b-catalog_entry',handle:'.b-catalog_entry',onStart(){$sortable.addClass('draggable');},onEnd(){$sortable.removeClass('draggable');},onSort(e){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reorderUrl;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:reorderUrl=$(e.item).data('reorder_url');$sortable.parent().addClass('b-ajax');_context.next=4;return Promise.all([_utils_axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(new tiny_uri__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(reorderUrl).query.set('new_index',e.newIndex).toString()),(0,delay__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Ay)(250)]);case 4:$sortable.parent().removeClass('b-ajax');case 5:case"end":return _context.stop();}},_callee);}))();}};new _context2.t0(_context2.t1,_context2.t2);case 14:case"end":return _context2.stop();}},_callee2);})));

/***/ }),

/***/ 88840:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('profiles_ignored_users','profiles_ignored_topics',()=>{$('.b-editable_grid .actions .b-js-link').on('ajax:before',({currentTarget})=>{$(currentTarget).hide();$('<div class="ajax-loading vk-like"></div>').insertAfter(currentTarget);}).on('ajax:success',({currentTarget})=>{$(currentTarget).closest('tr').remove();});$('.user_ids').completableVariant();if($('.user_ids').is(':appeared')){$('.user_ids').focus();}$('.user_ids').on('keydown',e=>{if(e.keyCode===10||e.keyCode===13){e.preventDefault();$('.b-form').submit();}});});

/***/ }),

/***/ 6327:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79308);
/* harmony import */ var _views_application_ban_form__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14216);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('profiles_moderation',()=>{$('.b-form.new_ban').on('ajax:success',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:shiki_utils__WEBPACK_IMPORTED_MODULE_2__.flash.info(_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t('frontend.pages.p_profiles.page_is_reloading'));_context.next=3;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(500);case 3:window.location.reload();case 4:case"end":return _context.stop();}},_callee);})));new _views_application_ban_form__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A($('.b-form.new_ban'));$('.ban-time').livetime();});

/***/ }),

/***/ 71578:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79308);
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(14792);
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_capitalize__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68090);
/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(36944);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24418);
/* harmony import */ var _utils_dayjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13269);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12691);
/* harmony import */ var _utils_p__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(94324);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('profiles_show',()=>{$('.friend-action').on('ajax:success',()=>$('.friend-action').toggle());$('.ignore-action').on('ajax:success',()=>$('.ignore-action').toggle());$('h1.aliases').tipsy({gravity:(0,shiki_utils__WEBPACK_IMPORTED_MODULE_0__.isMobile)()?'n':'w',html:true,prependTo:document.body,title(){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _utils_axios__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.get(_this.getAttribute('data-tooltip_url'));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt("return",data);case 5:case"end":return _context.stop();}},_callee);}))();}});$('.activity .graph').empty().bar({before(stats,options,$chart){stats.forEach((stat,_index)=>stat.dates={from:new Date(stat.name[0]*1000),to:new Date(stat.name[1]*1000)});options.interval=Math.round(dateDiff(stats[0].dates.from,stats[0].dates.to));options.range=Math.round(dateDiff(stats[0].dates.from,stats[stats.length-1].dates.to));options.index_label=0;if(options.y_axis){$chart.addClass('y-axis');// transparent lines
var html=[];var i=1;while(i<=10){html.push(`<div class="ruler" style="top: ${i*10}%;"></div>`);i+=1;}$chart.html(html.join(''));}},title(entry){var hourWord=(0,_utils_p__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A)(entry.value,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.hour.one'),_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.hour.few'),_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.hour.many'));var dateFormat=window.LOCALE==='en'?'MMMM D':'D MMMM';var fromDate=(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_5__["default"])(entry.dates.from).format(dateFormat);var toDate=(0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_5__["default"])(entry.dates.to).format(dateFormat);if(fromDate===toDate){return _utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.label.short',{hours:entry.value,hourWord,date:fromDate});}var days=dateDiff(entry.dates.from,entry.dates.to);var dayWord=days===Math.round(days)?(0,_utils_p__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A)(entry.value,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.day.one'),_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.day.few'),_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.day.many')):_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.day.many');return _utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_profiles.label.full',{hours:entry.value,hourWord,fromDate,toDate,days,dayWord});},xAxis(entry,index,stats,options){var label;if(index<options.index_label){return'';}var _entry$dates=entry.dates,from=_entry$dates.from,to=_entry$dates.to;var date=entry!==lodash_last__WEBPACK_IMPORTED_MODULE_2___default()(stats)?from:to;if(index===0){options.index_label=3;label=date.getFullYear();}else if(options.prior.dates.from.getFullYear()!==date.getFullYear()){label=date.getFullYear();options.index_label=index+3;}else if(options.prior.dates.from.getMonth()!==date.getMonth()){label=lodash_capitalize__WEBPACK_IMPORTED_MODULE_1___default()((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_5__["default"])(date).format('MMM'));options.index_label=index+3;}else if(options.range<=120){// and entry.value > 0
label=date.getDate();options.index_label=index+2;}options.prior=entry;return label||'';},noData($chart){$chart.html(`<p class="stat-sorry">${$chart.data('no_stat_text')}</p>`).removeClass('bar').attr('id',false);}});});function dateDiff(dateEarlier,dateLater){var oneDay=1000*60*60*24;return lodash_round__WEBPACK_IMPORTED_MODULE_3___default()((dateLater.getTime()-dateEarlier.getTime())/oneDay,1);}

/***/ }),

/***/ 99751:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('profiles_video_uploads',()=>{$('.l-page').on('click','.b-log_entry.video .collapsed',function(){var $player=$(this).parent().find('.player');if($player.data('html')){$player.html($player.data('html')).data({html:''});}});});

/***/ }),

/***/ 41965:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_ajax_cacher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68292);
/* harmony import */ var _utils_in_new_tab__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(70416);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24418);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('recommendations_index','recommendations_favourites',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!$('p.pending').exists()){_context2.next=7;break;}url=document.location.href;_context2.next=4;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(5000);case 4:if(!(url===document.location.href)){_context2.next=7;break;}window.location.reload();return _context2.abrupt("return");case 7:$('body').on('mouseover','.b-catalog_entry',({currentTarget})=>{var $node=$(currentTarget);if(!window.SHIKI_USER.isSignedIn){return;}if($node.hasClass('entry-ignored')){return;}if($node.data('ignore_augmented')){$node.data('ignore_button').show();return;}var title=_utils_i18n__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.t('frontend.pages.p_recommendations_index.dont_recommend_franchise');var $button=$(`<span class='controls'>
        <span class='delete mark-ignored' title='${title}'></span>
      </span>`).appendTo($node.find('.image-cutter'));$node.data({ignore_augmented:true,ignore_button:$button});});$('body').on('mouseout','.b-catalog_entry',({currentTarget})=>{var $button=$(currentTarget).data('ignore_button');if($button){$button.hide();}});$('body').on('click','.entry-ignored',e=>{if(!(0,_utils_in_new_tab__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A)(e)){e.preventDefault();}});$('body').on('click','.b-catalog_entry .mark-ignored',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var $node,$link,targetType,targetId,_yield$axios$post,data,selector;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();$node=$(e.currentTarget).closest('.b-catalog_entry');$link=$node.find('a').first();if(!$link.attr('href').match(/(anime|manga)s\//)){_context.next=15;break;}targetType=RegExp.$1;targetId=$node.prop('id');$node.addClass('entry-ignored');$(e.currentTarget).hide();_services_ajax_cacher__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.reset();_context.next=11;return _utils_axios__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.post('/recommendation_ignores',{target_type:targetType,target_id:targetId});case 11:_yield$axios$post=_context.sent;data=_yield$axios$post.data;selector=data.map(v=>`.entry-${v}`).join(',');$(selector).addClass('entry-ignored');case 15:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());case 11:case"end":return _context2.stop();}},_callee2);})));

/***/ }),

/***/ 60421:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('reviews_show','critiques_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var editor,_gon,reply,url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(25);case 2:editor=$('.shiki_editor-selector').view();_context.next=5;return editor.initialization.promise;case 5:if(!editor.cacheProcessed){_context.next=8;break;}_context.next=8;return editor.cacheProcessed.promise;case 8:_gon=gon,reply=_gon.reply;if(gon.reply){editor.replyComment(reply);editor.reprocessCache();url=window.location.href.replace(/\/reply$/,'');if(url!==window.location.href){window.history.replaceState({turbolinks:true,url},'',url);}}case 10:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 54542:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55364);
/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('statistics_index',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var Highcharts,_yield$import,colors,stats;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$('#image_placeholder').hide();_context.next=3;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.t.bind(__webpack_require__, 8524, 23));case 3:Highcharts=_context.sent;_context.next=6;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.bind(__webpack_require__, 34151));case 6:_yield$import=_context.sent;colors=_yield$import.colors;Highcharts.getOptions().colors.length=0;colors.forEach(color=>Highcharts.getOptions().colors.push(color));stats=$('header.head').data('statistics');renderCharts(stats,Highcharts);handleEvents(stats,Highcharts);$('.by_rating .control').first().trigger('click');$('.by_genre .control').first().trigger('click');case 15:case"end":return _context.stop();}},_callee);})));function renderCharts({total,byKind,byStudio},Highcharts){var _Highcharts$getOption=Highcharts.getOptions(),colors=_Highcharts$getOption.colors;lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()(total.series[0],{dataLabels:{formatter(){if(this.y>5){return this.point.name;}else{return null;}},color:'white',distance:-30},size:'70%'});lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()(total.series[1],{dataLabels:{formatter(){if(this.y>20){return`<b>${this.point.name}</b>:<b>${this.y}</b>`;}else{return null;}}},innerSize:'70%'});total.series[0].data.forEach((v,k)=>v.color=colors[k]);total.series[1].data.forEach(function(v,k){var brightness=k%3/20;var index=parseInt(k/3);return v.color=new Highcharts.Color(colors[index]).brighten(brightness).get();});chart(Highcharts,'pie','total',total,'normal',_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.number'),function(){if(this.key.match(/^\d/)){return _utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.anime_with_score',{count:this.y,score:this.key});}else{return _utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.anime_of_type',{count:this.y,type:this.key});}},{xAxis:null,plotOptions:{pie:{shadow:false}}});// аниме по типам
chart(Highcharts,'area','by_kind',byKind,'normal',_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.number'),function(){return _utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.anime_in_year',{count:this.y,type:this.series.name,year:this.x});},{});chart(Highcharts,'area','by_studio',byStudio,'normal',_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.number'),function(){return _utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.anime_with_rating_in_year',{count:this.y,rating:this.series.name,year:this.x});},{xAxis:{categories:byStudio.categories,labels:{step:1},title:{enabled:false}}});}function handleEvents({byGenre,byRating},Highcharts){// переключение типа диаграммы жанров
$('.l-page').on('click','.by_genre .control',function(){var $this=$(this).addClass('selected');$this.siblings().removeClass('selected');if('by_genre_chart'in window){window.by_genre_chart.destroy();}chart(Highcharts,'area','by_genre',byGenre[$this.data('kind')],'percent',_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.share'),function(){return _utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.genres_share',{percent:Highcharts.numberFormat(this.percentage,2,'.'),genre:this.series.name,year:this.x});},{yAxis:{max:100}});});// переключение типа диаграммы рейтинга
$('.l-page').on('click','.by_rating .control',function(){var $this=$(this).addClass('selected');$this.siblings().removeClass('selected');if('by_rating_chart'in window){window.by_rating_chart.destroy();}chart(Highcharts,'area','by_rating',byRating[$this.data('kind')],'percent',_utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.share'),function(){return _utils_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.statistics.ratings_share',{percent:Highcharts.numberFormat(this.percentage,2),rating:this.series.name,year:this.x});},{yAxis:{max:100}});});}function chart(Highcharts,type,id,data,stacking,yTitle,tooltipFormatter,options){var defaults={chart:{renderTo:id,type},title:{text:''},subtitle:{text:''},xAxis:{categories:data.categories,labels:{step:2},title:{enabled:false}},yAxis:{title:{text:yTitle},labels:{formatter(){return this.value;}}},tooltip:{formatter:tooltipFormatter,borderRadius:0,borderWidth:1,shadow:false},plotOptions:{area:{stacking,lineColor:'#666666',lineWidth:1,shadow:false,marker:{enabled:false,lineWidth:1,lineColor:'#666666'}}},credits:{enabled:false},legend:{borderRadius:0,borderWidth:0},// floating: true,
// align: 'left',
// verticalAlign: 'top',
// x: 20,
// y: 0
series:data.series};window[`${id}_chart`]=new Highcharts.Chart($.extend(true,defaults,options||{}));};

/***/ }),

/***/ 89907:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33031);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('statistics_lists',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var Highcharts,_yield$import,colors;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.t.bind(__webpack_require__, 8524, 23));case 2:Highcharts=_context.sent;_context.next=5;return __webpack_require__.e(/* import() | hs */ 9961).then(__webpack_require__.bind(__webpack_require__, 34151));case 5:_yield$import=_context.sent;colors=_yield$import.colors;Highcharts.getOptions().colors.length=0;colors.forEach(color=>Highcharts.getOptions().colors.push(color));$('.chart').toArray().forEach(node=>{var stats=$(node).data('stats');var label=node.getAttribute('data-label');if(!stats){return;}renderCharts(Highcharts,{node,stats,label});});case 10:case"end":return _context.stop();}},_callee);})));function renderCharts(Highcharts,{node,stats,label}){var _Object$keys,_param,_sortBy,_Object$keys$map,_param2,_sortBy2;var keys=Object.keys(stats);Highcharts.chart(node,{chart:{type:'area'},title:{text:label},xAxis:{categories:(_Object$keys=Object.keys(stats[keys[0]]),(_sortBy=(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()),_param=v=>parseInt(v.replace(/[^\d].*/,'')),function sortBy(_argPlaceholder){return _sortBy(_argPlaceholder,_param);})(_Object$keys))},yAxis:{title:{text:'Users'}},credits:{enabled:false},// plotOptions: {
//   area: {
//     stacking: 'normal'
//   }
// },
tooltip:{split:true},series:(_Object$keys$map=Object.keys(stats).map(key=>({name:key,data:Object.values(stats[key])})),(_sortBy2=(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()),_param2=({data})=>-data[0],function sortBy(_argPlaceholder2){return _sortBy2(_argPlaceholder2,_param2);})(_Object$keys$map))});}

/***/ }),

/***/ 50517:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73148);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function setLink(){$('#link').val(document.location.href.replace(/\?.*/,'')+'?image_url='+$('#image_url').val()+'&image_border='+$('#image_border').val().replace('#','@'));}pageLoad('.tests',()=>{$('#image_url').on('keypress',function(e){if(e.keyCode===10||e.keyCode===13){$(this).trigger('change');}}).on('blur change',function(){$('.b-achievement .c-image img').attr({src:this.value});setLink();}).on('paste',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 2:$(this).trigger('change');case 3:case"end":return _context.stop();}},_callee,this);}))).trigger('change');$('#image_border').on('keyup blur change',function(){$('.b-achievement .c-image .border').css({borderColor:this.value});setLink();}).on('paste',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 2:$(this).trigger('change');case 3:case"end":return _context2.stop();}},_callee2,this);}))).trigger('change');});pageLoad('tests_reset_styles_cache',()=>{$('.b-form').on('submit',({currentTarget})=>{currentTarget.action=new tiny_uri__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A(currentTarget.action).query.set('url',$('input[name=url]',currentTarget).val()).toString();});});

/***/ }),

/***/ 88944:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('tests_achievements_notification',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$('.b-button').on('click',({currentTarget})=>{var $button=$(currentTarget);var data=JSON.parse($button.prev().children('textarea').val());window.SHIKI_ACHIEVEMENTS_NOTIFIER.notify(data);});_context.next=3;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 3:$('.b-button').click();case 4:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 8573:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var autosize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31173);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24418);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}/* global IS_LOCAL_SHIKI_PACKAGES */ /* eslint max-len:0 */var IS_RAW= false&&0;var IS_RAW_2= false&&0;var IS_VUE=!IS_RAW||!false;var TEST_DEMO_CONTENT;if(false){}pageLoad('tests_editor',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var $shikiEditor,$textarea,_yield$import,ShikiEditor,_yield$import2,ShikiRequest,shikiRequest,rawNode,rawNode2,vueNode,editor,value,view;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$shikiEditor=$('.b-shiki_editor');$textarea=$shikiEditor.find('textarea');_context2.next=4;return Promise.all(/* import() | shiki-editor */[__webpack_require__.e(8096), __webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(6479)]).then(__webpack_require__.bind(__webpack_require__, 62608));case 4:_yield$import=_context2.sent;ShikiEditor=_yield$import.ShikiEditor;_context2.next=8;return Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 79308));case 8:_yield$import2=_context2.sent;ShikiRequest=_yield$import2.ShikiRequest;shikiRequest=new ShikiRequest(window.location.origin,_utils_axios__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A);rawNode=document.querySelector('.raw-editor');rawNode2=document.querySelector('.raw-editor-2');vueNode=document.querySelector('.b-shiki_editor-v2 div');if(IS_RAW){editor=new ShikiEditor({element:rawNode,extensions:[],content:TEST_DEMO_CONTENT||DEMO_CONTENT,shikiRequest});if(IS_RAW_2){new ShikiEditor({element:rawNode2,extensions:[],content:TEST_DEMO_CONTENT||DEMO_CONTENT,shikiRequest});}else{$(rawNode2).closest('.block').hide();}editor.on('update',()=>{$textarea.val(editor.exportMarkdown());autosize__WEBPACK_IMPORTED_MODULE_1__["default"].update($textarea[0]);});value=editor.exportMarkdown();$textarea.val(value);(0,autosize__WEBPACK_IMPORTED_MODULE_1__["default"])($textarea);$textarea.on('keypress keydown paste change',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newValue;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 2:newValue=$textarea.val();if(newValue!==value){editor.setContent(newValue,false);value=newValue;}case 4:case"end":return _context.stop();}},_callee);})));}else{$(rawNode).closest('.fc-2').closest('.block').hide();}if(!IS_VUE){_context2.next=22;break;}_context2.next=18;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(100);case 18:view=$('.b-shiki_editor-v2').view();view.editorApp.setContent(TEST_DEMO_CONTENT||DEMO_CONTENT,false);_context2.next=23;break;case 22:$(vueNode).closest('.block').hide();case 23:case"end":return _context2.stop();}},_callee2);})));var DEMO_CONTENT= false?0:`
[spoiler_block=Заголовки is-fullwidth]
[spoiler_block=Заголовки без подчёркивания is-fullwidth]
# Заголовок уровень 1
\`\`\`
# Заголовок уровень 1
\`\`\`

## Заголовок уровень 2
\`\`\`
## Заголовок уровень 2
\`\`\`

### Заголовок уровень 3
\`\`\`
### Заголовок уровень 3
\`\`\`

#### Спец заголовок 1
\`\`\`
#### Спец заголовок 1
\`\`\`

##### Спец заголовок 2
\`\`\`
##### Спец заголовок 2
\`\`\`
[/spoiler_block]
[spoiler_block=Заголовки с подчёркиванием is-fullwidth]
# Черта после заголовка уровень 1
[hr]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.
\`\`\`
# Черта после заголовка уровень 1
[hr]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.
\`\`\`

## Черта после заголовка уровень 2
[hr]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.
\`\`\`
## Черта после заголовка уровень 2
[hr]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.
\`\`\`

### Черта после заголовка уровень 3
[hr]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.
\`\`\`
### Черта после заголовка уровень 3
[hr]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.
\`\`\`
[/spoiler_block]
[/spoiler_block]
[spoiler_block=ББКоды Шики is-fullwidth]
Аниме с автоматическим названием [anime=1 cowboy-bebop] \`[anime=1]\`
Аниме с заданным навзанием [anime=1 cowboy-bebop]Anime name[/anime] \`[anime=1]Название[/anime]\`
Аниме отсутствующее в базе сайта [anime=99999999] \`[anime=99999999]\`

Манга [manga=1 monster] \`[manga=1]\`
Ранобэ [ranobe=9115 ookami-to-koushinryou] \`[ranobe=9115]\`

Персонаж [character=2515 pico] \`[character=2515]\`
Человек [person=47918 miho-okasaki] \`[person=47918]\`

[entry=314310;453102]
[topic=314310;453102]
[comment=6104628;602162]
[message=1278854609]

[topic=99999999999]
[topic=99999999999]missing topic[/topic]
[comment=99999999999]
[message=99999999999]
[/spoiler_block]


[spoiler_block=Базовые стили is-fullwidth]
B[b]old tex[/b]t
I[i]talic tex[/i]t
U[u]nderlined tex[/u]t
S[s]triked tex[/s]t
Inline c\`ode tex\`t
Inline s||poiler tex||t    \`||spoiler content||\`
C[color=red]olored tex[/color]t   \`[color=red]...[/color]\`
s[size=18]ized tex[/size]t   \`[size=18]...[/size]\`
L[url=https://github.com/shikimori/shiki-editor]ink tex[/url]t
[/spoiler_block]


[spoiler_block=Спойлеры is-fullwidth]
### Блочный спойлер
[spoiler=spoiler block with label]
spoiler \`content\`
[/spoiler]
[spoiler]
spoiler content
[/spoiler]

### Инлайновый спойлер
||Inline spoiler text||    \`||spoiler content||\`
[/spoiler_block]

# Smileys
[hr]
:) :shock:

# Images
[hr]
Image
[img no-zoom 225x317]https://kawai.shikimori.one/system/animes/original/38481.jpg?1592053805[/img]     [img no-zoom width=200]https://kawai.shikimori.one/system/animes/original/38481.jpg?1592053805[/img]     [img]https://kawai.shikimori.one/system/animes/original/38481.jpg?1592053805[/img] [img]https://kawai.shikimori.one/system/users/x160/1.png?1591612283[/img]
Poster
[poster]https://www.ljmu.ac.uk/~/media/ljmu/news/starsedit.jpg[/poster]

# Divs and Spans
[hr]
[div=b-link_button]
\`[div=b-link_button]...[/div]\`
[/div]

\`[div=fc-2][div=f-column][/div][div=f-column][/div][/div]\`

[div=fc-2]
[div=f-column]
\`[div=f-column]\`
[/div]
[div=f-column]
\`[div=f-column]\`
[/div]
[/div]

[hr]

[right]\`[right]...[/right]\`[/right]
[center]\`[center]...[/center]\`[/center]

div [div=b-link_button]inline divs are not parsed by editor[/div] div
Instead use \`[span]\` bbcode [span=b-anime_status_tag anons]as inline element[/span]
\`\`\`
Instead use \`[span]\` bbcode [span=b-anime_status_tag anons]as inline element[/span]
\`\`\`

# Quotes and Lists
[hr]
### Bullet list
- Bullet List
- def

### Quote
> Quote
> > nope
> yes

### Bullet and Quote combined
> - \`quoted\` list
- > list \`quoted\`

### Old Quote
[quote]Old style quote support[/quote]
[quote=zxc]Old style quote with nickname[/quote]
[quote=c1246;1945;Silentium°]Old style quote with user[/quote]

[spoiler_block=Код is-fullwidth]
### Блочный код
\`\`\`
code block
\`\`\`
\`\`\`css
.css /* code block */ { color: red; }
\`\`\`

### Инлайновый код
\`inlinde code\` made by text wrapped in \`\` \`quotes\` \`\`

### Разное
[div=cc-4]
[div=c-column m0]
before

\`\`\`
123
456
\`\`\`

after
[/div]
[div=c-column m0]
before
\`\`\`
123
456
\`\`\`
[/div]
[div=c-column m0]
\`\`\`
123
456
\`\`\`
after
[/div]
[div=c-column m0]
before
\`\`\`
123
456
\`\`\`
after
[/div]
[/div]
[div=cc-4]
[div=c-column m0]
> \`\`\`
> 123
> 456
> \`\`\`

> before
> \`\`\`
> 123
> 456
> \`\`\`

> \`\`\`
> 123
> 456
> \`\`\`
> after

> before
> \`\`\`
> 123
> 456
> \`\`\`
> after
[/div]
[div=c-column m0]
- \`\`\`
  123
  456
  \`\`\`

- before
  \`\`\`
  123
  456
  \`\`\`

- \`\`\`
  123
  456
  \`\`\`
  after

- before
  \`\`\`
  123
  456
  \`\`\`
  after
[/div]
[div=c-column m0]
> - \`\`\`
>   123
>   456
>   \`\`\`

> - before
>   \`\`\`
>   123
>   456
>   \`\`\`

> - \`\`\`
>   123
>   456
>   \`\`\`
>   after

> - before
>   \`\`\`
>   123
>   456
>   \`\`\`
>   after

> - before
>   \`\`\`
>   123
>   456
>   \`\`\`
>   - after
[/div]
[div=c-column m0]
> - \`\`\`
>   123
>   456
>   \`\`\`
> after

> - before
>   \`\`\`
>   123
>   456
>   \`\`\`
> after

> \`\`\`
> 123
> 456
> \`\`\`
> after

> \`\`\`
> 123
> 456
> \`\`\`
> > after

> > \`\`\`
> > 123
> > 456
> > \`\`\`
> after
[/div]
[/div]
[/spoiler_block]

# Videos
[hr]
[video]https://www.youtube.com/watch?v=0d4rPwIpzNw[/video] [video]https://www.youtube.com/watch?v=00000000000[/video] [video]https://www.youtube.com/watch?v=JyTvVtUr_2g&t=762s[/video] [video]http://video.sibnet.ru/video1234982-03__Poverivshiy_v_grezyi[/video] [video]https://video.sibnet.ru/video305613-SouL_Eater__AMW/[/video] [video]http://vimeo.com/426453510[/video] [video]https://vk.com/video-186803452_456239969[/video] [video]http://vk.com/video98023184_165811692[/video] [video]https://coub.com/view/1itox4[/video] [video]https://ok.ru/video/2444260543117[/video]
`.trim();

/***/ }),

/***/ 27523:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13269);
/* provided dependency */ var $ = __webpack_require__(74692);
pageLoad('tests_momentjs',()=>{var _window=window,MOMENT_DIFF=_window.MOMENT_DIFF;$('.date').html(new Date());$('.dayjs').html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])().format());$('.dayjs_diff').html(MOMENT_DIFF);$('.server_time').html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($(document.body).data('server-time')).format());var $div1=$('.test1');$div1.html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($div1.data('datetime')).fromNow());var $div2=$('.test2');$div2.html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($div2.data('datetime')).add(MOMENT_DIFF).fromNow());var $div3=$('.test3');$div3.html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($div3.data('datetime')).subtract(MOMENT_DIFF).fromNow());var $div4=$('.test4');$div4.html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($div4.data('datetime')).fromNow());var $div5=$('.test5');$div5.html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($div5.data('datetime')).add(MOMENT_DIFF).fromNow());var $div6=$('.test6');$div6.html((0,_utils_dayjs__WEBPACK_IMPORTED_MODULE_0__["default"])($div6.data('datetime')).subtract(MOMENT_DIFF).fromNow());});

/***/ }),

/***/ 96443:
/***/ (() => {

pageLoad('tests_news',()=>{// alignGeneratedNews();
// $(document).on('resize:debounced orientationchange', alignGeneratedNews);
});pageUnload('tests_news',()=>{// $(document).off('resize:debounced orientationchange', alignGeneratedNews);
});// function alignGeneratedNews() {
//   const $target = $('.generated-news');
//
//   if (!$target.is(':visible')) {
//     return; // disable on iphone
//   }
//
//   $target.children().show();
//
//   const $siblings = $target.siblings().children('.b-news_wall');
//   const siblingsHeight = $siblings.outerHeight();
//
//   shorten($target, $target.children(), siblingsHeight, 0);
// }
//
// function shorten($target, $targetChildren, siblingsHeight, indexToHide) {
//   const targetHeight = $target.innerHeight();
//
//   if (targetHeight - 5 > siblingsHeight) {
//     $targetChildren.eq($targetChildren.length - 1 - indexToHide).hide();
//     shorten($target, $targetChildren, siblingsHeight, indexToHide + 1);
//   }
// }

/***/ }),

/***/ 33837:
/***/ (() => {

function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}// import Wall from '@/views/wall/view';
// import merge from 'lodash/merge';
pageLoad('tests_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:case"end":return _context.stop();}},_callee);})));// function initPage(Highcharts) {
//   const traffic = $('.traffic-test').data('stats');
//
//   $('.traffic-test').highcharts(
//     chartOptions({
//       series: [{
//         name: 'Просмотры',
//         pointInterval: 24 * 3600 * 1000,
//         pointStart: new Date(traffic.first().date).getTime(),
//         data: traffic.map(v => v.page_views),
//         visible: false,
//         color: Highcharts.getOptions().colors[3],
//         fillColor: {
//           linearGradient: {
//             x1: 0,
//             y1: 0,
//             x2: 0,
//             y2: 1
//           },
//           stops: [
//             [0, Highcharts.getOptions().colors[3]],
//             [1, new Highcharts.Color(Highcharts.getOptions().colors[3]).setOpacity(0).get('rgba')]
//           ]
//         }
//       }, {
//         name: 'Визиты',
//         pointInterval: 24 * 3600 * 1000,
//         pointStart: new Date(traffic.first().date).getTime(),
//         data: traffic.map(v => v.visits),
//         visible: false,
//         color: Highcharts.getOptions().colors[1],
//         fillColor: {
//           linearGradient: {
//             x1: 0,
//             y1: 0,
//             x2: 0,
//             y2: 1
//           },
//           stops: [
//             [0, Highcharts.getOptions().colors[1]],
//             [1, new Highcharts.Color(Highcharts.getOptions().colors[1]).setOpacity(0).get('rgba')]
//           ]
//         }
//       }, {
//         name: 'Уникальные посетители',
//         pointInterval: 24 * 3600 * 1000,
//         pointStart: new Date(traffic.first().date).getTime(),
//         data: traffic.map(v => v.visitors),
//         color: Highcharts.getOptions().colors[0],
//         fillColor: {
//           linearGradient: {
//             x1: 0,
//             y1: 0,
//             x2: 0,
//             y2: 1
//           },
//           stops: [
//             [0, Highcharts.getOptions().colors[0]],
//             [1, new Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
//           ]
//         }
//       }]
//     })
//   );
// }
//
// const chartOptions = options =>
//   merge({
//     chart: {
//       zoomType: 'x',
//       type: 'areaspline'
//     },
//     title: null,
//     xAxis: {
//       type: 'datetime',
//       title: null,
//       maxZoom: 14 * 24 * 3600000,
//       dateTimeLabelFormats: {
//         millisecond: '%H:%M:%S.%L',
//         second: '%H:%M:%S',
//         minute: '%H:%M',
//         hour: '%H:%M',
//         day: '%e. %b',
//         week: '%e. %b',
//         month: '%b',
//         year: '%Y'
//       }
//     },
//     yAxis: {
//       title: null,
//       gridLineColor: '#eaeaea',
//       min: 0
//     },
//     tooltip: {
//       shared: true
//     },
//     legend: {
//       borderRadius: 0,
//       borderWidth: 0
//     },
//     plotOptions: {
//       areaspline: {
//         lineWidth: 1,
//         fillOpacity: 0.5,
//         marker: {
//           enabled: false
//         },
//         shadow: false,
//         states: {
//           hover: {
//             lineWidth: 1
//           }
//         },
//         threshold: null
//       }
//     },
//     credits: false
//   }, options, { deep: true });

/***/ }),

/***/ 16694:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}// import { createApp } from 'vue';
pageLoad('tests_vue',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,createApp,_yield$import2,Test;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 2:_yield$import=_context.sent;createApp=_yield$import.createApp;_context.next=6;return Promise.all(/* import() */[__webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(9855)]).then(__webpack_require__.bind(__webpack_require__, 39855));case 6:_yield$import2=_context.sent;Test=_yield$import2.default;createApp(Test).mount('#vue_app');case 9:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 57729:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('topics_new',()=>{var $form=$('.new-critique-form');if(!$form.length){return;}var $topicLinked=$('#topic_linked',$form);var $linkedId=$('#topic_linked_id',$form);var $linkedType=$('#topic_linked_type',$form);var $link=$('.b-link_button',$form);$('.topic-linked .remove',$form).on('click',()=>$link.removeAttr('href').addClass('disabled'));$topicLinked.on('autocomplete:success',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)();case 2:// must be sure that handler from p-topics/_form.js was triggered first
$link.attr('href',$link.data('url_template').replace('/animes/',`/${$linkedType.val().toLowerCase()}s/`).replace('ranobes','ranobe').replace(/TARGET_ID/g,$linkedId.val()).replace(/TARGET_TYPE/g,$linkedType.val())).removeClass('disabled');case 3:case"end":return _context.stop();}},_callee);})));});

/***/ }),

/***/ 19974:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initForm: () => (/* binding */ initForm),
/* harmony export */   initTagsApp: () => (/* binding */ initTagsApp),
/* harmony export */   initVideo: () => (/* binding */ initVideo),
/* harmony export */   initWall: () => (/* binding */ initWall)
/* harmony export */ });
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24418);
/* harmony import */ var _views_wall_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68473);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var wall;function initForm(type,$form,$wall,$video){$form.on('submit',()=>{var $attachments=$('.attachments-submit-container',$form).empty();// posters
$('.b-dropzone a',$form).map((_index,node)=>$(node).attr('id')).each((_index,id)=>$attachments.append(`<input type='hidden' name='${type}[wall_ids][]' value="${id}" />`));// video
var videoId=$video.data('video_id');if(videoId){$attachments.append(`<input type='hidden' name='${type}[video_id]' value="${videoId}" />`);}});}function initWall(_x,_x2){return _initWall.apply(this,arguments);}function _initWall(){_initWall=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee($form,$wall){var _yield$import,FileUploader,$upload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(/* import() */[__webpack_require__.e(4200), __webpack_require__.e(1600)]).then(__webpack_require__.bind(__webpack_require__, 2470));case 2:_yield$import=_context.sent;FileUploader=_yield$import.FileUploader;$upload=$('.topic-posters .b-dropzone',$form);if($upload.length){_context.next=7;break;}return _context.abrupt("return",null);case 7:// it can be page with terms
new FileUploader($upload[0]).on('upload:file:success',(_e,{response})=>{var $image=$(`<a href='${response.url}' rel='new-wall' class='b-image b-link' \
id='${response.id}'>\
<img src='${response.preview}' class=''> \
<div class='mobile-edit'></div><div class='controls'> \
<div class='delete'></div>\
<div class='confirm'></div>\
<div class='cancel'></div></div></a>`).appendTo($wall);$('.confirm',$image).on('click',e=>{e.preventDefault();removeImage($image,$wall);});}).on('upload:complete',()=>resetWall($wall));$('.b-image .confirm',$upload).on('click',e=>{e.preventDefault();removeImage($(e.target).closest('.b-image').remove(),$wall);});return _context.abrupt("return",{destroy(){if(wall){wall.$node.find('.c-video.b-video').remove();wall=null;}}});case 10:case"end":return _context.stop();}},_callee);}));return _initWall.apply(this,arguments);}function removeImage($image,$wall){$image.remove();resetWall($wall);}function resetWall($wall){$wall.find('img').css({width:'',height:''});wall=new _views_wall_view__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A($wall);}// function linkedAnimeId($linkedType, $linkedId) {
//   return $linkedType.val() === 'Anime' ? $linkedId.val() : null;
// }
function initVideo(type,$form,$wall){var $video=$('.topic-video',$form);// const $linkedId = $('#topic_linked_id', $form);
// const $linkedType = $('#topic_linked_type', $form);
if($video.data('video_id')){attachVideo({video_id:$video.data('video_id'),content:$video.data('content')},$video,$wall);}var $videoForm=$('.form',$video);var $attach=$('.attach',$videoForm);$attach.on('click',()=>{// const animeId = linkedAnimeId($linkedType, $linkedId);
var url=$attach.data('url').replace('ANIME_ID',0);// .replace('ANIME_ID', animeId || 0);
var form={video:{// anime_id: animeId,
url:$(`#${type}_video_url`,$videoForm).val(),kind:$(`#${type}_video_kind`,$videoForm).val(),name:$(`#${type}_video_name`,$videoForm).val()}};$video.addClass('b-ajax');_utils_axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(url,form).then(data=>attachVideo(data.data,$video,$wall));});return $video;}function attachVideo(videoData,$topicVideo,$wall){var $topicVideoForm=$('.form',$topicVideo);var $topicVideoRemove=$('.remove',$topicVideo);var $topicVideoErrors=$('.errors',$topicVideo);$topicVideo.removeClass('b-ajax');if(videoData.errors){$topicVideoErrors.show().html(videoData.errors.join(', '));return;}$topicVideoErrors.hide();$topicVideo.data({video_id:videoData.video_id});$topicVideoForm.hide();$topicVideoRemove.removeClass('hidden');var $video=$(videoData.content).prependTo($wall);resetWall($wall);$topicVideoRemove.one('click',e=>{e.preventDefault();$topicVideo.data({video_id:null});$topicVideoForm.show();$topicVideoRemove.addClass('hidden');removeImage($video,$wall);});}function initTagsApp(_x3){return _initTagsApp.apply(this,arguments);}function _initTagsApp(){_initTagsApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(type){var _yield$import2,createApp,h,_yield$import3,TagsInput,$app,$tags,initialHtml,app;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if($(`#${type}_tags`).length){_context2.next=2;break;}return _context2.abrupt("return",null);case 2:_context2.next=4;return Promise.all(/* import() | vue */[__webpack_require__.e(8210), __webpack_require__.e(6962)]).then(__webpack_require__.bind(__webpack_require__, 8756));case 4:_yield$import2=_context2.sent;createApp=_yield$import2.createApp;h=_yield$import2.h;_context2.next=9;return Promise.all(/* import() */[__webpack_require__.e(8210), __webpack_require__.e(4314), __webpack_require__.e(828), __webpack_require__.e(6470), __webpack_require__.e(998), __webpack_require__.e(1090)]).then(__webpack_require__.bind(__webpack_require__, 79980));case 9:_yield$import3=_context2.sent;TagsInput=_yield$import3.default;$app=$('#vue_tags_input');$tags=$(`.b-input.${type}_tags`);initialHtml=$app[0].outerHTML;$tags.hide();_context2.t0=createApp;_context2.t1={beforeUnmount(){$tags.show();$(this.$el).replaceWith(initialHtml);},render(){return h(TagsInput,{label:$tags.find('label').text(),hint:$tags.find('.hint').html(),input:$tags.find('input')[0],value:$app.data('value'),autocompleteBasic:$app.data('autocomplete_basic'),autocompleteOther:$app.data('autocomplete_other')||[],tagsLimit:3,isDowncase:true});}};app=(0,_context2.t0)(_context2.t1);app.mount('#vue_tags_input');case 19:case"end":return _context2.stop();}},_callee2);}));return _initTagsApp.apply(this,arguments);}

/***/ }),

/***/ 79842:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _extended_form__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19974);
/* provided dependency */ var $ = __webpack_require__(74692);
var LINKED_TYPE_USER_SELECT='.topic-linked select.type';var tagsApp;var wallApp;pageUnload('topics_new','topics_edit','topics_create','topics_update',()=>{if(tagsApp){tagsApp.$destroy();tagsApp=null;}if(wallApp){wallApp.destroy();wallApp=null;}});pageLoad('topics_new','topics_edit','topics_create','topics_update',()=>{var $form=$('.b-form.edit_topic, .b-form.new_topic, .new-critique-form');var $wall=$form.find('.b-shiki_wall');var $video=(0,_extended_form__WEBPACK_IMPORTED_MODULE_0__.initVideo)('topic',$form,$wall);(0,_extended_form__WEBPACK_IMPORTED_MODULE_0__.initWall)($form,$wall).then(app=>wallApp=app);(0,_extended_form__WEBPACK_IMPORTED_MODULE_0__.initTagsApp)('topic').then(app=>tagsApp=app);(0,_extended_form__WEBPACK_IMPORTED_MODULE_0__.initForm)('topic',$form,$wall,$video);var $topicLinked=$('#topic_linked',$form);var $linkedType=$('#topic_linked_type',$form);var $topicLink=$('.topic-link',$form);var initialLinkedType=$('#topic_linked_type').val()||$('option',LINKED_TYPE_USER_SELECT).val();var isLinkedInitialized=false;$(LINKED_TYPE_USER_SELECT).on('change',({currentTarget})=>{var value=currentTarget.value;var loweredValue=value.toLowerCase();$linkedType.val(value);$topicLinked.data('autocomplete',$topicLinked.data(`${loweredValue}-autocomplete`)).attr('placeholder',$topicLinked.data(`${loweredValue}-placeholder`)).trigger('flushCache');if(isLinkedInitialized){$topicLinked.focus();}}).val(initialLinkedType).trigger('change');isLinkedInitialized=true;$('#topic_forum_id',$form).trigger('change');$('.topic-linked .remove',$form).on('click',e=>{e.preventDefault();$topicLink.find('a').remove();$('#topic_linked_id',$form).val('');// $('#topic_linked_type', $form).val('');
$('#topic_linked',$form).val('');$topicLinked.show();$(LINKED_TYPE_USER_SELECT).show();$topicLink.hide();});$topicLinked.completable().on('autocomplete:success',({currentTarget},entry)=>{var pluralLinkedType=`${$linkedType.val().toLowerCase()}s`.replace('ranobes','ranobe');currentTarget.value='';$('#topic_linked_id',$form).val(entry.id);$('#topic_linked_type',$form).val($linkedType.val());$topicLink.find('a').remove();$topicLink.prepend(`
        <a href='/${pluralLinkedType}/${entry.id}' class='bubbled b-link'>
          ${entry.name}
        </a>
      `);$topicLink.process();$topicLinked.hide();$(LINKED_TYPE_USER_SELECT).hide();$('.topic-link',$form).show();}).on('keypress',e=>{if(e.keyCode===10||e.keyCode===13){e.preventDefault();}});});

/***/ }),

/***/ 35765:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('topics_index','topics_show','topics_new','topics_edit','topics_create','topics_update',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$import,AnimesMenu;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:$('.reload').on('click',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee({currentTarget}){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentTarget.classList.add('active');_context.next=3;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(750);case 3:currentTarget.classList.remove('active');case 4:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());if(!$('.b-animes-menu').exists()){_context2.next=7;break;}_context2.next=4;return __webpack_require__.e(/* import() | db_entries_menu */ 8538).then(__webpack_require__.bind(__webpack_require__, 80014));case 4:_yield$import=_context2.sent;AnimesMenu=_yield$import.AnimesMenu;new AnimesMenu('.b-animes-menu');case 7:case"end":return _context2.stop();}},_callee2);})));pageLoad('topics_index',()=>{var $form=$('form.edit_user_preferences');$form.on('change','input',()=>$form.submit()).on('ajax:before',()=>{$('.ajax-loading',$form).show();$('.reload',$form).hide();}).on('ajax:complete',()=>{$('.ajax-loading',$form).hide();$('.reload',$form).show();});});

/***/ }),

/***/ 63336:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_load_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75612);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('critiques_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var $stars,$firstImage,imageOffset;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:$stars=$('.body-inner .critique-stars');if(!$stars.length){_context.next=9;break;}$firstImage=$('.body-inner .b-poster').first();if($firstImage.length){_context.next=5;break;}return _context.abrupt("return");case 5:_context.next=7;return (0,_utils_load_image__WEBPACK_IMPORTED_MODULE_0__/* .loadImageFinally */ .Ji)($firstImage[0]);case 7:imageOffset=$firstImage.offset();if(imageOffset&&imageOffset.top-($stars.offset().top+$stars.outerHeight())<15){$firstImage.addClass('critique-poster');}case 9:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 73230:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}pageLoad('translations_show',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$import,Packery;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(/* import() */[__webpack_require__.e(5352), __webpack_require__.e(5721)]).then(__webpack_require__.t.bind(__webpack_require__, 66217, 23));case 2:_yield$import=_context.sent;Packery=_yield$import.default;new Packery($('.translations')[0],{itemSelector:'.animes'});case 5:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 17966:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79308);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62193);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_tooltip_options__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(27910);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24418);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12691);
/* harmony import */ var _utils_p__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(94324);
/* harmony import */ var _utils_animated__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7084);
/* harmony import */ var _views_application_shiki_modal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(49946);
/* harmony import */ var _views_animes_catalog_filters__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(16346);
/* provided dependency */ var $ = __webpack_require__(74692);
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}// TODO: этот гигантский файл нуждается в рефакторинге
var listCache=[];var filterTimer=null;pageLoad('user_rates_index',()=>{$('.l-content').on('postloader:before',preprocessNextPage).on('postloader:success',processNextPage);applyListHandlers($('.l-content'));updateListCache();// графики
$('#scores, #types, #ratings').empty().bar({noData($chart){var text=_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_user_rates.insufficient_data');$chart.html(`<p class='b-nothing_here'>${text}</p>`);}});// фокус по инпуту фильтра по тайтлу
$('.b-collection_search input').on('focus',()=>{if(listCache.length){return;}updateListCache();});// разворачивание свёрнутых блоков при фокусе на инпут
$('.b-collection_search input').on('focus',()=>$('.collapsed').each((_index,node)=>{if(node.style.display==='block'){$(node).trigger('click');}}));// пишут в инпуте фильтра по тайтлу
$('.b-collection_search input').on('keyup',({keyCode})=>{if(keyCode===91||keyCode===18||keyCode===16||keyCode===17){return;}if(filterTimer){clearInterval(filterTimer);filterTimer=null;}filterTimer=setInterval(filterList,350);});// сортировка по клику на колонку
$('.order-control').on('click',({currentTarget})=>{var $node=$(currentTarget);if($node.hasClass('active')){$('.order-by-ranked').trigger('click');}else{var type=$node.data('order');$(`.orders.anime-params li[data-field='${_views_animes_catalog_filters__WEBPACK_IMPORTED_MODULE_9__/* .ORDER_FIELD */ .Q}'][data-value='${type}']`).trigger('click');}});// редактирование user_rate posters
$('.list-groups').on('ajax:before','.edit-user_rate',({currentTarget})=>{$(currentTarget).closest('.user_rate').addClass('b-ajax');});$('.list-groups').on('ajax:success','.edit-user_rate',({currentTarget},formHtml)=>{var $poster=$(currentTarget).closest('.user_rate');$poster.removeClass('b-ajax');var $form=$(formHtml).process();var modal=new _views_application_shiki_modal__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A($form);$('.remove',$form).on('ajax:success',e=>{e.stopImmediatePropagation();$poster.remove();modal.close();});$form.on('ajax:success',(_e,data)=>{$poster.children('.text').html(data&&data.text_html?data.text_html:'').process().toggleClass('hidden',lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(data.text_html));updateTextInCache(data);modal.close();});});// фильтры каталога
var basePath=document.location.pathname.replace(/(\/list\/(?:anime|manga))(\/.+)?/,'$1');new _views_animes_catalog_filters__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A(basePath,document.location.href,url=>{turbolinks__WEBPACK_IMPORTED_MODULE_1___default().visit(url,true);if($('.l-page.menu-expanded').exists()){$(document).one('page:change',()=>$('.l-page').addClass('menu-expanded'));}});});// фильтрация списка пользователя
function filterList(){clearInterval(filterTimer);filterTimer=null;// разворачивание свёрнутых элементов
var filterValue=$('.b-collection_search input').val().toLowerCase();listCache.forEach(block=>{var visible=false;var num=0;while(num<block.entries.length){var entry=block.entries[num];if(entry.target_name.indexOf(filterValue)!==-1||entry.target_russian.indexOf(filterValue)!==-1||entry.text.indexOf(filterValue)!==-1){visible=true;if(entry.display!==''){entry.display='';entry.node.style.display='';}}else if(entry.display!=='none'){entry.display='none';entry.node.style.display='none';}num+=1;}if(block.toggable){block.$container.toggle(visible);block.$nothingFound.toggle(!visible);}});$.force_appear();}// кеширование всех строк списка для производительности
function updateListCache(){listCache=$('.list-lines, .list-posters').toArray().map(container=>{var $container=$(container);var $nothingFound=$container.next('.nothing-found');var entries=$container.find('.user_rate').toArray().map(node=>{var $node=$(node);return{node,target_id:$node.data('target_id'),target_name:String($node.data('target_name')).toLowerCase(),target_russian:String($node.data('target_russian')).toLowerCase(),text:String($node.data('text')||'').toLowerCase(),display:node.style.display};});return{$container,$nothingFound,entries,toggable:!$container.next('.b-postloader').length};});}// обработчики для списка
function applyListHandlers($root){// открытие блока с редактирование записи по клику на строку с аниме
$('tr.editable',$root).on('click',e=>{var $editForm=$(e.currentTarget).next();if(!$editForm.is('.edit-form')){return;}e.stopImmediatePropagation();$editForm.find('.cancel').click();});$('tr.editable',$root).on('ajax:success',({currentTarget},html)=>{// прочие блоки редактирования скроем
var $anotherTrEdit=$('tr.edit-form');var $tr=$(currentTarget);var $trEdit=$(`<tr class='edit-form'>
      <td colspan='${$(currentTarget).children('td').length}'>${html}</td>
    </tr>`).insertAfter(currentTarget);var $form=$trEdit.find('form');(0,_utils_animated__WEBPACK_IMPORTED_MODULE_7__/* .animatedExpand */ .O)($form[0]);if($anotherTrEdit.exists()){(0,_utils_animated__WEBPACK_IMPORTED_MODULE_7__/* .animatedCollapse */ .F)($anotherTrEdit.find('form')[0]).then(()=>$anotherTrEdit.remove());}// отмена редактирования
$('.cancel',$trEdit).on('click',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return (0,_utils_animated__WEBPACK_IMPORTED_MODULE_7__/* .animatedCollapse */ .F)($form[0]);case 2:$trEdit.remove();case 3:case"end":return _context.stop();}},_callee);})));$form.on('ajax:before',()=>$form.addClass('b-ajax'));// применение изменений в редактировании
$form.on('ajax:success',(e,data)=>{shiki_utils__WEBPACK_IMPORTED_MODULE_2__.flash.notice(_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_user_rates.changes_saved'));$('.cancel',$trEdit).click();$('.current-value[data-field=score]',$tr).html(String(data.score||'0').replace(/^0$/,'–'));$('.current-value[data-field=chapters]',$tr).html(data.chapters);$('.current-value[data-field=volumes]',$tr).html(data.volumes);$('.current-value[data-field=episodes]',$tr).html(data.episodes);$('.rate-text',$tr).html(data.text_html?`<div>${data.text_html}</div>`:'').process();if(data.rewatches>0){var count=data.rewatches;var i18nKey=data.target_type==='Anime'?'rewatch':'reread';var word=(0,_utils_p__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A)(count,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t(`frontend.pages.p_user_rates.${i18nKey}.one`),_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t(`frontend.pages.p_user_rates.${i18nKey}.few`),_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t(`frontend.pages.p_user_rates.${i18nKey}.many`));$('.rewatches',$tr).html(`${count} ${word}`);}else{$('.rewatches',$tr).html('');}// обновляем текст в кеше
return updateTextInCache(data);});// удаление из списка
$('.remove',$form).on('ajax:success',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.stopPropagation();$('.cancel',$trEdit).click();_context2.next=4;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(250);case 4:$tr.remove();case 5:case"end":return _context2.stop();}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());});$('tr.unprocessed',$root).removeClass('unprocessed').find('a.tooltipped').tooltip(_objectSpread(_objectSpread({},_utils_tooltip_options__WEBPACK_IMPORTED_MODULE_4__/* .COMMON_TOOLTIP_OPTIONS */ .B),{},{offset:[-95,10],position:'bottom right',opacity:1}));// изменения оценки/числа просмотренных эпизодов у user_rate lines
var $trs=$('.list-lines .hoverable').off();$trs.off().hover(({currentTarget})=>{if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_2__.isMobile)()){return;}var $currentValue=$('.current-value',currentTarget);var $miscValue=$('.misc-value',currentTarget);var $newValue=$('.new-value',currentTarget);// если нет элемента, то создаём его
if(!$newValue.length){var val=parseInt($currentValue.text(),10);if(!val&&val!==0){val=0;}var newValueHtml=$currentValue.data('field')!=='score'?'<span class="new-value"><input type="text" class="input"/><span class="item-add"></span></span>':'<span class="new-value"><input type="text" class="input"/></span>';$newValue=$(newValueHtml).children('input').val(val).data({counter:val,max:$currentValue.data('max')||9999,min:$currentValue.data('min')}).data({field:$currentValue.data('field'),action:$currentValue.closest('tr').data('rate_url')}).parent().insertAfter($miscValue.length?$miscValue:$currentValue);applyNewValueHandlers($newValue);}$newValue.show();$currentValue.addClass('is-hidden');$('.misc-value',currentTarget).addClass('is-hidden');},({currentTarget})=>{if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_2__.isMobile)()){return;}if($('.new-value input',currentTarget).is(':focus')){return;}$('.new-value',currentTarget).hide();$('.current-value',currentTarget).removeClass('is-hidden');$('.misc-value',currentTarget).removeClass('is-hidden');}).on('click',e=>{if((0,shiki_utils__WEBPACK_IMPORTED_MODULE_2__.isMobile)()){return;}// клик на плюсик обрабатываем по дефолтному
if(e.target&&e.target.className==='item-add'){return;}$(e.currentTarget).trigger('mouseenter');$('input',e.currentTarget).focus().select();e.stopPropagation();e.preventDefault();});}function applyNewValueHandlers($newValue){// обработчики для инпутов листа
$('input',$newValue).off().on('blur',({currentTarget})=>{var input=currentTarget;var $input=$(input);$input.parent().parent().trigger('mouseleave');if(input.value<0){input.value=0;}if((parseInt(input.value,10)||0)===(parseInt($input.data('counter'),10)||0)){return;}var $value=$input.parent().parent().find('.current-value');var priorValue=$value.html();$input.data('counter',input.value);$value.html($input.data('counter')==='0'?'&ndash;':$input.data('counter'));_utils_axios__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.patch($input.data('action'),{user_rate:{[$input.data('field')]:input.value}}).catch(()=>{$value.html(priorValue);shiki_utils__WEBPACK_IMPORTED_MODULE_2__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.t('frontend.pages.p_user_rates.error_occurred'));});}).on('mousewheel',e=>{var input=e.currentTarget;var $input=$(input);if(!$input.is(':focus')){return;}e.preventDefault();if(e.originalEvent.wheelDelta&&e.originalEvent.wheelDelta>0){input.value=Math.min(parseInt(input.value,10)+1||0,parseInt($input.data('max'),10));}else if(e.originalEvent.wheelDelta){input.value=Math.max(parseInt(input.value,10)-1||0,parseInt($input.data('min'),10));}}).on('keydown',({currentTarget,keyCode})=>{var input=currentTarget;var $input=$(input);if(keyCode===38){input.value=Math.min(parseInt(input.value,10)+1||0,parseInt($input.data('max'),10));}if(keyCode===40){input.value=Math.max(parseInt(input.value,10)-1||0,parseInt($input.data('min'),10));}if(keyCode===27){input.value=$input.data('counter');$input.blur();}}).on('keypress',e=>{if(e.keyCode===13){$(e.currentTarget).blur();e.stopPropagation();}});// обработчик для плюсика у числа эпизодов/глав
$('.item-add',$newValue).on('click',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){var $input;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:$input=$(e.currentTarget).prev();e.stopPropagation();e.preventDefault();$input.val(parseInt($input.val(),10)+1).blur();$input.closest('td').trigger('mouseover');case 5:case"end":return _context3.stop();}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}());}// подгрузка очередной страницы списка
function preprocessNextPage(_e,$data){var $header=$data.find('header:first');var $presentHeader=$(`header.${$header.attr('class')}`);// при подгрузке могут быть 2 случая:
// 1. подгружается совершенно новый блок, и тогда $header будет пустым
// 2. погружается дальнейший контент уже существующего блока, и тогда...
if($presentHeader.exists()){// # присоединяем к уже существующим сущностям новые
var $entries=$header.next().children();$entries.detach().process()// very improtant. or else tooltips wont be displayed
.appendTo($presentHeader.next());applyListHandlers($entries);$header.next().remove();$header.remove();}applyListHandlers($data);}function processNextPage(){updateListCache();if(!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()($('.b-collection_search input').val())){filterList();}$.force_appear();}function updateTextInCache(data){listCache.forEach(cacheBlock=>{var cacheEntry=cacheBlock.entries.find(row=>row.target_id===data.target_id);if(cacheEntry){cacheEntry.text=data.text;}});}

/***/ }),

/***/ 72023:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _views_search_collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11442);
/* harmony import */ var _utils_tooltip_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(27910);
/* provided dependency */ var $ = __webpack_require__(74692);
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}pageLoad('userlist_comparer_show',()=>{new _views_search_collection__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A('.b-collection_search');$('.l-content').on('ajax:success',processContent);processContent();});function processContent(){$('tr.unprocessed').removeClass('unprocessed').find('a.tooltipped').tooltip(_objectSpread(_objectSpread({},_utils_tooltip_options__WEBPACK_IMPORTED_MODULE_1__/* .COMMON_TOOLTIP_OPTIONS */ .B),{},{offset:[-95,10],position:'bottom right',opacity:1}));}

/***/ }),

/***/ 96734:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6224);
/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_1__);
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}window.Turbolinks=(turbolinks__WEBPACK_IMPORTED_MODULE_1___default());pageLoad('users_similar',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!$('p.pending').exists()){_context.next=5;break;}url=document.location.href;_context.next=4;return (0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(5000);case 4:if(url===document.location.href){window.location.reload();}case 5:case"end":return _context.stop();}},_callee);})));

/***/ }),

/***/ 68292:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_difference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66245);
/* harmony import */ var lodash_difference__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_difference__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24418);
var store={};var queue=[];var queueLimit=300;function updateQueue(url,noDelete){if(queue.includes(url)){queue=lodash_difference__WEBPACK_IMPORTED_MODULE_0___default()(queue,[url]);}queue.push(url);while(!noDelete&&queue.length>queueLimit){var entry=queue.shift();delete store[entry];}}// function getUriPart(url) {
//   return url.replace(/https?:\/\/[^/]+/, '');
// }
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({fetch(url){if(store[url]){return store[url];}var promise=_utils_axios__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.get(url).catch(({response})=>{delete store[url];return{status:response.status,data:response.data};});store[url]=promise;updateQueue(url);return promise;},// clear(url) {
// delete store[url];
// },
reset(){// used in recommendations
store={};}});

/***/ }),

/***/ 9868:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ UserRatesTracker)
});

// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js
var isEmpty = __webpack_require__(62193);
var isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);
// EXTERNAL MODULE: ./app/packs/javascripts/utils/with.js
var utils_with = __webpack_require__(89234);
;// CONCATENATED MODULE: ./app/packs/javascripts/services/user_rates/track_catalog_entry.js
class TrackCatalogEntry{constructor(userRate,$container){this._$node(userRate,$container).data('model',userRate).addClass(userRate.status);}_$node(userRate,$container){return (0,utils_with/* default */.A)(this.constructor.selector(userRate),$container);}static selector(userRate){return`.c-${userRate.target_type.toLowerCase()}.entry-${userRate.target_id}`;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/user_rates/track_user_rate.js
class TrackUserRate{constructor(userRate,$container){this._$node(userRate,$container).data('model',userRate);}_$node(userRate,$container){return (0,utils_with/* default */.A)(this.constructor.selector(userRate),$container);}static selector(userRate){return`.b-user_rate.${userRate.target_type.toLowerCase()}-${userRate.target_id}`;}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/user_rates/update_catalog_entry.js
/* provided dependency */ var $ = __webpack_require__(74692);
class UpdateCatalogEntry{constructor(userRate){$(TrackCatalogEntry.selector(userRate)).each((_index,node)=>{var $node=$(node);var priorRate=$node.data('model');if(priorRate){$node.removeClass(priorRate.status);}$node.data('model',userRate);if(userRate.id){$node.addClass(userRate.status);}});}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/user_rates/update_user_rate.js
/* provided dependency */ var update_user_rate_$ = __webpack_require__(74692);
class UpdateUserRate{constructor(userRate){update_user_rate_$(TrackUserRate.selector(userRate)).each((_index,node)=>{update_user_rate_$(node).view().update(userRate);});}}
;// CONCATENATED MODULE: ./app/packs/javascripts/services/user_rates/tracker.js
class UserRatesTracker{static track(jsExports,$root){var _jsExports$user_rates,_jsExports$user_rates2;if(isEmpty_default()(jsExports===null||jsExports===void 0?void 0:jsExports.user_rates)){return;}(_jsExports$user_rates=jsExports.user_rates.catalog_entry)===null||_jsExports$user_rates===void 0||_jsExports$user_rates.forEach(userRate=>new TrackCatalogEntry(userRate,$root));(_jsExports$user_rates2=jsExports.user_rates.user_rate)===null||_jsExports$user_rates2===void 0||_jsExports$user_rates2.forEach(userRate=>new TrackUserRate(userRate,$root));jsExports.user_rates=null;}static update(userRate){new UpdateCatalogEntry(userRate);new UpdateUserRate(userRate);}}

/***/ }),

/***/ 7084:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  F: () => (/* binding */ animatedCollapse),
  O: () => (/* binding */ animatedExpand)
});

// EXTERNAL MODULE: ./node_modules/delay/index.js
var delay = __webpack_require__(29362);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/new_id.js
var uniqId=0;/* harmony default export */ const new_id = (()=>uniqId+=1);
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/animated.js
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}// animation method inspired on https://css-tricks.com/using-css-transitions-auto-dimensions/
var ANIMATION_DURATION=350;var animations={};function prepareAnimation(element){if(!element._SHIKI_ID){element._SHIKI_ID=new_id();}var isInTransition=!!animations[element._SHIKI_ID];if(element.classList.contains('hidden')){element.classList.remove('hidden');}if(isInTransition){cleanup(element);animations[element._SHIKI_ID]=_objectSpread({},animations[element._SHIKI_ID]);}else{var _getComputedStyle=getComputedStyle(element),paddingTop=_getComputedStyle.paddingTop,paddingBottom=_getComputedStyle.paddingBottom,marginTop=_getComputedStyle.marginTop,marginBottom=_getComputedStyle.marginBottom;animations[element._SHIKI_ID]={paddingTop,paddingBottom,marginTop,marginBottom,scrollHeight:`${element.scrollHeight}px`};}animations[element._SHIKI_ID].id=new_id();animations[element._SHIKI_ID].isInTransition=isInTransition;return animations[element._SHIKI_ID];}function animatedCollapse(element){var animation=prepareAnimation(element);element.style.willChange='height, padding-top, padding-bottom, margin-top, margin-bottom';element.classList.add('animated-collapse');if(animation.isInTransition){transitionToCollapse(element,animation);}else{element.style.height=animation.scrollHeight;requestAnimationFrame(()=>transitionToCollapse(element,animation));}return (0,delay/* default */.Ay)(ANIMATION_DURATION);}function transitionToCollapse(_x,_x2){return _transitionToCollapse.apply(this,arguments);}function _transitionToCollapse(){_transitionToCollapse=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(element,animation){var _animations$element$_2,_animations$element$_3;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(((_animations$element$_2=animations[element._SHIKI_ID])===null||_animations$element$_2===void 0?void 0:_animations$element$_2.id)!==animation.id)){_context.next=2;break;}return _context.abrupt("return");case 2:_context.next=4;return (0,delay/* default */.Ay)(0);case 4:// need to avoid skipping height animation in chrome
element.style.height='0';element.style.paddingTop='0';element.style.paddingBottom='0';element.style.marginTop='0';element.style.marginBottom='0';_context.next=11;return (0,delay/* default */.Ay)(ANIMATION_DURATION);case 11:if(!(((_animations$element$_3=animations[element._SHIKI_ID])===null||_animations$element$_3===void 0?void 0:_animations$element$_3.id)!==animation.id)){_context.next=13;break;}return _context.abrupt("return");case 13:element.classList.add('hidden');cleanup(element);delete animations[element._SHIKI_ID];case 16:case"end":return _context.stop();}},_callee);}));return _transitionToCollapse.apply(this,arguments);}function animatedExpand(element){var animation=prepareAnimation(element);if(!element.style.height){element.style.height='0';}if(!element.style.paddingTop){element.style.paddingTop='0';}if(!element.style.paddingBottom){element.style.paddingBottom='0';}if(!element.style.marginTop){element.style.marginTop='0';}if(!element.style.marginBottom){element.style.marginBottom='0';}if(animation.isInTransition){element.classList.add('animated-expand');transitionToExpand(element,animation);}else{element.style.willChange='height, padding-top, padding-bottom, margin-top, margin-bottom';requestAnimationFrame(()=>{var _animations$element$_;if(((_animations$element$_=animations[element._SHIKI_ID])===null||_animations$element$_===void 0?void 0:_animations$element$_.id)!==animation.id){return;}element.classList.add('animated-expand');requestAnimationFrame(()=>transitionToExpand(element,animation));});}return (0,delay/* default */.Ay)(ANIMATION_DURATION);}function transitionToExpand(_x3,_x4){return _transitionToExpand.apply(this,arguments);}function _transitionToExpand(){_transitionToExpand=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(element,animation){var _animations$element$_4,_animations$element$_5;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(((_animations$element$_4=animations[element._SHIKI_ID])===null||_animations$element$_4===void 0?void 0:_animations$element$_4.id)!==animation.id)){_context2.next=2;break;}return _context2.abrupt("return");case 2:element.style.height=animation.scrollHeight;element.style.paddingTop=animation.paddingTop;element.style.paddingBottom=animation.paddingBottom;element.style.marginTop=animation.marginTop;element.style.marginBottom=animation.marginBottom;_context2.next=9;return (0,delay/* default */.Ay)(ANIMATION_DURATION);case 9:if(!(((_animations$element$_5=animations[element._SHIKI_ID])===null||_animations$element$_5===void 0?void 0:_animations$element$_5.id)!==animation.id)){_context2.next=11;break;}return _context2.abrupt("return");case 11:cleanup(element);delete animations[element._SHIKI_ID];case 13:case"end":return _context2.stop();}},_callee2);}));return _transitionToExpand.apply(this,arguments);}function cleanup(element){element.style.height='';element.style.paddingTop='';element.style.paddingBottom='';element.style.marginTop='';element.style.marginBottom='';element.style.willChange='';if(element.classList.contains('animated-collapse')){element.classList.remove('animated-collapse');}else{element.classList.remove('animated-expand');}}

/***/ }),

/***/ 24418:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(80473);
/* harmony import */ var _utils_csrf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68164);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (axios__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.create({headers:Object.assign((0,_utils_csrf__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)().headers,{'X-Requested-With':'XMLHttpRequest'})}));

/***/ }),

/***/ 41696:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ checkHeight)
/* harmony export */ });
/* harmony import */ var _animated__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7084);
/* harmony import */ var _i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12691);
/* provided dependency */ var $ = __webpack_require__(74692);
function checkHeight(node,options={maxHeight:450,isNoShade:false,collapsedHeight:null,placeholderHeight:0}){var $node=$(node);if($node.hasClass('b-height_shortened')){return false;}if($node.height()<=options.maxHeight){return false;}var collapsedHeight=options.collapsedHeight||Math.round(options.maxHeight*2.0/3);var shadeHtml=options.isNoShade?'':'<div class=\'shade\'></div>';var placeholderHtml=options.placeholderHeight>0?`<div class="placeholder" style="height: ${options.placeholderHeight}px;"></div>`:'';var expandHtml=options.expandHtml!=null?options.expandHtml:`<div class="expand">${placeholderHtml}<span>`+`${_i18n__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.t('frontend.dynamic_elements.check_height.expand')}</span></div>`;var marginBottom=parseInt($node.css('margin-bottom'));var marginBottomHtml=marginBottom?` style="margin-bottom: ${marginBottom}px"`:'';var html='<div class="b-height_shortener"'+`${marginBottomHtml}>${shadeHtml}${expandHtml}</div>`;$node.addClass('b-height_shortened').css({height:collapsedHeight});$(html).insertAfter($node).on('click',e=>{if(expandHtml!=null&&!expandHtml){return;}$node.removeClass('b-height_shortened');(0,_animated__WEBPACK_IMPORTED_MODULE_0__/* .animatedExpand */ .O)($node[0]);$(e.currentTarget).remove();});return true;}

/***/ }),

/***/ 68164:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* provided dependency */ var $ = __webpack_require__(74692);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (()=>{var param=$('meta[name=csrf-param]').attr('content');var token=$('meta[name=csrf-token]').attr('content');var post={[param]:token};var headers={'X-CSRF-Token':token};return{post,headers};});

/***/ }),

/***/ 13269:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(74353);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var dayjs_locale_ru__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62796);
/* harmony import */ var dayjs_locale_ru__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs_locale_ru__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90445);
/* harmony import */ var dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var dayjs_plugin_localeData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21840);
/* harmony import */ var dayjs_plugin_localeData__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_localeData__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15750);
/* harmony import */ var dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6279);
/* harmony import */ var dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_5__);
dayjs__WEBPACK_IMPORTED_MODULE_0___default().extend((dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_2___default()));dayjs__WEBPACK_IMPORTED_MODULE_0___default().extend((dayjs_plugin_localeData__WEBPACK_IMPORTED_MODULE_3___default()));dayjs__WEBPACK_IMPORTED_MODULE_0___default().extend((dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_4___default()));dayjs__WEBPACK_IMPORTED_MODULE_0___default().extend((dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_5___default()));/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((dayjs__WEBPACK_IMPORTED_MODULE_0___default()));

/***/ }),

/***/ 94442:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   o: () => (/* binding */ popFlash),
/* harmony export */   v: () => (/* binding */ pushFlash)
/* harmony export */ });
function pushFlash(message){if(!('sessionStorage'in window)){return;}sessionStorage.setItem('flashMessage',message);}function popFlash(){if(!('sessionStorage'in window)){return null;}var message=sessionStorage.getItem('flashMessage');sessionStorage.removeItem('flashMessage');return message;}

/***/ }),

/***/ 12691:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ i18n)
});

// EXTERNAL MODULE: ./node_modules/i18n-js/dist/import/index.js + 16 modules
var dist_import = __webpack_require__(83126);
;// CONCATENATED MODULE: ./app/packs/javascripts/i18n/translations.json
const translations_namespaceObject = /*#__PURE__*/JSON.parse('{"en":{"activerecord":{"attributes":{"collection_link":{"group":"Group","text":"Comment"},"external_link":{"url":"Url"},"user_rate":{"chapters":"Chapters","episodes":"Episodes","rereads":"Number of Rereads","rewatches":"Number of Rewatches","score":"Score","scores":{"0":"","1":"Worst Ever","2":"Terrible","3":"Very Bad","4":"Bad","5":"So-so","6":"Fine","7":"Good","8":"Excellent","9":"Great","10":"Masterpiece!"},"status":"Status","statuses":{"anime":{"completed":"Completed","dropped":"Dropped","on_hold":"On Hold","planned":"Planned to Watch","rewatching":"Rewatching","watching":"Watching"},"manga":{"completed":"Completed","dropped":"Dropped","on_hold":"On Hold","planned":"Planned to Read","rewatching":"Rereading","watching":"Reading"},"ranobe":{"completed":"Completed","dropped":"Dropped","on_hold":"On Hold","planned":"Planned to Read","rewatching":"Rereading","watching":"Reading"}},"text":"Comments","volumes":"Volumes"}}},"frontend":{"about":{"comments_per_day":"Comments per day","new_users_per_day":"New users per day","unique_visitors":"Unique visitors","views":"Views","visits":"Visits"},"achievements":{"title":{"gained":"Achievement Gained","lost":"Achievement Lost"}},"actions":{"add":"Add"},"application":{"sure_to_leave_page":"You have not saved your comment!\\nAre you sure you want to leave this page?"},"blocks":{"click_loader":{"loading":"Loading..."},"feedback":{"message_sent":"Message sent"},"main_search":{"animes":"Anime search...","characters":"Character search...","mangakas":"Mangaka search...","mangas":"Manga search...","people":"Person search...","producers":"Producer search...","ranobe":"Light novel search...","seyu":"Seyu search...","users":"User search..."},"tooltip":{"loading":"Loading..."}},"collections":{"autocomplete":{"anime":"Anime title","character":"Character name","manga":"Manga title","person":"Person name","ranobe":"Light Novel title"},"disabled_add_group_hint":"To add a new group, fill in the blank group name","group_name":"Group name","json_warning":"Do not edit this if you are not sure what you are doing! Inserting invalid data will break the page.","kind":{"anime":"Anime","character":"Characters","manga":"Manga","person":"People","ranobe":"Light Novel and Novel"}},"coub_tags":{"name":"Name","nothing_here":"No names"},"desynced":{"name":"Field name","nothing_here":"No fields"},"dynamic_elements":{"authorized_action":{"register_to_complete_action":"Please <a href=\\"/users/sign_up\\">register</a> to complete this action."},"check_height":{"expand":"expand"},"comment":{"marked_as_offtopic":"Comment has been marked as offtopic","marked_as_summary":"Comment has been marked as summary","multiple_marked_as_offtopic":"Comments have been marked as offtopic","not_marked_as_offtopic":"Removed offtopic marking","not_marked_as_summary":"Removed summary marking","type_label":"Comment"},"day_registered_action":{"action_will_be_available":"Action will be available one day after <a href=\\"/users/sign_up\\">registration</a>."},"dialog":{"type_label":"Dialog"},"message":{"type_label":"Message"},"not_implemented_yet_action":"This action is temporarily not available","review":{"type_label":"Review"},"shiki_editable":{"your_request_will_be_considered":"Your request will be considered. Domo arigato."},"topic":{"comment":{"few":"comments","many":"comments","one":"comment"},"load_comments":"Load next %{comment_count} %{of_total_comments} %{comment_word}","new_comment_added":{"few":"%{count} new comments added","many":"%{count} new comments added","one":"%{count} new comment added"},"new_message_added":{"few":"%{count} new messages added","many":"%{count} new messages added","one":"%{count} new message added"},"of":"of","type_label":"Topic"},"week_registered_action":{"action_will_be_available":"Action will be available one day after <a href=\\"/users/sign_up\\">registration</a>."}},"external_links":{"groups":{"links":"Links","watch_online":"Online Watching"},"nothing_here":"No external links","warn":{"watch_online":"Link to the playlist/online player/official channel with online watching","youtube":"Link to the official channel with episodes of online watching"}},"fandubbers":{"name":"Name","nothing_here":"No names"},"fansubbers":{"name":"Name","nothing_here":"No names"},"images":{"cancel":"Cancel","confirm":"Confirm","delete":"Delete"},"lib":{"comments_notifier":{"number_of_unread_comments":"Number of unread comments"},"file_uploader":{"drop_picture_here":"Drop picture here","drop_pictures_here":"Drop pictures here","file_type_not_allowed":"The file is not an image","uploading_file":"uploading file %{filename} (%{filesize} kb)...","uploading_files":"uploading files %{uploadedCount} of %{totalCount} (%{kbUploaded} / %{kbTotal} kb)"},"jquery_shiki_file":{"browser_not_supported":"Error occured or maybe your browser is too old","drop_pictures_here":"Drop pictures here","file_type_not_allowed":"The file is not an image","loading_file":"loading file %{filename} (%{filesize} kB)...","please_try_again_later":"Error. Please try again later","too_large_file":"File is too large: 4 MB max","too_many_files":"Too many files: max %{count} files at once","wait_till_loaded":"Wait till files are loaded"},"jquery_shiki_forum":{"new_topics_added":{"few":"%{count} new topics added","many":"%{count} new topics added","one":"%{count} new topic added"}},"loading":"Loading...","nothing_found":"Nothing found","please_try_again_later":"Error. Please try again later","postloader":{"loading":"Loading..."},"rails_ujs_modified":{"body":"Text","created_at":"","email":"E-mail","forbidden":"","invalid_login_or_password":"Invalid login or password","nickname":"Nickname","password":"Password","subject":"Subject","title":"Title","you_are_not_authorized":"You are not authorized to perform this action"}},"licensors":{"name":"Name","nothing_here":"No names"},"options":{"name":"Option name","nothing_here":"No options"},"pages":{"p_animes":{"hentai":"Hentai / Roskomnadzor","licensed":"Licensed in Russia","no_data":"No data","watch_online":"Watch Online"},"p_contests":{"candidate":{"few":"%{count} candidates","many":"%{count} candidates","one":"%{count} candidate","other":"%{count} candidates"}},"p_profiles":{"day":{"few":"days","many":"days","one":"day"},"hour":{"few":"hours","many":"hours","one":"hour"},"label":{"full":"%{hours} %{hourWord} since %{fromDate} till %{toDate} (%{days} %{dayWord})","short":"%{hours} %{hourWord} on %{date}"},"page_is_reloading":"Page is reloading..."},"p_recommendations_index":{"dont_recommend_franchise":"Don\'t recommend this franchise any more"},"p_user_rates":{"changes_saved":"Changes saved","error_occurred":"Error occurred","insufficient_data":"Insufficient data","reread":{"few":"re-reads","many":"re-reads","one":"re-read"},"rewatch":{"few":"rewatches","many":"rewatches","one":"rewatch"}}},"poll_variants":{"name":"Text","nothing_here":"No options"},"polls":{"abstain":"Abstain","vote":"Vote"},"search":{"mode":{"anime":"Anime","character":"Character","index":"This page","manga":"Manga","person":"Person","ranobe":"Light novel"},"nothing_found":"Nothing found."},"shiki_editable":{"changed":"is changed by","click_to_reload":"Click to reload.","comment_converted":"Comment is converted into <a class=\'b-link\' href=\'%{url}\'>review</a> by","deleted":"is deleted by","message_changed":"is changed by","message_deleted":"is deleted by","review_converted":"Review is converted into <a class=\'b-link\' href=\'%{url}\'>comment</a> by"},"shiki_editor":{"blockquote":"Quote","bold":"Bold","bullet_list":"List","code_block":"Code block","code_inline":"Code","color":"Color","colors":{"black":"Black","blue":"Blue","brown":"Brown","gray":"Gray","green":"Green","orange":"Orange","pink":"Pink","red":"Red","violet":"Violet","yellow":"Yellow"},"file":"file","headline":"Headline","headlines":{"header_1":"# Large header","header_2":"## Medium header","header_3":"### Small header","headline":"#### Headline","midheadline":"##### Subheadline"},"huge_content_mode":"Text is too large. The visual editor will fail and has therefore been disabled.","huge_content_pasted":"Text is too large. The visual editor will fail and therefore paste has been cancelled.","image":"Image by link","italic":"Italic","link":"Link","normal_content_mode":"The visual editor is available again","not_available":"Commenting will be available one day after registering","preview":"Preview","prompt":{"image_url":"Image URL","link_url":"Link URL","spoiler_label":"Spoiler label"},"redo":"Redo last change","shiki_link":"Shiki link","smiley":"Smiley","source":"Source code","spoiler":"Spoiler","spoiler_block":"Spoiler block","spoiler_inline":"Spoiler","strike":"Strikethrough","text_cant_be_blank":"Text can\'t be blank","underline":"Underlined","undo":"Undo last change","unsaved_content":{"draft":"Draft","label":"The editor has unsaved draft. Restore it?","no":false,"yes":true},"upload":"Images upload"},"statistics":{"anime_in_year":"%{count} %{type} in %{year}","anime_of_type":"<b>%{count}</b> anime of type <b>%{type}</b>","anime_with_rating_in_year":"%{count} %{rating} anime in %{year}","anime_with_score":"<b>%{count}</b> anime scored <b>%{score}</b>","genres_share":"%{percent}% share of %{genre} in %{year}","number":"Number","ratings_share":"%{percent}% share of %{rating} in %{year}","share":"Share"},"styles":{"import_errors":"Failed to import following styles"},"synonyms":{"name":"Name","nothing_here":"No names"},"tags_input":{"label":"Tags"},"user_rates":{"button":{"add_to_list":"Add to My List","remove_from_my_list":"Remove from My List"}}}},"ru":{"activerecord":{"attributes":{"collection_link":{"group":"Группа","text":"Комментарий"},"external_link":{"url":"Ссылка"},"user_rate":{"chapters":"Главы","episodes":"Эпизоды","rereads":"Кол-во повторных чтений","rewatches":"Кол-во повторных просмотров","score":"Оценка","scores":{"0":"","1":"Хуже некуда","2":"Ужасно","3":"Очень плохо","4":"Плохо","5":"Более-менее","6":"Нормально","7":"Хорошо","8":"Отлично","9":"Великолепно","10":"Эпик вин!"},"status":"Статус","statuses":{"anime":{"completed":"Просмотрено","dropped":"Брошено","on_hold":"Отложено","planned":"Запланировано","rewatching":"Пересматриваю","watching":"Смотрю"},"manga":{"completed":"Прочитано","dropped":"Брошено","on_hold":"Отложено","planned":"Запланировано","rewatching":"Перечитываю","watching":"Читаю"},"ranobe":{"completed":"Прочитано","dropped":"Брошено","on_hold":"Отложено","planned":"Запланировано","rewatching":"Перечитываю","watching":"Читаю"}},"text":"Комментарий","volumes":"Тома"}}},"frontend":{"about":{"comments_per_day":"Комментариев за день","new_users_per_day":"Новых пользователей за день","unique_visitors":"Уникальные посетители","views":"Просмотры","visits":"Посещения"},"achievements":{"title":{"gained":"Открыто достижение","lost":"Потеряно достижение"}},"actions":{"add":"Добавить"},"application":{"sure_to_leave_page":"Здесь написан и не сохранён какой-то комментарий!\\nТочно покинуть страницу?"},"blocks":{"click_loader":{"loading":"Загрузка..."},"feedback":{"message_sent":"Сообщение отправлено"},"main_search":{"animes":"Поиск по аниме...","characters":"Поиск по персонажам...","mangakas":"Поиск по мангакам...","mangas":"Поиск по манге...","people":"Поиск по всем людям...","producers":"Поиск по режиссёрам...","ranobe":"Поиск по ранобэ...","seyu":"Поиск по сэйю...","users":"Поиск по пользователям..."},"tooltip":{"loading":"Загрузка..."}},"collections":{"autocomplete":{"anime":"Название аниме","character":"Имя персонажа","manga":"Название манги","person":"Имя человека","ranobe":"Название ранобэ"},"disabled_add_group_hint":"Для добавления следующей группы заполните пустое название группы","group_name":"Название группы","json_warning":"Не редактируй это, если не уверен(-а) в том, что делаешь! Вставка неправильных данных сломает работу страницы.","kind":{"anime":"Аниме","character":"Персонажи","manga":"Манга","person":"Люди","ranobe":"Ранобэ и новеллы"}},"coub_tags":{"name":"Название","nothing_here":"Нет названий"},"desynced":{"name":"Название поля","nothing_here":"Нет поля"},"dynamic_elements":{"authorized_action":{"register_to_complete_action":"Для этого действия тебе необходима <a href=\\"/users/sign_up\\">регистрация</a> на сайте."},"check_height":{"expand":"развернуть"},"comment":{"marked_as_offtopic":"Комментарий помечен оффтопиком","marked_as_summary":"Комментарий помечен отзывом","multiple_marked_as_offtopic":"Комментарии помечены оффтопиком","not_marked_as_offtopic":"Метка оффтопика снята","not_marked_as_summary":"Метка отзыва снята","type_label":"Комментарий"},"day_registered_action":{"action_will_be_available":"Действие станет доступно через сутки после <a href=\\"/users/sign_up\\">регистрации</a>."},"dialog":{"type_label":"Диалог"},"message":{"type_label":"Сообщение"},"not_implemented_yet_action":"Это действие временно недоступно","review":{"type_label":"Отзыв"},"shiki_editable":{"your_request_will_be_considered":"Твой запрос будет рассмотрен. Домо аригато."},"topic":{"comment":{"few":"комментария","many":"комментариев","one":"комментарий"},"load_comments":"Загрузить ещё %{comment_count} %{of_total_comments} %{comment_word}","new_comment_added":{"few":"Добавлено %{count} новых комментария","many":"Добавлено %{count} новых комментариев","one":"Добавлен %{count} новый комментарий"},"new_message_added":{"few":"Добавлено %{count} новых сообщения","many":"Добавлено %{count} новых сообщений","one":"Добавлено %{count} новое сообщение"},"of":"из","type_label":"Топик"},"week_registered_action":{"action_will_be_available":"Действие станет доступно через неделю после <a href=\\"/users/sign_up\\">регистрации</a>."}},"external_links":{"groups":{"links":"Ссылки","watch_online":"Онлайн-просмотр"},"nothing_here":"Нет ссылок","warn":{"watch_online":"Ссылка на плейлист/страницу с плеером/официальный канал с онлайн-просмотром","youtube":"Ссылка на официальный канал, где выложены серии для онлайн-просмотра"}},"fandubbers":{"name":"Название","nothing_here":"Нет названий"},"fansubbers":{"name":"Название","nothing_here":"Нет названий"},"images":{"cancel":"Отменить","confirm":"Подтвердить","delete":"Удалить"},"lib":{"comments_notifier":{"number_of_unread_comments":"Число непрочитанных комментариев"},"file_uploader":{"drop_picture_here":"Перетаскивай сюда картинку","drop_pictures_here":"Перетаскивай сюда картинки","file_type_not_allowed":"Файл не является изображением","uploading_file":"загрузка файла %{filename} (%{filesize} КБ)","uploading_files":"загрузка файлов %{uploadedCount} из %{totalCount} (%{kbUploaded} / %{kbTotal} КБ)"},"jquery_shiki_file":{"browser_not_supported":"Случилась ошибка, или версия браузера устарела","drop_pictures_here":"Перетаскивай сюда картинки","file_type_not_allowed":"Файл не является изображением","loading_file":"загрузка файла %{filename} (%{filesize} КБ)...","please_try_again_later":"Ошибка. Попробуй ещё раз позже","too_large_file":"Файл слишком большой: максимум 4 мегабайта","too_many_files":"Слишком много файлов: максимум %{count} за раз","wait_till_loaded":"Дождись загрузки файлов"},"jquery_shiki_forum":{"new_topics_added":{"few":"Добавлены %{count} новых топика","many":"Добавлено %{count} новых топиков","one":"Добавлен %{count} новый топик"}},"loading":"Загрузка...","nothing_found":"Ничего не найдено","please_try_again_later":"Ошибка. Попробуй ещё раз позже","postloader":{"loading":"Загрузка..."},"rails_ujs_modified":{"body":"Текст","created_at":"","email":"Эл. почта","forbidden":"","invalid_login_or_password":"Неверный логин или пароль","nickname":"Логин","password":"Пароль","subject":"Название","title":"Название","you_are_not_authorized":"У тебя нет прав для данного действия"}},"licensors":{"name":"Название","nothing_here":"Нет названий"},"options":{"name":"Настройка","nothing_here":"Нет настроек"},"pages":{"p_animes":{"hentai":"Хентай / Роскомнадзор","licensed":"Лицензировано в РФ","no_data":"Нет данных","watch_online":"Смотреть онлайн"},"p_contests":{"candidate":{"few":"%{count} участника","many":"%{count} участников","one":"%{count} участник","other":"%{count} участников"}},"p_profiles":{"day":{"few":"дня","many":"дней","one":"день"},"hour":{"few":"часа","many":"часов","one":"час"},"label":{"full":"%{hours} %{hourWord} с %{fromDate} по %{toDate} (%{days} %{dayWord})","short":"%{hours} %{hourWord} %{date}"},"page_is_reloading":"Перезагрузка страницы..."},"p_recommendations_index":{"dont_recommend_franchise":"Больше не рекомендовать эту франшизу"},"p_user_rates":{"changes_saved":"Изменения сохранены","error_occurred":"Произошла ошибка","insufficient_data":"Недостаточно данных","reread":{"few":"повторных прочтения","many":"повторных прочтений","one":"повторное прочтение"},"rewatch":{"few":"повторных просмотра","many":"повторных просмотров","one":"повторный просмотр"}}},"poll_variants":{"name":"Текст","nothing_here":"Нет вариантов"},"polls":{"abstain":"Воздержаться","vote":"Голосовать"},"search":{"mode":{"anime":"Аниме","character":"Персонаж","index":"Текущая страница","manga":"Манга","person":"Человек","ranobe":"Ранобэ"},"nothing_found":"Ничего не найдено."},"shiki_editable":{"changed":"изменён пользователем","click_to_reload":"Нажми для обновления.","comment_converted":"Комментарий преобразован в <a class=\'b-link\' href=\'%{url}\'>отзыв</a>","deleted":"удалён пользователем","message_changed":"изменено пользователем","message_deleted":"удалено пользователем","review_converted":"Отзыв преобразован в <a class=\'b-link\' href=\'%{url}\'>комментарий</a>"},"shiki_editor":{"blockquote":"Цитата","bold":"Жирный","bullet_list":"Список","code_block":"Блок кода","code_inline":"Код","color":"Цвет","colors":{"black":"Чёрный","blue":"Синий","brown":"Коричневый","gray":"Серый","green":"Зелёный","orange":"Оранжевый","pink":"Розовый","red":"Красный","violet":"Фиолетовый","yellow":"Жёлтый"},"file":"файл","headline":"Заголовок","headlines":{"header_1":"# Большой заголовок","header_2":"## Средний заголовок","header_3":"### Малый заголовок","headline":"#### Заголовок","midheadline":"##### Подзаголовок"},"huge_content_mode":"Слишком много контента. Визуальный редактор не справится и поэтому отключён.","huge_content_pasted":"Слишком много контента. Визуальный редактор не справится, и поэтому вставка была отменена.","image":"Картинка по ссылке","italic":"Курсив","link":"Ссылка","normal_content_mode":"Визуальный редактор снова доступен","not_available":"Комментирование будет доступно через сутки после регистрации","preview":"Предпросмотр","prompt":{"image_url":"URL картинки","link_url":"URL ссылки","spoiler_label":"Заголовок спойлера"},"redo":"Повторить последнее изменение","shiki_link":"Шики-ссылка","smiley":"Смайлик","source":"Код","spoiler":"Спойлер","spoiler_block":"Блок спойлера","spoiler_inline":"Спойлер","strike":"Зачёркнутый","text_cant_be_blank":"Текст не может быть пустым","underline":"Подчёркнутый","undo":"Отменить последнее изменение","unsaved_content":{"draft":"Текст","label":"В редакторе остался не сохранённый текст. Восстановить?","no":"Нет","yes":"Да"},"upload":"Загрузка картинок"},"statistics":{"anime_in_year":"%{count} %{type} за %{year} год","anime_of_type":"<b>%{count}</b> аниме типа <b>%{type}</b>","anime_with_rating_in_year":"%{count} аниме у %{rating} за %{year} год","anime_with_score":"<b>%{count}</b> аниме с оценкой <b>%{score}</b>","genres_share":"%{percent}% у %{genre} за %{year} год","number":"Количество","ratings_share":"%{percent}% у %{rating} за %{year} год","share":"Процент"},"styles":{"import_errors":"Не удалось импортировать следующие стили"},"synonyms":{"name":"Название","nothing_here":"Нет названий"},"tags_input":{"label":"Теги"},"user_rates":{"button":{"add_to_list":"Добавить в список","remove_from_my_list":"Удалить из списка"}}}}}');
;// CONCATENATED MODULE: ./app/packs/javascripts/utils/i18n.js
/* harmony default export */ const i18n = (new dist_import/* I18n */.F2(translations_namespaceObject));

/***/ }),

/***/ 70416:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (e=>e.button===1||e.button===0&&(e.ctrlKey||e.metaKey));

/***/ }),

/***/ 60957:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var requireTemplates=__webpack_require__(32351);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (requireTemplates.keys().reduce((memo,module)=>{memo[module.replace(/^\.\/|\.\w+$/g,'')]=requireTemplates(module);return memo;},{}));

/***/ }),

/***/ 75612:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ji: () => (/* binding */ loadImageFinally),
/* harmony export */   U6: () => (/* binding */ loadImagesFinally),
/* harmony export */   yb: () => (/* binding */ imagePromiseFinally),
/* harmony export */   z6: () => (/* binding */ loadImages)
/* harmony export */ });
/* unused harmony export loadImage */
/* harmony import */ var _morr_image_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83570);
/* harmony import */ var p_defer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97313);
/* eslint-disable no-param-reassign */function loadImage(node,selector='img'){if(node.constructor===String){node=document.querySelector(node);}return (0,_morr_image_promise__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(node.querySelector(selector));}function loadImages(node,selector='img'){if(node.constructor===String){node=document.querySelector(node);}return (0,_morr_image_promise__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(node.querySelectorAll(selector));}function loadImageFinally(...args){var deferred=(0,p_defer__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)();loadImage(...args).catch(()=>null)// don't need to know about these errors
.finally(()=>deferred.resolve());return deferred.promise;}function loadImagesFinally(...args){var deferred=(0,p_defer__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)();loadImages(...args).catch(()=>null)// don't need to know about these errors
.finally(()=>deferred.resolve());return deferred.promise;}function imagePromiseFinally(...args){var deferred=(0,p_defer__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)();(0,_morr_image_promise__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(...args).catch(()=>null)// don't need to know about these errors
.finally(()=>deferred.resolve());return deferred.promise;}

/***/ }),

/***/ 94324:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((number,...args)=>{var n=parseInt(number,10);var plural=n%10===1&&n%100!==11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;plural=n===0?0:plural;return args[plural];});

/***/ }),

/***/ 27910:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ COMMON_TOOLTIP_OPTIONS),
/* harmony export */   s: () => (/* binding */ ANIME_TOOLTIP_OPTIONS)
/* harmony export */ });
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73148);
/* harmony import */ var _i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12691);
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var TOOLTIP_TEMPLATE=`<div> \
  <div class='tooltip-inner'> \
    <div class='tooltip-arrow'></div> \
    <div class='clearfix'> \
      <div class='close'></div> \
      <div class='tooltip-details'> \
      <div class='ajax-loading' title='${_i18n__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.t('frontend.blocks.tooltip.loading')}' /> \
      </div> \
    </div> \
    <div class='dropshadow-top'></div> \
    <div class='dropshadow-top-right'></div> \
    <div class='dropshadow-right'></div> \
    <div class='dropshadow-bottom-right'></div> \
    <div class='dropshadow-bottom'></div> \
    <div class='dropshadow-bottom-left'></div> \
    <div class='dropshadow-left'></div> \
    <div class='dropshadow-top-left'></div> \
  </div> \
</div>`;var COMMON_TOOLTIP_OPTIONS={delay:150,predelay:250,position:'top right',defaultTemplate:TOOLTIP_TEMPLATE,onBeforeShow(){var $trigger=this.getTrigger();// удаляем тултипы у всего внутри
$trigger.find('[title]').attr({title:''});var $close=this.getTip().find('.close');if(!$close.data('binded')){$close.data({binded:true}).on('click',()=>this.hide());var url=($trigger.data('href')||$trigger.attr('href')||'').replace(/\/tooltip/,'');if(url){this.getTip().find('.link').attr({href:url});}if(url.match(/\/genres\//)){this.getTip().find('.link').hide();}}}};var ANIME_TOOLTIP_OPTIONS=_objectSpread(_objectSpread({},COMMON_TOOLTIP_OPTIONS),{},{offset:[-4,10,-10],position:'top right',predelay:350,ignoreSelector:'.text',onBeforeFetch(){// добавляем к ссылке minified, если у $trigger нет собственной картинки
var $trigger=this.getTrigger();var $image=$trigger.find('.image-decor img');if($image.exists()&&$image.width()>=110){var minifiedTooltipUrl=new tiny_uri__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A($trigger.data('tooltip_url')).query.set('minified','1').toString();$trigger.data('tooltip_url',minifiedTooltipUrl);this.getTip().addClass('minified');}},// fix stale tooltips in case new page is loaded with turbolinks
onShow(){var tooltipPosition=this.getTip().position();if(tooltipPosition.top<20&&tooltipPosition.left<20){this.getTip().remove();}}});

/***/ }),

/***/ 89234:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((selector,$root)=>{var $filteredRoot=$root.filter(selector);if($filteredRoot.length){return $root.find(selector).add($filteredRoot);}return $root.find(selector);});

/***/ }),

/***/ 34151:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   colors: () => (/* binding */ colors)
/* harmony export */ });
var colors_hz=['#44bbff','#c09eda','#9bd51f','#f7b42c','#f27490','#fc575e','#f27624','#90d5ec','#f49ac1','#ca5','#b5e4f2','#9ab'];var colors_d3=['#1f77b4','#aec7e8','#ff7f0e','#ffbb78','#2ca02c','#98df8a','#d62728','#ff9896','#9467bd','#c5b0d5','#8c564b','#c49c94','#e377c2','#f7b6d2','#7f7f7f','#c7c7c7','#bcbd22','#dbdb8d','#17becf','#9edae5'];// cosnt colors_2 = ['#4682b4', '#2ca02c', '#d65757', '#db843d', '#a47d7c', '#bcbd22', '#ff9896', '#f7b42c', '#80699b', '#c5b0d5'];
var colors=[...colors_hz,...colors_d3];

/***/ }),

/***/ 17293:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(74692);
/*
 * jQuery Autocomplete plugin 1.1
 *
 * Copyright (c) 2009 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.autocomplete.js 15 2009-08-22 10:30:27Z joern.zaefferer $
 */ // плагин сильно пропатчен!
$.fn.extend({autocomplete:function autocomplete(urlOrData,options){var isUrl=typeof urlOrData=='string';options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);// if highlight is set to false, replace it with a do-nothing function
options.highlight=options.highlight||function(value){return value;};// if the formatMatch option is not specified, then use formatItem for backwards compatibility
options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function result(handler){return this.on('result',handler);},search:function search(handler){return this.trigger('search',[handler]);},flushCache:function flushCache(){return this.trigger('flushCache');},setOptions:function setOptions(options){return this.trigger('setOptions',[options]);},unautocomplete:function unautocomplete(){return this.trigger('unautocomplete');}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};// Create $ object for input element
var $input=$(input).attr('autocomplete','off').addClass(options.inputClass);var timeout;var previousValue='';var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$input.on('keydown.autocomplete',function(event){// a keypress means the input has focus
// avoids issue where input had focus before the autocomplete was applied
hasFocus=1;// track last key pressed
lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}break;// matches also semicolon
case options.multiple&&$.trim(options.multipleSeparator)==','&&KEY.COMMA:case KEY.RETURN:if(selectCurrent()){// stop default to prevent a form submit, Opera needs special handling
event.preventDefault();blockSubmit=true;return false;}else{event.preventDefault();}break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){// track whether the field has focus, we shouldn't process any
// results if the field no longer has focus
hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){// show select when clicking in a focused field
if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).on('search',function(){// TODO why not just specifying both arguments?
var fn=arguments.length>1?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}if(typeof fn=='function')fn(result);else $input.trigger('result',result&&[result.data,result.value]);}$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).on('flushCache',function(){cache.flush();}).on('setOptions',function(){$.extend(options,arguments[1]);// if we've updated the data, repopulate
if('data'in arguments[1])cache.populate();}).on('unautocomplete',function(){select.unbind();$input.off();$(input.form).off('.autocomplete');}).on('autocomplete:receiveData',function(_e,data){receiveData('',data);});function selectCurrent(){var selected=select.selected();if(!selected){$input.trigger('result');return false;}var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){var seperator=options.multipleSeparator.length;var cursorAt=$(input).selection().start;var wordAt,progress=0;$.each(words,function(i,word){progress+=word.length;if(cursorAt<=progress){wordAt=i;return false;}progress+=seperator;});words[wordAt]=v;// TODO this should set the cursor to the right position, but it gets overriden somewhere
//$.Autocompleter.Selection(input, progress + seperator, progress + seperator);
v=words.join(options.multipleSeparator);}v+=options.multipleSeparator;}$input.val(v);hideResultsNow();$input.trigger('result',[selected]);return true;}function onChange(crap,skipPrevCheck){if(!url()){return;}if(lastKeyPressCode==KEY.DEL){select.hide();return;}var currentValue=encodeURIComponent($input.val().trim());if(!skipPrevCheck&&currentValue==previousValue)return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars&&!currentValue.match(/^https?(?::\/\/|%3A%2F%2F)/)){$input.addClass(options.loadingClass);if(!options.matchCase)currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}}function trimWords(value){if(!value)return[''];if(!options.multiple)return[$.trim(value)];return $.map(value.split(options.multipleSeparator),function(word){return $.trim(value).length?$.trim(word):null;});}function lastWord(value){if(!options.multiple)return value;var words=trimWords(value);if(words.length==1)return words[0];var cursorAt=$(input).selection().start;if(cursorAt==value.length){words=trimWords(value);}else{words=trimWords(value.replace(value.substring(cursorAt),''));}return words[words.length-1];}// fills in the input box w/the first match (assumed to be the best match)
// q: the term entered
// sValue: the first matching result
function autoFill(q,sValue){// autofill in the complete box w/the first match as long as the user hasn't entered in more data
// if the last user key pressed was backspace, don't autofill
if(options.autoFill&&lastWord($input.val()).toLowerCase()==q.toLowerCase()&&lastKeyPressCode!=KEY.BACKSPACE){// fill in the value (keep the case the user has typed)
$input.val($input.val()+sValue.substring(lastWord(previousValue).length));// select the portion of the value not typed by the user (so the next character will erase)
$(input).selection(previousValue.length,previousValue.length+sValue.length);}}function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);}function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){// call search and run callback
$input.search(function(result){// if no value found, clear the input box
if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:''));}else{$input.val('');$input.trigger('result',null);}}});}}function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}}function url(){return options.url.match(/^data-/)?$input.data(options.url.replace(/^data-/,'')):options.url;}function request(term,_success,failure){if(!options.matchCase)term=term.toLowerCase();term=term.trim();var data=cache.load(term);// recieve the cached data
if(data&&data.length){_success(term,data);// if an AJAX url has been supplied, try loading the data now
}else if(typeof options.url=='string'&&options.url.length>0){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=='function'?param():param;});if(arguments.callee.$ajax){arguments.callee.$ajax.abort();}arguments.callee.$ajax=$.ajax({// try to leverage ajaxQueue plugin to abort previous requests
mode:'abort',// limit abortion to this input
port:'autocomplete'+input.name,dataType:options.dataType,url:url().match(/\?/)?url()+'&search='+lastWord(term):url()+'?search='+lastWord(term),success:function success(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);_success(term,parsed);}});}else{// if we have a failure, we need to empty the list -- this prevents the the [TAB] key from selecting the last successful match
select.emptyList();failure(term);}}function parse(data){var parsed=[];var rows=data.split('\n');for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split('|');parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}return parsed;}function stopLoading(){$input.removeClass(options.loadingClass);}};$.Autocompleter.defaults={inputClass:'ac_input',resultsClass:'ac_results',loadingClass:'ac_loading',minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function formatItem(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:', ',highlight:function highlight(value,term){return value.replace(new RegExp('(?![^&;]+;)(?!<[^<>]*)('+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,'\\$1')+')(?![^<>]*>)(?![^&;]+;)','gi'),'<strong>$1</strong>');},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)s=s.toLowerCase();var i=s.indexOf(sub);if(options.matchContains=='word'){i=s.toLowerCase().search('\\b'+sub.toLowerCase());}if(i==-1)return false;return i==0||options.matchContains;}function add(q,value){if(length>options.cacheLength){flush();}if(!data[q]){length++;}data[q]=value;}function populate(){if(!options.data)return false;// track the matches
var stMatchSets={},nullData=0;// no url was specified, we need to adjust the cache length to make sure it fits the local data store
if(!options.url)options.cacheLength=1;// track all options for minChars = 0
stMatchSets['']=[];// loop through the array and create a lookup structure
for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];// if rawValue is a string, make an array otherwise just reference the array
rawValue=typeof rawValue=='string'?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(typeof value==='undefined'||value===false)continue;var firstChar=value.charAt(0).toLowerCase();// if no lookup array for this character exists, look it up now
if(!stMatchSets[firstChar])stMatchSets[firstChar]=[];// if the match is a string
var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};// push the current match into the set list
stMatchSets[firstChar].push(row);// keep track of minChars zero items
if(nullData++<options.max){stMatchSets[''].push(row);}}// add the data items to the cache
$.each(stMatchSets,function(i,value){// increase the cache size
options.cacheLength++;// add to the cache
add(i,value);});}// populate any existing data
setTimeout(populate,25);function flush(){data={};length=0;}return{flush:flush,add:add,populate:populate,load:function load(q){if(!options.cacheLength||!length)return null;/*
       * if dealing w/local data and matchContains than we must make sure
       * to loop through all the data collections looking for matches
       */if(!options.url&&options.matchContains){// track all matches
var csub=[];// loop through all the data grids for matches
for(var k in data){// don't search through the stMatchSets[""] (minChars: 0) cache
// this prevents duplicates
if(k.length>0){var c=data[k];$.each(c,function(i,x){// if we've got a match, add it to the array
if(matchSubset(x.value,q)){csub.push(x);}});}}return csub;}else// if the exact item exists, use it
if(data[q]){return data[q];}else if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:'ac_over'};var listItems,active=-1,data,term='',needsInit=true,element,list;// Create results
function init(){if(!needsInit)return;element=$('<div/>').hide().addClass(options.resultsClass).css('position','absolute').appendTo(document.body);list=$('<ul/>').appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$('li',list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();// TODO provide option to avoid setting focus again after selection? useful for cleanup-on-focus
input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)element.css('width',options.width);needsInit=false;}function target(event){var element=event.target;while(element&&element.tagName!='LI')element=element.parentNode;// more fun with IE, sometimes event.target is empty, just ignore it then
if(!element)return[];return element;}function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if(offset+activeItem[0].offsetHeight-list.scrollTop()>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}}function movePosition(step){active+=step;if(active<0){active=listItems.length-1;}else if(active>=listItems.length){active=0;}}function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])continue;var formatted=options.formatItem(data[i],i+1,max);if(formatted===false)continue;var li=$('<li/>').html(options.highlight(formatted,term)).addClass(i%2==0?'ac_even':'ac_odd').appendTo(list)[0];$.data(li,'ac_data',data[i]);}listItems=list.find('li');if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}// apply bgiframe if available
if($.fn.bgiframe)list.bgiframe();}return{display:function display(d,q){init();data=d;term=q;fillList();},next:function next(){moveSelect(1);},prev:function prev(){moveSelect(-1);},pageUp:function pageUp(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function pageDown(){if(active!=listItems.length-1&&active+8>listItems.length){moveSelect(listItems.length-1-active);}else{moveSelect(8);}},hide:function hide(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function visible(){return element&&element.is(':visible');},current:function current(){return this.visible()&&(listItems.filter('.'+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function show(){var offset='$anchor'in options&&options.$anchor?options.$anchor.offset():$(input).offset();element.css({width:typeof options.width=='string'||options.width>0?options.width:$(input).outerWidth(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:'auto'});if(navigator.userAgent.indexOf('MSIE')!=-1&&typeof document.body.style.maxHeight==='undefined'){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){// IE doesn't recalculate width when scrollbar disappears
listItems.width(list.width()-parseInt(listItems.css('padding-left'))-parseInt(listItems.css('padding-right')));}}}},selected:function selected(){var selected=listItems&&listItems.filter('.'+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],'ac_data');},emptyList:function emptyList(){list&&list.empty();},unbind:function unbind(){element&&element.remove();}};};$.fn.selection=function(start,end){if(start!==undefined){return this.each(function(){if(this.createTextRange){var selRange=this.createTextRange();if(end===undefined||start==end){selRange.move('character',start);selRange.select();}else{selRange.collapse(true);selRange.moveStart('character',start);selRange.moveEnd('character',end);selRange.select();}}else if(this.setSelectionRange){this.setSelectionRange(start,end);}else if(this.selectionStart){this.selectionStart=start;this.selectionEnd=end;}});}var field=this[0];if(field.createTextRange){var range=document.selection.createRange(),orig=field.value,teststring='<->',textLength=range.text.length;range.text=teststring;var caretAt=field.value.indexOf(teststring);field.value=orig;this.selection(caretAt,caretAt+textLength);return{start:caretAt,end:caretAt+textLength};}else if(field.selectionStart!==undefined){return{start:field.selectionStart,end:field.selectionEnd};}};

/***/ }),

/***/ 33318:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
/*
 * cacheImage: a jQuery plugin
 *
 * cacheImage is a simple jQuery plugin for pre-caching images.  The
 * plugin can be used to eliminate flashes of unstyled content (FOUC) and
 * improve perceived page load time.  Callbacks for load, error and abort
 * events are provided.
 *
 * For usage and examples, visit:
 * http://github.com/alexrabarts/jquery-cacheimage
 *
 * Licensed under the MIT:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Copyright (c) 2008 Stateless Systems (http://statelesssystems.com)
 *
 * @author   Alex Rabarts (alexrabarts -at- gmail -dawt- com)
 * @requires jQuery v1.2 or later
 * @version  0.2.1
 */(function($){$.extend($,{cacheImage:function cacheImage(src,options){if(typeof src==='object'){$.each(src,function(){$.cacheImage(String(this),options);});return;}var image=new Image();options=options||{};$.each(['load','error','abort'],function(){// Callbacks
var e=String(this);if(typeof options[e]==='function'){$(image).bind(e,options[e]);}if(typeof options.complete==='function'){$(image).bind(e,options.complete);}});image.src=src;return image;}});$.extend($.fn,{cacheImage:function cacheImage(options){return this.each(function(){$.cacheImage(this.src,options);});}});})(jQuery);

/***/ }),

/***/ 21630:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
/*
 * jQuery Color Animations
 * Copyright 2007 John Resig
 * Released under the MIT and GPL licenses.
 */(function(jQuery){// We override the animation for all of these color styles
jQuery.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){jQuery.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true;}fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt(fx.pos*(fx.end[0]-fx.start[0])+fx.start[0]),255),0),Math.max(Math.min(parseInt(fx.pos*(fx.end[1]-fx.start[1])+fx.start[1]),255),0),Math.max(Math.min(parseInt(fx.pos*(fx.end[2]-fx.start[2])+fx.start[2]),255),0)].join(",")+")";};});// Color Conversion functions from highlightFade
// By Blair Mitchelmore
// http://jquery.offput.ca/highlightFade/
// Parse strings looking for color tuples [255,255,255]
function getRGB(color){var result;// Check if we're already dealing with an array of colors
if(color&&color.constructor==Array&&color.length==3)return color;// Look for rgb(num,num,num)
if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])];// Look for rgb(num%,num%,num%)
if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];// Look for #a0b1c2
if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];// Look for #fff
if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];// Look for rgba(0, 0, 0, 0) == transparent in Safari 3
if(result=/rgba\(0, 0, 0, 0\)/.exec(color))return colors['transparent'];// Otherwise, we're most likely dealing with a named color
return colors[jQuery.trim(color).toLowerCase()];}function getColor(elem,attr){var color;do{color=jQuery.css(elem,attr);// Keep going until we find an element that has color, or we hit the body
if(color!=''&&color!='transparent'||jQuery.nodeName(elem,"body"))break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};// Some named colors to work with
// From Interface by Stefan Petre
// http://interface.eyecon.ro/
var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};})(jQuery);

/***/ }),

/***/ 50730:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
/*global jQuery:false, alert:false */ /*
 * Default text - jQuery plugin for html5 dragging files from desktop to browser
 *
 * Author: Weixi Yen
 *
 * Email: [Firstname][Lastname]@gmail.com
 *
 * Copyright (c) 2010 Resopollution
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.github.com/weixiyen/jquery-filedrop
 *
 * Version:  0.1.0
 *
 * Features:
 *      Allows sending of extra parameters with file.
 *      Works with Firefox 3.6+
 *      Future-compliant with HTML5 spec (will work with Webkit browsers and IE9)
 * Usage:
 *  See README at project homepage
 *
 *
 * Мои изменения:
 *  1) в функцию drop (105 строка) добавлен параметр custom_files
 *  2) добавлена корреткное восстановление состояния после возникновения ошибки (301,344 строки)
 *  3) в функцию drop (108 строка) добавлен вызов afterAll()
 *  4) добавлена функция not_files (488 строка), проверяющая эвент на filedrag. эта функция вставлена во многие обработчики
 *  5) добавлены IF с проверкой на opts.fallback_id для убирания warning'ов (83,94,199 строки)
 *  6) добавлен хак для возможности загружать файлы с chrome chrome's download bar (593)
 *
 */;(function($){jQuery.event.addProp('dataTransfer');var default_opts={fallback_id:'',url:'',refresh:1000,paramname:'userfile',requestType:'POST',// just in case you want to use another HTTP verb
allowedfileextensions:[],allowedfiletypes:[],maxfiles:25,// Ignored if queuefiles is set > 0
maxfilesize:1,// MB file size limit
queuefiles:0,// Max files before queueing (for large volume uploads)
queuewait:200,// Queue wait time if full
data:{},headers:{},drop:empty,dragStart:empty,dragEnter:empty,dragOver:empty,dragLeave:empty,docEnter:empty,docOver:empty,docLeave:empty,beforeEach:empty,afterAll:empty,rename:empty,error:function error(err,file,i,status){alert(err);},uploadStarted:empty,uploadFinished:empty,progressUpdated:empty,globalProgressUpdated:empty,speedUpdated:empty},errors=["BrowserNotSupported","TooManyFiles","FileTooLarge","FileTypeNotAllowed","NotFound","NotReadable","AbortError","ReadError","FileExtensionNotAllowed"];$.fn.filedrop=function(options){var opts=$.extend({},default_opts,options),global_progress=[],doc_leave_timer,stop_loop=false,files_count=0,files;if(opts.fallback_id){$('#'+opts.fallback_id).css({display:'none',width:0,height:0});}this.on('drop',drop).on('dragstart',opts.dragStart).on('dragenter',dragEnter).on('dragover',dragOver).on('dragleave',dragLeave);$(document).on('drop',docDrop).on('dragenter',docEnter).on('dragover',docOver).on('dragleave',docLeave);if(opts.fallback_id){this.on('click',function(e){$('#'+opts.fallback_id).trigger(e);});}if(opts.fallback_id){$('#'+opts.fallback_id).change(function(e){opts.drop(e);files=e.target.files;files_count=files.length;upload();});}function drop(e,custom_files){//console.log('drop')
if(opts.drop.call(this,e)===false)return false;if(!custom_files&&(!e.dataTransfer||not_files(e))){afterAll();return;}files=custom_files||e.dataTransfer.files;if(files===null||files===undefined||files.length===0){opts.error(errors[0]);afterAll();return false;}files_count=files.length;upload();e.preventDefault();return false;}function getBuilder(filename,filedata,mime,boundary){var dashdash='--',crlf='\r\n',builder='',paramname=opts.paramname;if(opts.data){var params=$.param(opts.data).replace(/\+/g,'%20').split(/&/);$.each(params,function(){var pair=this.split("=",2),name=decodeURIComponent(pair[0]),val=decodeURIComponent(pair[1]);if(pair.length!==2){return;}builder+=dashdash;builder+=boundary;builder+=crlf;builder+='Content-Disposition: form-data; name="'+name+'"';builder+=crlf;builder+=crlf;builder+=val;builder+=crlf;});}if(jQuery.isFunction(paramname)){paramname=paramname(filename);}builder+=dashdash;builder+=boundary;builder+=crlf;builder+='Content-Disposition: form-data; name="'+(paramname||"")+'"';//builder += '; filename="' + filename + '"';
builder+='; filename="'+encodeURIComponent(filename)+'"';builder+=crlf;builder+='Content-Type: '+mime;builder+=crlf;builder+=crlf;builder+=filedata;builder+=crlf;builder+=dashdash;builder+=boundary;builder+=dashdash;builder+=crlf;return builder;}function progress(e){if(e.lengthComputable){var percentage=Math.round(e.loaded*100/e.total);if(this.currentProgress!==percentage){this.currentProgress=percentage;opts.progressUpdated(this.index,this.file,this.currentProgress);global_progress[this.global_progress_index]=this.currentProgress;globalProgress();var elapsed=new Date().getTime();var diffTime=elapsed-this.currentStart;if(diffTime>=opts.refresh){var diffData=e.loaded-this.startData;var speed=diffData/diffTime;// KB per second
opts.speedUpdated(this.index,this.file,speed);this.startData=e.loaded;this.currentStart=elapsed;}}}}function globalProgress(){if(global_progress.length===0){return;}var total=0,index;for(index in global_progress){if(global_progress.hasOwnProperty(index)){total=total+global_progress[index];}}opts.globalProgressUpdated(Math.round(total/global_progress.length));}// Respond to an upload
function upload(){stop_loop=false;if(!files){opts.error(errors[0]);return false;}if(opts.allowedfiletypes.push&&opts.allowedfiletypes.length){for(var fileIndex=files.length;fileIndex--;){if(!files[fileIndex].type||$.inArray(files[fileIndex].type,opts.allowedfiletypes)<0){opts.error(errors[3],files[fileIndex]);return false;}}}if(opts.allowedfileextensions.push&&opts.allowedfileextensions.length){for(var fileIndex=files.length;fileIndex--;){var allowedextension=false;for(i=0;i<opts.allowedfileextensions.length;i++){if(files[fileIndex].name.substr(files[fileIndex].name.length-opts.allowedfileextensions[i].length).toLowerCase()==opts.allowedfileextensions[i].toLowerCase()){allowedextension=true;}}if(!allowedextension){opts.error(errors[8],files[fileIndex]);return false;}}}var filesDone=0,filesRejected=0;if(files_count>opts.maxfiles&&opts.queuefiles===0){opts.error(errors[1]);return false;}// Define queues to manage upload process
var workQueue=[];var processingQueue=[];var doneQueue=[];// Add everything to the workQueue
for(var i=0;i<files_count;i++){workQueue.push(i);}// Helper function to enable pause of processing to wait
// for in process queue to complete
var pause=function pause(timeout){setTimeout(process,timeout);return;};// Process an upload, recursive
var process=function process(){var fileIndex;if(stop_loop){return false;}// Check to see if are in queue mode
if(opts.queuefiles>0&&processingQueue.length>=opts.queuefiles){return pause(opts.queuewait);}else{// Take first thing off work queue
fileIndex=workQueue[0];workQueue.splice(0,1);// Add to processing queue
processingQueue.push(fileIndex);}try{if(beforeEach(files[fileIndex])!==false){if(fileIndex===files_count){return;}var reader=new FileReader(),max_file_size=1048576*opts.maxfilesize;reader.index=fileIndex;if(files[fileIndex].size>max_file_size){throw errors[2];}reader.onerror=function(e,z,x){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:opts.error(errors[4]);return false;case e.target.error.NOT_READABLE_ERR:opts.error(errors[5]);return false;case e.target.error.ABORT_ERR:opts.error(errors[6]);return false;default:opts.error(errors[7]);return false;};};reader.onloadend=!opts.beforeSend?send:function(e){opts.beforeSend(files[fileIndex],fileIndex,function(){send(e);});};reader.readAsDataURL(files[fileIndex]);}else{filesRejected++;}}catch(err){// Remove from queue
processingQueue.forEach(function(value,key){if(value===fileIndex){processingQueue.splice(key,1);}});//opts.error(errors[0]);
opts.error(err);}// If we still have work to do,
if(workQueue.length>0){process();}else if(!processingQueue.length){afterAll();}};var send=function send(e){var fileIndex=(e.srcElement||e.target).index;// Sometimes the index is not attached to the
// event object. Find it by size. Hack for sure.
if(e.target.index===undefined){e.target.index=getIndexBySize(e.total);}var xhr=new XMLHttpRequest(),upload=xhr.upload,file=files[e.target.index],index=e.target.index,start_time=new Date().getTime(),boundary='------multipartformboundary'+new Date().getTime(),global_progress_index=global_progress.length,builder,newName=rename(file.name),mime=file.type;if(opts.withCredentials){xhr.withCredentials=opts.withCredentials;}var data=atob(e.target.result.split(',')[1]);if(typeof newName==="string"){builder=getBuilder(newName,data,mime,boundary);}else{builder=getBuilder(file.name,data,mime,boundary);}upload.index=index;upload.file=file;upload.downloadStartTime=start_time;upload.currentStart=start_time;upload.currentProgress=0;upload.global_progress_index=global_progress_index;upload.startData=0;upload.addEventListener("progress",progress,false);// Allow url to be a method
if(jQuery.isFunction(opts.url)){xhr.open(opts.requestType,opts.url(),true);}else{xhr.open(opts.requestType,opts.url,true);}xhr.setRequestHeader('content-type','multipart/form-data; boundary='+boundary);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");// Add headers
$.each(opts.headers,function(k,v){xhr.setRequestHeader(k,v);});if(!xhr._sendAsBinary){xhr._sendAsBinary=function(datastr){function byteValue(x){return x.charCodeAt(0)&0xff;}var ords=Array.prototype.map.call(datastr,byteValue);var ui8a=new Uint8Array(ords);this.send(ui8a.buffer);};}xhr._sendAsBinary(builder);global_progress[global_progress_index]=0;globalProgress();opts.uploadStarted(index,file,files_count);xhr.onload=function(){var serverResponse=null;if(xhr.responseText){try{serverResponse=jQuery.parseJSON(xhr.responseText);}catch(e){serverResponse=xhr.responseText;}}var now=new Date().getTime(),timeDiff=now-start_time,result=opts.uploadFinished(index,file,serverResponse,timeDiff,xhr);filesDone++;// Remove from processing queue
processingQueue.forEach(function(value,key){if(value===fileIndex){processingQueue.splice(key,1);}});// Add to donequeue
doneQueue.push(fileIndex);// Make sure the global progress is updated
global_progress[global_progress_index]=100;globalProgress();if(filesDone===files_count-filesRejected){afterAll();}if(result===false){stop_loop=true;}// Pass any errors to the error option
if(xhr.status<200||xhr.status>299){opts.error(xhr.statusText,file,fileIndex,xhr.status,xhr.responseText);}};};// Initiate the processing loop
process();}function getIndexBySize(size){for(var i=0;i<files_count;i++){if(files[i].size===size){return i;}}return undefined;}function not_files(e){//console.log(e);
if(e.dataTransfer&&e.dataTransfer.types&&e.dataTransfer.types.length){for(var i=0;i<e.dataTransfer.types.length;i++){if(e.dataTransfer.types[i].toLowerCase()=='files'){return false;}}}return true;}function rename(name){return opts.rename(name);}function beforeEach(file){return opts.beforeEach(file);}function afterAll(){return opts.afterAll();}function dragEnter(e){//console.log('dragEnter')
if(not_files(e)){return;}clearTimeout(doc_leave_timer);e.preventDefault();opts.dragEnter.call(this,e);}function dragOver(e){//console.log('dragOver')
// Makes it possible to drag files from chrome's download bar
// http://stackoverflow.com/questions/19526430/drag-and-drop-file-uploads-from-chrome-downloads-bar
// Try is required to prevent bug in Internet Explorer 11 (SCRIPT65535 exception)
var efct;try{efct=e.dataTransfer.effectAllowed;}catch(_error){}e.dataTransfer.dropEffect='move'===efct||'linkMove'===efct?'move':'copy';if(not_files(e)){return;}clearTimeout(doc_leave_timer);e.preventDefault();opts.docOver.call(this,e);opts.dragOver.call(this,e);}function dragLeave(e){//console.log('dragLeave')
clearTimeout(doc_leave_timer);opts.dragLeave.call(this,e);e.stopPropagation();}function docDrop(e){//console.log('docDrop')
if(not_files(e)){return;}e.preventDefault();opts.docLeave.call(this,e);return false;}function docEnter(e){//console.log('docEnter')
if(not_files(e)){return;}clearTimeout(doc_leave_timer);e.preventDefault();opts.docEnter.call(this,e);return false;}function docOver(e){//console.log('docOver')
var efct;try{efct=e.dataTransfer.effectAllowed;}catch(_error){}e.dataTransfer.dropEffect='move'===efct||'linkMove'===efct?'move':'copy';if(not_files(e)){return;}clearTimeout(doc_leave_timer);e.preventDefault();opts.docOver.call(this,e);return false;}function docLeave(e){//console.log('docLeave')
doc_leave_timer=setTimeout(function(_this){return function(){opts.docLeave.call(_this,e);};}(this),200);}return this;};function empty(){}try{if(XMLHttpRequest.prototype.sendAsBinary){return;}XMLHttpRequest.prototype.sendAsBinary=function(datastr){function byteValue(x){return x.charCodeAt(0)&0xff;}var ords=Array.prototype.map.call(datastr,byteValue);var ui8a=new Uint8Array(ords);// Not pretty: Chrome 22 deprecated sending ArrayBuffer, moving instead
// to sending ArrayBufferView.  Sadly, no proper way to detect this
// functionality has been discovered.  Happily, Chrome 22 also introduced
// the base ArrayBufferView class, not present in Chrome 21.
if('ArrayBufferView'in window)this.send(ui8a);else this.send(ui8a.buffer);};}catch(e){}})(jQuery);

/***/ }),

/***/ 42981:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
/*
 * jquery.injectCSS.js - jquery css injection plugin
 * Copyright (C) 2013, Robert Kajic (robert@kajic.com)
 * http://kajic.com
 *
 * https://github.com/kajic/jquery-injectCSS
 * Allows for injection of CSS defined as javascript JSS objects.
 *
 * Based on JSS (http://jss-lang.org/).
 *
 * Licensed under the MIT License.
 *
 * Date: 2013-01-08
 * Version: 0.1
 */(function(jQuery){'use strict';function toCSS(jss,options){function jsonToCSS(scope,css){if(scope&&!result[scope]){result[scope]={};}for(var property in css){var value=css[property];if(value instanceof Array){var values=value;for(var i=0;i<values.length;i++){addProperty(scope,property,values[i]);}}else{switch(typeof value){case"number":case"string":addProperty(scope,property,value);break;case"object":var endChar=property.charAt(property.length-1);if(scope&&(endChar==="_"||endChar==="-")){var variants=value;for(var key in variants){// key may be a comma separted list
var list=key.split(/\s*,\s*/);for(var j=0;j<list.length;j++){var valueVariant=variants[key];if(valueVariant instanceof Array){var valuesVariant=valueVariant;for(var k=0;k<valuesVariant.length;k++){addProperty(scope,property+list[j],valuesVariant[k]);}}else{addProperty(scope,property+list[j],variants[key]);}}}}else{jsonToCSS(makeSelectorName(scope,property),value);}break;}}}}function makePropertyName(n){return n.replace(/_/g,"-");}function makeSelectorName(scope,name){var snames=[];var names=name.split(/\s*,\s*/);var scopes=scope.split(/\s*,\s*/);for(var s=0;s<scopes.length;s++){var currentScope=scopes[s];for(var i=0;i<names.length;i++){var currentName=names[i];if(currentName.charAt(0)==="&"){snames.push(currentScope+currentName.substr(1));}else{snames.push(currentScope?currentScope+" "+currentName:currentName);}}}return snames.join(", ");}function addProperty(scope,property,value){if(typeof value==="number"&&!options.useRawValues){value=value+"px";}var properties=property.split(/\s*,\s*/);for(var i=0;i<properties.length;i++){var currentProperty=makePropertyName(properties[i]);if(result[scope][currentProperty]){result[scope][currentProperty].push(value);}else{result[scope][currentProperty]=[value];}}}// --------------
var result={};if(typeof jss==="string"){// evaluate the JSS object:
try{eval("var jss = {"+jss+"}");}catch(e){return"/*\nUnable to parse JSS: "+e+"\n*/";}}jsonToCSS("",jss);// output result:
var ret="";for(var a in result){var css=result[a];ret+=a+" {\n";for(var i in css){var values=css[i];// this is an array !
for(var j=0;j<values.length;j++){ret+="\t"+i+": "+values[j]+";\n";}}ret+="}\n";}return ret;}var defaults={truncateFirst:false,container:null,containerName:"injectCSSContainer",useRawValues:false};jQuery.injectCSS=function(jss,options){options=jQuery.extend({},defaults,options);options.media=options.media||'all';var container=options.container&&jQuery(options.container)||jQuery("#"+options.containerName);if(!container.length){container=jQuery("<style></style>").appendTo('head').attr({media:options.media,id:options.containerName,type:'text/css'});}var containerDomElem=container[0];var isIeStylesheet=containerDomElem.styleSheet!==undefined&&containerDomElem.styleSheet.cssText!==undefined;var css="";if(!options.truncateFirst){css+=isIeStylesheet?containerDomElem.styleSheet.cssText:container.text();}css+=toCSS(jss,options);if(isIeStylesheet){containerDomElem.styleSheet.cssText=css;}else{container.text(css);//Others
}return container;};})(jQuery);

/***/ }),

/***/ 44588:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
(function($){$.fn.serializeHash=function(){var hash={};/***
     JQuery plugin that returns a hash from serialization of any form or dom element. It supports Brackets on input names.
     It is convenient if you want to get values from a form and merge it with an other hash for example.

     ** Added by rilinor on 29/05/2012 : jquery serialize hash now support serialization of any dom elements (before, only form were supported). Thanks !

     Example:
     ---------- HTML ----------
     <form id="form">
       <input type="hidden" name="firstkey" value="val1" />
       <input type="hidden" name="secondkey[0]" value="val2" />
       <input type="hidden" name="secondkey[1]" value="val3" />
       <input type="hidden" name="secondkey[key]" value="val4" />
     </form>
     ---------- JS ----------
     $('#form').serializeHash()
     should return :
     {
       firstkey: 'val1',
       secondkey: {
         0: 'val2',
         1: 'val3',
         key: 'val4'
       }
     }
     ***/function stringKey(key,value){var beginBracket=key.lastIndexOf('[');if(beginBracket==-1){var hash={};hash[key]=value;return hash;}var newKey=key.substr(0,beginBracket);var newValue={};newValue[key.substring(beginBracket+1,key.length-1)]=value;return stringKey(newKey,newValue);}var els=$(this).find(':input').get();$.each(els,function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/hidden|text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color/i.test(this.type))){var val=$(this).val();$.extend(true,hash,stringKey(this.name,val));}});return hash;};})(jQuery);

/***/ }),

/***/ 42936:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
// https://github.com/CloCkWeRX/tipsy
// tipsy, facebook style tooltips for jquery
// version 1.0.0a
// (c) 2008-2010 jason frame [jason@onehackoranother.com]
// released under the MIT license
(function($,window,undefined){function maybeCall(thing,ctx){return typeof thing==='function'?thing.call(ctx):thing;}function isElementInDOM(ele){return $.contains(window.document.documentElement,ele);}// Returns true if it is a DOM element
// http://stackoverflow.com/a/384380/999
function isElement(o){return typeof HTMLElement==='object'?o instanceof HTMLElement://DOM2
o&&typeof o==='object'&&o.nodeType===1&&typeof o.nodeName==='string';}var tipsyIDcounter=0;function tipsyID(){return'tipsyuid'+tipsyIDcounter++;}function Tipsy(element,options){this.$element=$(element);this.options=options;this.enabled=true;this.fixTitle();}Tipsy.prototype={show:function show(){if(!isElementInDOM(this.$element[0])){return;}if(isElement(this.$element)&&!this.$element.is(':visible')){return;}var title;if(this.enabled&&(title=this.getTitle())){var _title;var $tip=this.tip();var $inner=$tip.find('.tipsy-inner'+this.options.theme);if(((_title=title)===null||_title===void 0?void 0:_title.constructor)===Promise){$inner[this.options.html?'html':'text'](`
                    <div class='b-ajax vk-like' style='margin: 8px 60px 15px' />
                  `);title.then(content=>{this.options.title=()=>content;this.show();});}else{$inner[this.options.html?'html':'text'](title);}$tip[0].className='tipsy'+this.options.theme;// reset classname in case of dynamic gravity
if(this.options.className){$tip.addClass(maybeCall(this.options.className,this.$element[0]));}$tip.detach().css({top:0,left:0,visibility:'hidden',display:'block'}).prependTo(this.options.prependTo).data('tipsy-pointee',this.$element[0]);var pos=$.extend({},this.$element.offset());// If the element is contained in a SVG object, use getBBox
if(this.$element.parents('svg').length>0){pos=$.extend(pos,this.$element[0].getBBox());}else{if(this.options.prependTo!==document.body){pos=$.extend(this.$element.position(),{width:this.$element.width(),height:this.$element.height()});}else{pos=$.extend(pos,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});}}var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,gravity=maybeCall(this.options.gravity,this.$element[0]);var tp;// +- 1 pixel because of bug in chrome https://github.com/shikimori/shikimori/issues/1587
switch(gravity.charAt(0)){case'n':tp={top:pos.top+pos.height+this.options.offset+1,left:pos.left+pos.width/2-actualWidth/2};break;case's':tp={top:pos.top-actualHeight-this.options.offset-1,left:pos.left+pos.width/2-actualWidth/2};break;case'e':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth-this.options.offset-1};break;case'w':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width+this.options.offset+1};break;default:break;}if(gravity.length===2){if(gravity.charAt(1)==='w'){tp.left=pos.left+pos.width/2-15;}else{tp.left=pos.left+pos.width/2-actualWidth+15;}}$tip.css(tp).addClass('tipsy-'+gravity+this.options.theme);$tip.find('.tipsy-arrow'+this.options.theme)[0].className='tipsy-arrow'+this.options.theme+' tipsy-arrow-'+gravity.charAt(0)+this.options.theme;//$tip.css({width: actualWidth + 'px'});
if(this.options.fade){if(this.options.shadow){$tip.find('.tipsy-inner').css({'box-shadow':'0 0 '+this.options.shadowBlur+'px '+this.options.shadowSpread+'px rgba(0, 0, 0, '+this.options.shadowOpacity+')','-webkit-box-shadow':'0 0 '+this.options.shadowBlur+'px '+this.options.shadowSpread+'px rgba(0, 0, 0, '+this.options.shadowOpacity+')'});}$tip.stop().css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:this.options.opacity},this.options.fadeInTime);}else{$tip.css({visibility:'visible',opacity:this.options.opacity});}if(this.options.aria){var $tipID=tipsyID();$tip.attr('id',$tipID);this.$element.attr('aria-describedby',$tipID);}}},hide:function hide(){if(this.options.fade){this.tip().stop().fadeOut(this.options.fadeOutTime,function(){$(this).detach();});}else{this.tip().detach();}if(this.options.aria){this.$element.removeAttr('aria-describedby');}},fixTitle:function fixTitle(){var $e=this.$element;if($e.attr('title')||typeof $e.attr('original-title')!=='string'){$e.attr('original-title',$e.attr('title')||'').removeAttr('title');}},getTitle(){var _title2;var title,$e=this.$element,o=this.options;this.fixTitle();if(typeof o.title==='string'){title=$e.attr(o.title==='title'?'original-title':o.title);}else if(typeof o.title==='function'){title=o.title.call($e[0]);}if(((_title2=title)===null||_title2===void 0?void 0:_title2.constructor)!==Promise){title=(''+title).replace(/(^\s*|\s*$)/,'');}return title||o.fallback;},tip:function tip(){if(!this.$tip){this.$tip=$('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr('role','tooltip');}return this.$tip;},validate:function validate(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}},enable:function enable(){this.enabled=true;},disable:function disable(){this.enabled=false;},toggleEnabled:function toggleEnabled(){this.enabled=!this.enabled;}};$.fn.tipsy=function(options){$.fn.tipsy.enable();if(options===true){return this.data('tipsy');}else if(typeof options==='string'){var tipsy=this.data('tipsy');if(tipsy)tipsy[options]();return this;}options=$.extend({},$.fn.tipsy.defaults,options);// Establish theme
options.theme=options.theme&&options.theme!==''?'-'+options.theme:'';function get(ele){var tipsy=$.data(ele,'tipsy');if(!tipsy){tipsy=new Tipsy(ele,$.fn.tipsy.elementOptions(ele,options));$.data(ele,'tipsy',tipsy);}return tipsy;}function enter(){if($.fn.tipsy.enabled!==true){return;}var tipsy=get(this);tipsy.hoverState='in';if(options.delayIn===0){tipsy.show();}else{tipsy.fixTitle();setTimeout(function(){if(tipsy.hoverState==='in'){tipsy.show();}},options.delayIn);}}function leave(){var tipsy=get(this);tipsy.hoverState='out';if(options.delayOut===0){tipsy.hide();}else{setTimeout(function(){if(tipsy.hoverState==='out'||!tipsy.$element||!tipsy.$element.is(':visible'))tipsy.hide();},options.delayOut);}}if(!options.live){this.each(function(){get(this);});}if(options.trigger!=='manual'){var eventIn=options.trigger==='hover'?'mouseenter mouseover':'focus',eventOut=options.trigger==='hover'?'mouseleave mouseout':'blur';if(options.live&&options.live!==true){$(this).on(eventIn,options.live,enter);$(this).on(eventOut,options.live,leave);}else{if(options.live&&!$.live){//live === true and using jQuery >= 1.9
throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";}var binder=options.live?'live':'bind';this[binder](eventIn,enter)[binder](eventOut,leave);}}return this;};$.fn.tipsy.defaults={aria:false,className:null,delayIn:0,delayOut:0,fade:false,fadeInTime:400,fadeOutTime:400,shadow:false,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:'',gravity:'n',html:false,live:false,offset:0,opacity:0.8,title:'title',trigger:'hover',theme:'',prependTo:document.body};$.fn.tipsy.revalidate=function(){$('.tipsy').each(function(){var pointee=$.data(this,'tipsy-pointee');if(!pointee||!isElementInDOM(pointee)){$(this).remove();}});};$.fn.tipsy.enable=function(){$.fn.tipsy.enabled=true;};$.fn.tipsy.disable=function(){$.fn.tipsy.enabled=false;};// Overwrite this method to provide options on a per-element basis.
// For example, you could store the gravity in a 'tipsy-gravity' attribute:
// return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });
// (remember - do not modify 'options' in place!)
$.fn.tipsy.elementOptions=function(ele,options){return $.metadata?$.extend({},options,$(ele).metadata()):options;};$.fn.tipsy.autoNS=function(){return $(this).offset().top>$(document).scrollTop()+$(window).height()/2?'s':'n';};$.fn.tipsy.autoWE=function(){return $(this).offset().left>$(document).scrollLeft()+$(window).width()/2?'e':'w';};$.fn.tipsy.autoNWNE=function(){return $(this).offset().left>$(document).scrollLeft()+$(window).width()/2?'ne':'nw';};$.fn.tipsy.autoSWSE=function(){return $(this).offset().left>$(document).scrollLeft()+$(window).width()/2?'se':'sw';};/**
   * yields a closure of the supplied parameters, producing a function that takes
   * no arguments and is suitable for use as an autogravity function like so:
   *
   * @param margin (int) - distance from the viewable region edge that an
   *        element should be before setting its tooltip's gravity to be away
   *        from that edge.
   * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer
   *        if there are no viewable region edges effecting the tooltip's
   *        gravity. It will try to vary from this minimally, for example,
   *        if 'sw' is preferred and an element is near the right viewable
   *        region edge, but not the top edge, it will set the gravity for
   *        that element's tooltip to be 'se', preserving the southern
   *        component.
   */$.fn.tipsy.autoBounds=function(marginNorth,marginEast,prefer){return function(){var dir={ns:prefer[0],ew:prefer.length>1?prefer[1]:false},boundTop=$(document).scrollTop()+marginNorth,boundLeft=$(document).scrollLeft()+marginEast,$this=$(this);if($this.offset().top<boundTop)dir.ns='n';if($this.offset().left<boundLeft)dir.ew='w';if($(window).width()+$(document).scrollLeft()-$this.offset().left<marginEast)dir.ew='e';if($(window).height()+$(document).scrollTop()-$this.offset().top<marginNorth)dir.ns='s';return dir.ns+(dir.ew?dir.ew:'');};};/**
   * Improved version of autoBounds for automatic placement of chunky tips
   * The original autoBounds failed in two regards: 1. it would never return a 'w' or 'e', gravity even if they
   * were preferred and/or optimal, 2. it only respected the margin between the left hand side of an element and
   * left hand side of the viewport, and the top of an element and the top of the viewport. This version checks
   * to see if the bottom of an element is too close to the bottom of the screen, similarly for the right hand side
   */$.fn.tipsy.autoBounds2=function(margin,prefer){return function(){var dir={},boundTop=$(document).scrollTop()+margin,boundLeft=$(document).scrollLeft()+margin,$this=$(this);// bi-directional string (ne, se, sw, etc...)
if(prefer.length>1){dir.ns=prefer[0];dir.ew=prefer[1];}else{// single direction string (e, w, n or s)
if(prefer[0]==='e'||prefer[0]==='w'){dir.ew=prefer[0];}else{dir.ns=prefer[0];}}if($this.offset().top<boundTop)dir.ns='n';if($this.offset().left<boundLeft)dir.ew='w';if($(window).width()+$(document).scrollLeft()-($this.offset().left+$this.width())<margin)dir.ew='e';if($(window).height()+$(document).scrollTop()-($this.offset().top+$this.height())<margin)dir.ns='s';if(dir.ns){return dir.ns+(dir.ew?dir.ew:'');}return dir.ew;};};})(jQuery,window);

/***/ }),

/***/ 41742:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var jQuery = __webpack_require__(74692);
/*
 * jQuery Tools 1.2.5 - The missing UI library for the Web
 * 
 * [tooltip, tooltip.slide, tooltip.dynamic]
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 * File generated: Sun Oct 17 11:38:54 GMT 2010
 */(function(f){function p(a,b,c){var h=c.relative?a.position().top:a.offset().top,d=c.relative?a.position().left:a.offset().left,i=c.position[0];h-=b.outerHeight()-c.offset[0];d+=a.outerWidth()+c.offset[1];if(/iPad/i.test(navigator.userAgent))h-=f(window).scrollTop();var j=b.outerHeight()+a.outerHeight();if(i=="center")h+=j/2;if(i=="bottom")h+=j;i=c.position[1];a=b.outerWidth()+a.outerWidth();if(i=="center")d-=a/2;if(i=="left")d-=a;return{top:h,left:d};}function u(a,b){var c=this,h=a.add(c),d,i=0,j=0,m=a.attr("title"),q=a.attr("data-tooltip"),r=o[b.effect],l,s=a.is(":input"),v=s&&a.is(":checkbox, :radio, select, :button, :submit"),t=a.attr("type"),k=b.events[t]||b.events[s?v?"widget":"input":"def"];if(!r)throw'Nonexistent effect "'+b.effect+'"';k=k.split(/,\s*/);if(k.length!=2)throw"Tooltip: bad events configuration for "+t;a.bind(k[0],function(e){clearTimeout(i);if(b.predelay)j=setTimeout(function(){c.show(e);},b.predelay);else c.show(e);}).bind(k[1],function(e){clearTimeout(j);if(b.delay)i=setTimeout(function(){c.hide(e);},b.delay);else c.hide(e);});if(m&&b.cancelDefault){a.removeAttr("title");a.data("title",m);}f.extend(c,{show:function show(e){if(!d){if(q)d=f(q);else if(b.tip)d=f(b.tip).eq(0);else if(m)d=f(b.layout).addClass(b.tipClass).appendTo(document.body).hide().append(m);else{d=a.next();d.length||(d=a.parent().next());}if(!d.length)throw"Cannot find tooltip for "+a;}if(c.isShown())return c;d.stop(true,true);var g=p(a,d,b);b.tip&&d.html(a.data("title"));e=e||f.Event();e.type="onBeforeShow";h.trigger(e,[g]);if(e.isDefaultPrevented())return c;g=p(a,d,b);d.css({position:"absolute",top:g.top,left:g.left});l=true;r[0].call(c,function(){e.type="onShow";l="full";h.trigger(e);});g=b.events.tooltip.split(/,\s*/);if(!d.data("__set")){d.bind(g[0],function(){clearTimeout(i);clearTimeout(j);});g[1]&&!a.is("input:not(:checkbox, :radio), textarea")&&d.bind(g[1],function(n){n.relatedTarget!=a[0]&&a.trigger(k[1].split(" ")[0]);});d.data("__set",true);}return c;},hide:function hide(e){if(!d||!c.isShown())return c;e=e||f.Event();e.type="onBeforeHide";h.trigger(e);if(!e.isDefaultPrevented()){l=false;o[b.effect][1].call(c,function(){e.type="onHide";h.trigger(e);});return c;}},isShown:function isShown(e){return e?l=="full":l;},getConf:function getConf(){return b;},getTip:function getTip(){return d;},getTrigger:function getTrigger(){return a;}});f.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(e,g){f.isFunction(b[g])&&f(c).bind(g,b[g]);c[g]=function(n){n&&f(c).bind(g,n);return c;};});}f.tools=f.tools||{version:"1.2.5"};f.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function addEffect(a,b,c){o[a]=[b,c];}};var o={toggle:[function(a){var b=this.getConf(),c=this.getTip();b=b.opacity;b<1&&c.css({opacity:b});c.show();a.call();},function(a){this.getTip().hide();a.call();}],fade:[function(a){var b=this.getConf();this.getTip().fadeTo(b.fadeInSpeed,b.opacity,a);},function(a){this.getTip().fadeOut(this.getConf().fadeOutSpeed,a);}]};f.fn.tooltip=function(a){var b=this.data("tooltip");if(b)return b;a=f.extend(true,{},f.tools.tooltip.conf,a);if(typeof a.position=="string")a.position=a.position.split(/,?\s/);this.each(function(){b=new u(f(this),a);f(this).data("tooltip",b);});return a.api?b:this;};})(jQuery);(function(d){var i=d.tools.tooltip;d.extend(i.conf,{direction:"up",bounce:false,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:false});var e={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};i.addEffect("slide",function(g){var a=this.getConf(),f=this.getTip(),b=a.slideFade?{opacity:a.opacity}:{},c=e[a.direction]||e.up;b[c[1]]=c[0]+"="+a.slideOffset;a.slideFade&&f.css({opacity:0});f.show().animate(b,a.slideInSpeed,g);},function(g){var a=this.getConf(),f=a.slideOffset,b=a.slideFade?{opacity:0}:{},c=e[a.direction]||e.up,h=""+c[0];if(a.bounce)h=h=="+"?"-":"+";b[c[1]]=h+"="+f;this.getTip().animate(b,a.slideOutSpeed,function(){d(this).hide();g.call();});});})(jQuery);(function(g){function j(a){var c=g(window),d=c.width()+c.scrollLeft(),h=c.height()+c.scrollTop();return[a.offset().top<=c.scrollTop(),d<=a.offset().left+a.width(),h<=a.offset().top+a.height(),c.scrollLeft()>=a.offset().left];}function k(a){for(var c=a.length;c--;)if(a[c])return false;return true;}var i=g.tools.tooltip;i.dynamic={conf:{classNames:"top right bottom left"}};g.fn.dynamic=function(a){if(typeof a=="number")a={speed:a};a=g.extend({},i.dynamic.conf,a);var c=a.classNames.split(/\s/),d;this.each(function(){var h=g(this).tooltip().onBeforeShow(function(e,f){e=this.getTip();var b=this.getConf();d||(d=[b.position[0],b.position[1],b.offset[0],b.offset[1],g.extend({},b)]);g.extend(b,d[4]);b.position=[d[0],d[1]];b.offset=[d[2],d[3]];e.css({visibility:"hidden",position:"absolute",top:f.top,left:f.left}).show();f=j(e);if(!k(f)){if(f[2]){g.extend(b,a.top);b.position[0]="top";e.addClass(c[0]);}if(f[3]){g.extend(b,a.right);b.position[1]="right";e.addClass(c[1]);}if(f[0]){g.extend(b,a.bottom);b.position[0]="bottom";e.addClass(c[2]);}if(f[1]){g.extend(b,a.left);b.position[1]="left";e.addClass(c[3]);}if(f[0]||f[2])b.offset[0]*=-1;if(f[1]||f[3])b.offset[1]*=-1;}e.css({visibility:"visible"}).hide();});h.onBeforeShow(function(){var e=this.getConf();this.getTip();setTimeout(function(){e.position=[d[0],d[1]];e.offset=[d[2],d[3]];},0);});h.onHide(function(){var e=this.getTip();e.removeClass(a.classNames);});ret=h;});return a.api?ret:this;};})(jQuery);

/***/ }),

/***/ 93370:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var delay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29362);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79308);
/* provided dependency */ var jQuery = __webpack_require__(74692);
/**
 * @license
 * jQuery Tools 1.2.5 Tooltip - UI essentials
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/tooltip/
 *
 * Since: November 2008
 * Date:    Wed Sep 22 06:02:10 2010 +0000
 */(function($){// static constructs
$.tools=$.tools||{version:'1.2.5'};$.tools.tooltip={conf:{// default effect variables
effect:'toggle',fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,// 'top', 'bottom', 'right', 'left', 'center'
position:['top','center'],offset:[0,0,0],relative:false,cancelDefault:true,// type to event mapping
events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},// 1.2
layout:'<div/>',tipClass:'tooltip',ignoreSelector:''},addEffect:function addEffect(name,loadFn,hideFn){effects[name]=[loadFn,hideFn];}};var effects={toggle:[function(done){var conf=this.getConf(),tip=this.getTip(),o=conf.opacity;if(o<1){tip.css({opacity:o});}tip.show();done.call();},function(done){this.getTip().hide();done.call();}],fade:[function(done){var conf=this.getConf();this.getTip().fadeTo(conf.fadeInSpeed,conf.opacity,done);},function(done){this.getTip().fadeOut(this.getConf().fadeOutSpeed,done);}]};/* calculate tip position relative to the trigger */function getPosition($trigger,$tip,conf,no_show_or_hide){var is_relative=$trigger.data('relative')==undefined?conf.relative:$trigger.data('relative');// get origin top/left position
var top=is_relative?$trigger.position().top:$trigger.offset().top,left=is_relative?$trigger.position().left:$trigger.offset().left,abs_left=$trigger.offset().left,abs_top=$trigger.offset().top,pos=conf.position[0];if(!no_show_or_hide){$tip.show();}$tip.removeClass('tooltip-bottom tooltip-center tooltip-moved');top-=$tip.outerHeight()-conf.offset[0]-($trigger.data('offset-top')||0);left+=$trigger.outerWidth()+conf.offset[1]-($trigger.data('offset-left')||0);abs_left+=$trigger.outerWidth()+conf.offset[1];// iPad position fix
if(/iPad/i.test(navigator.userAgent)){top-=$(window).scrollTop();}// adjust Y
var height=$tip.outerHeight()+$trigger.outerHeight();if(pos=='center'){top+=height/2;}if(pos=='bottom'){top+=height;}// adjust X
pos=conf.position[1];var width=$tip.outerWidth()+$trigger.outerWidth();if(pos=='center'){left-=width/2;abs_left-=width/2;}if(pos=='left'){left-=width;abs_left-=width;}var arrow_width=$tip.find('.tooltip-arrow').outerWidth();var tip_width=$tip.find('.tooltip-inner').outerWidth()+arrow_width;var tip_height=$tip.find('.tooltip-inner').outerHeight();var tip_horizontal_shadow=$tip.find('.dropshadow-left').outerWidth();var tip_vertical_shadow=$tip.find('.dropshadow-top').outerHeight();// вписывание тултипа в экран по горизонтали
var offscreen_right_offset=abs_left+tip_width+tip_horizontal_shadow-$(window).width();if(!$trigger.data('no-align')&&(offscreen_right_offset>0||conf.place_to_left||$trigger.data('place-to-left'))){var tip_full_offset=tip_width+$trigger.outerWidth()+arrow_width+($trigger.data('offset-left')||0)*2+($trigger.data('offset-left-right')||0);var new_left=left-tip_full_offset;var left_border=is_relative?$trigger.offset().left-$trigger.position().left:0;if(new_left>-left_border||conf.place_to_left||$trigger.data('place-to-left')){left=new_left+(conf.offset[2]||0);$tip.addClass('tooltip-left');}else if(-new_left<offscreen_right_offset){left=0;$tip.addClass('tooltip-moved');}else{left-=offscreen_right_offset+10;$tip.addClass('tooltip-moved');}}else{$tip.removeClass('tooltip-left');}var $arrow=$tip.find('.tooltip-arrow');// запоминаем изначальную высоту стрелки
if(!$arrow.data('top')){$arrow.data('top',parseInt($arrow.css('top')));}$arrow.css('top',$arrow.data('top'));// вписывание тултипа в экран по вертикали
var offscreen_bottom_offset=abs_top+tip_height+tip_vertical_shadow-$(window).scrollTop()-$(window).height();if(!$trigger.data('no-align')){var old_top=top;if(offscreen_bottom_offset>0&&!conf.no_y_adjustment){top=Math.max(top-offscreen_bottom_offset+10,10);}if(old_top!=top){$arrow.css('top',$arrow.data('top')+(old_top-top));}var offscreen_top_offset=abs_top-$(window).scrollTop();if(offscreen_top_offset<0){top=Math.max(top-offscreen_top_offset-10,10);}}if(conf.moved){$tip.addClass('tooltip-moved');}if(!no_show_or_hide){$tip.hide();}return{top:top,left:left};}function Tooltip(trigger,conf){var self=this,fire=trigger.add(self),tip,timer=0,pretimer=0,title=trigger.data("do-not-use-title")?null:trigger.attr("title"),tipAttr=trigger.attr("data-tooltip"),effect=effects[conf.effect],shown,// get show/hide configuration
isInput=trigger.is(":input"),isWidget=isInput&&trigger.is(":checkbox, :radio, select, :button, :submit"),type=trigger.attr("type"),evt=conf.events[type]||conf.events[isInput?isWidget?'widget':'input':'def'];// check that configuration is sane
if(!effect){throw"Nonexistent effect \""+conf.effect+"\"";}evt=evt.split(/,\s*/);if(evt.length!=2){throw"Tooltip: bad events configuration for "+type;}// trigger --> show
trigger.on(evt[0],function(e){clearTimeout(pretimer);var predelay=trigger.data('predelay')||conf.predelay;if(predelay){pretimer=setTimeout(function(){self.show(e);},predelay);}else{self.show(e);}// trigger --> hide
}).on(evt[1],function(e){clearTimeout(pretimer);var delay=trigger.data('delay')||conf.delay;if(delay){timer=setTimeout(function(){self.hide(e);},delay);}else{self.hide(e);}});if(conf.ignoreSelector){trigger.on('mouseover',conf.ignoreSelector,function(e){// event with delay because this event is triggered before same event for 'trigger'
(0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)().then(function(){clearTimeout(pretimer);self.hide(e);});}).on('mouseout',conf.ignoreSelector,function(e){// event without delay because this event must be triggered before same event for 'trigger'
if(e.target==trigger[0]||$(e.target).closest(trigger)){trigger.trigger('mouseover',[{target:trigger[0]}]);}});}// remove default title
if(title&&conf.cancelDefault){trigger.removeAttr("title");trigger.data("title",title);}$.extend(self,{show:function show(e){// для устройств с тачскрином и узких экранов тултипы отключаем
if(!e.target.classList.contains('mobile')&&('ontouchstart'in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||(0,shiki_utils__WEBPACK_IMPORTED_MODULE_1__.isMobile)())){return;}// tip not initialized yet
if(!tip){// data-tooltip
if(tipAttr){tip=$(tipAttr);// single tip element for all
}else if(conf.tip){tip=$(conf.tip).eq(0);// remote tooltip
}else if((trigger.data('tooltip_url')||trigger.data('href')||trigger.attr('href'))&&!trigger.data('local-tooltip')){tip=$(conf.defaultTemplate).addClass(conf.tipClass).css('z-index',parseInt(trigger.parents('.tooltip').css('z-index'))||1).hide();if(trigger.data('insert-tooltip-after')){tip.insertAfter(trigger);}else{tip.appendTo(document.body);}// why delay?
// delay(100).then(function() {
e=e||$.Event();e.type="onBeforeFetch";fire.trigger(e,[]);var tooltip_url=trigger.data('tooltip_url')||trigger.data('href')||trigger.attr('href').replace(/(\?|$)/,'/tooltip$1');tip.find('.tooltip-details').load(tooltip_url,function(){// если есть только картинка, то ставим класс tooltip-image
var $this=$(this);var $desc=$this.find('.tooltip-desc');if($desc.length&&$desc.html()==''&&$this.find('img').length){$this.parents('.tooltip').addClass('tooltip-image');}$this.process();// после подгрузки надо тултип перересовать, если он видимый
(0,delay__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Ay)(50).then(function(){if(tip.css('display')=='none'){return;}var top=parseInt(tip.css('top'));var left=parseInt(tip.css('left'));var pos=getPosition(trigger,tip,conf,true);if(Math.abs(top-pos.top)>20||Math.abs(left-pos.left)>20){tip.stop(true,true).css({top:pos.top,left:pos.left});}});});// })
trigger.attr('data-remote',null);trigger.attr('tooltip',null);// autogenerated tooltip
//} else if (title) {
//tip = $(conf.layout).addClass(conf.tipClass).appendTo(document.body)
//.hide().append(title);
// manual tooltip
}else{tip=trigger.next();if(!tip.length){tip=trigger.parent().next();}}if(!tip.length){throw"Cannot find tooltip for "+trigger;}}if(self.isShown()){return self;}// stop previous animation
tip.stop(true,true);// get position
var pos=getPosition(trigger,tip,conf);// restore title for single tooltip element
if(conf.tip){tip.html(trigger.data("title"));}// onBeforeShow
e=e||$.Event();e.type="onBeforeShow";fire.trigger(e,[pos]);//if (e.isDefaultPrevented()) { return self; }
// onBeforeShow may have altered the configuration
pos=getPosition(trigger,tip,conf);// set position
tip.css({position:'absolute',top:pos.top,left:pos.left});shown=true;// invoke effect
effect[0].call(self,function(){e.type="onShow";shown='full';fire.trigger(e);});// tooltip events
var event=conf.events.tooltip.split(/,\s*/);if(!tip.data("__set")){tip.on(event[0],function(){clearTimeout(timer);clearTimeout(pretimer);});if(event[1]&&!trigger.is("input:not(:checkbox, :radio), textarea")){tip.on(event[1],function(e){// being moved to the trigger element
if(e.relatedTarget!=trigger[0]){trigger.trigger(evt[1].split(" ")[0]);}});}tip.data("__set",true);}return self;},hide:function hide(e){if(!tip||!self.isShown()){return self;}// onBeforeHide
e=e||$.Event();e.type="onBeforeHide";fire.trigger(e);//if (e.isDefaultPrevented()) { return; }
shown=false;effects[conf.effect][1].call(self,function(){e.type="onHide";fire.trigger(e);});return self;},isShown:function isShown(fully){return fully?shown=='full':shown;},getConf:function getConf(){return conf;},getTip:function getTip(){return tip;},getTrigger:function getTrigger(){return trigger;}});// callbacks
$.each("onBeforeFetch,onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(i,name){// configuration
if($.isFunction(conf[name])){$(self).on(name,conf[name]);}// API
self[name]=function(fn){if(fn){$(self).on(name,fn);}return self;};});}// jQuery plugin implementation
$.fn.tooltip=function(conf){// return existing instance
var api=this.data("tooltip");if(api){return api;}conf=$.extend(true,{},$.tools.tooltip.conf,conf);// position can also be given as string
if(typeof conf.position=='string'){conf.position=conf.position.split(/,?\s/);}// install tooltip for each entry in jQuery object
this.each(function(){api=new Tooltip($(this),conf);$(this).data("tooltip",api);});return conf.api?api:this;};})(jQuery);

/***/ }),

/***/ 72379:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// https://greasyfork.org/ru/scripts/445617-shiki-links-comparator/code
// Возвращает массив ссылок из элемента .change
function getLinks(block){var links=Array.from(block.getElementsByClassName('b-external_link'));return links.map(link=>{var url=new URL(link.getElementsByTagName('a')[0].href);return{url:url.href,host:url.host,path:url.href.replace(url.origin,''),kind:link.classList[1],node:link.getElementsByClassName('url')[0]};});}// Возвращает массив уникальных элементов beforeLinks, при сравнении с afterLinks
function getUniqueElements(beforeLinks,afterLinks){return beforeLinks.filter(el1=>!afterLinks.find(el2=>el1.url===el2.url&&el1.kind===el2.kind));}// Возвращает похожую на link ссылку из array
function getSimilarLink(link,array){return array.find(l=>{// Если отличается только kind
if(link.url===l.url)return true;// Если совпадает host или kind и при этом pathname одной ссылки содержит pathname другой
// P.S. Сомнительное решение, возможно, стоит подумать над другим
if(link.host===l.host||link.kind===l.kind){if(link.path.includes(l.path))return true;if(l.path.includes(link.path))return true;}return false;});}// Возвращает массив beforeLinks со state, определённым как add, mod или del
function organizeLinks(beforeLinks,afterLinks,defaultState){return beforeLinks.map(link=>{var _link$url$includes;if((_link$url$includes=link.url.includes('/NONE'))!==null&&_link$url$includes!==void 0?_link$url$includes:defaultState==='ins'){link.state='del';return link;}var similarLink=getSimilarLink(link,afterLinks);link.state=similarLink?'mod':defaultState;return link;});}function prepareLinks(changes_block){var links_container=changes_block.getElementsByClassName('change');var beforeLinks=getLinks(links_container[0]);var afterLinks=getLinks(links_container[1]);var beforeLinksUniq=getUniqueElements(beforeLinks,afterLinks);var afterLinksUniq=getUniqueElements(afterLinks,beforeLinks);var beforeLinksPrepared=organizeLinks(beforeLinksUniq,afterLinksUniq,'del');var afterLinksPrepared=organizeLinks(afterLinksUniq,beforeLinksUniq,'ins');return beforeLinksPrepared.concat(afterLinksPrepared);}/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(fieldChangesNode){prepareLinks(fieldChangesNode).forEach(link=>{link.node.classList.add(link.state);});}

/***/ }),

/***/ 16346:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   Q: () => (/* binding */ ORDER_FIELD)
/* harmony export */ });
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(73148);
/* harmony import */ var url_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61160);
/* harmony import */ var url_parse__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(url_parse__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_difference__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66245);
/* harmony import */ var lodash_difference__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_difference__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62193);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(68090);
/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_in_new_tab__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(70416);
/* provided dependency */ var $ = __webpack_require__(74692);
// TODO: refactor to normal classes
var ORDER_FIELD='order';// 'order-by'
var DEFAULT_ORDER='ranked';var DEFAULT_DATA={kind:[],status:[],season:[],franchise:[],achievement:[],genre:[],genre_v1:[],studio:[],publisher:[],duration:[],rating:[],score:[],options:[],mylist:[],[ORDER_FIELD]:[],licensor:[]};// поля, передаваемые в GET параметрах
var GET_FILTERS=['genre_v1','duration','rating','score','options','mylist',ORDER_FIELD,'licensor'];// поля, разбитые на несколько фильтров
var SPLIT_FIELDS=['genre'];/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(basePath,currentUrl,changeCallback){var $root=$('.b-collection-filters');// вытаскивание из класса элемента типа и значения
var extractLiInfo=liNode=>{var $li=$(liNode);var field=$li.data('field');var value=$li.data('value');if(!field||!value){return null;}return{field,value:String(value)};};// удаление ! из начала и мусора из конца параметра
var removeBang=value=>value.replace(/^!/,'').replace(/\?.*/,'');// добавляет нужный параметр в меню с навигацией
var addOption=function addOption(field,rawValue){// добавляем всегда без !
var value=removeBang(rawValue);var text=value.replace(/^\d+-/,'');var targetYear=null;if((field==='publisher'||field==='studio')&&text.match(/-/)){text=text.replace(/-/g,' ');}else if(field==='season'&&value.match(/^\d+$/)){targetYear=parseInt(value,10);text=value+' год';}else if(field==='licensor'){text=value;}value=value.replace(/\./g,'');var $li=$(`<li data-field='${field}' data-value='${value}'><input type='checkbox'/>${text}</li>`);// для сезонов вставляем не в начало, а после предыдущего года
if(targetYear){var $placeholders=$('ul.seasons li',$root).filter(function(index){var match=this.className.match(/season-(\d+)/);if(!match){return false;}var year=parseInt(match[1],10);if(year<1000){year=year*10;}return year<targetYear;});if($placeholders.length){$li.insertBefore($placeholders.first());}else{$(`.anime-params.${field}s`,$root).append($li);}}else{$(`.anime-params.${field}s`,$root).prepend($li).parent().removeClass('hidden');}return $li;};var syncSortings=()=>{$root.find('.sortings').toggle(!window.globalSearch.phrase);};// клики по меню
$('.anime-params',$root).on('click','li',e=>{if((0,_utils_in_new_tab__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A)(e)){return;}// игнор средней кнопки мыши
if(e.target.classList.contains('b-question')){return;}// игнор при клике на инфо блок
// return if $(e.target).hasClass('filter') # игнор при клике на фильтр
var isAlreadySelected=e.currentTarget.classList.contains('selected');var liInfo=extractLiInfo(e.currentTarget);if(!liInfo){return;}if(!isAlreadySelected){if(e.target.type==='checkbox'){filters.add(liInfo.field,liInfo.value);}else if(SPLIT_FIELDS.includes(liInfo.field)){var valuesToRemove=$(e.currentTarget).closest('.anime-params').find('input[type=checkbox]:checked').closest('li').toArray().map(li=>extractLiInfo(li).value);filters.set(liInfo.field,liInfo.value,valuesToRemove);}else{filters.set(liInfo.field,liInfo.value);}}else{filters.remove(liInfo.field,liInfo.value);}changeCallback(filters.compile());if(!('type'in e.target)||e.target.type!=='checkbox'){e.preventDefault();}});// клики по фильтру группы - плюсику или минусику
$('.anime-params-block .block-filter',$root).on('click',function(){var $paramsBlock=$(this).closest('.anime-params-block');var toExclude=$(this).hasClass('item-sign')?$paramsBlock.find('li').length===$paramsBlock.find('.item-add:visible').length:$(this).hasClass('item-add');var toDisable=$(this).hasClass('item-sign')&&$paramsBlock.find('li').length===$paramsBlock.find('.item-minus:visible').length;$paramsBlock.find('li').map(function(){return extractLiInfo(this);}).each(function(index,liInfo){if(toDisable){filters.params[liInfo.field]=[];}else{filters.params[liInfo.field][index]=toExclude?`!${liInfo.value}`:liInfo.value;}});changeCallback(filters.compile());filters.parse(filters.compile());});// клики по фильтру элемента - плюсику или минусику
$('.anime-params li',$root).on('click','.filter',function(e){e.preventDefault();var toExclude=$(this).hasClass('item-add');$(this).removeClass(toExclude?'item-add':'item-minus').addClass(!toExclude?'item-add':'item-minus');var liInfo=extractLiInfo($(this).parent());var valueKey=filters.params[liInfo.field].indexOf(toExclude?liInfo.value:`!${liInfo.value}`);filters.params[liInfo.field][valueKey]=toExclude?`!${liInfo.value}`:liInfo.value;changeCallback(filters.compile());return false;});var filters={params:null,// установка значения параметра
set(field,value,valuesToRemove=this.params[field]){this.params[field].forEach(value2=>{if(!valuesToRemove.includes(value2)){return;}this.remove(field,value2);});this.add(field,value);},// выбор элемента
add(field,value){if(field===lodash_last__WEBPACK_IMPORTED_MODULE_3___default()(Object.keys(this.params))&&this.params[field].length>0){this.set(field,value);}else{this.params[field].push(value);}var $li=$(`li[data-field='${field}'][data-value='${removeBang(value)}']`,$root);// если такого элемента нет, то создаем его
if(!$li.length){$li=addOption(field,value);}// если элемент есть, но скрыт, то показываем его
if($li.css('display')==='none'){$li.css({display:'block'});}$li.addClass('selected');// если элемент с чекбоксом, то ставим галочку на чекбокс
var $input=$li.children('input');if($input.length){$input.prop({checked:true});// добавляем или показываем плюсик
var $filter=$li.children('.filter');if($filter.length){return $filter.removeClass('item-add').removeClass('item-minus').addClass(value[0]==='!'?'item-minus':'item-add').show();}else{return $li.prepend('<span class="filter '+(value[0]==='!'?'item-minus':'item-add')+'"></span>');}}},// отмена выбора элемента
remove(field,rawValue){// т.к. сюда значение приходит как с !, так и без, то удалять надо оба варианта
var value=removeBang(rawValue);this.params[field]=lodash_difference__WEBPACK_IMPORTED_MODULE_1___default()(this.params[field],[value,`!${value}`]);try{// because there can bad order, and it will break jQuery selector
var $li=$(`li[data-field='${field}'][data-value='${value}']`,$root);$li.removeClass('selected');// снятие галочки с чекбокса
$li.children('input').prop({checked:false});// скрытие плюсика/минусика
return $li.children('.filter').hide();}catch(error){}},// формирование строки урла по выбранным элементам
compile(page){var pathFilters='';var locationFilters=url_parse__WEBPACK_IMPORTED_MODULE_0___default()(window.location.href,true).query;Object.entries(this.params).forEach(([field,values])=>{delete locationFilters[field];if(field===ORDER_FIELD&&values[0]===DEFAULT_ORDER&&!location.href.match(/\/list\/(anime|manga)/)){return;}if(GET_FILTERS.includes(field)){if(values!=null?values.length:undefined){locationFilters[field]=values.join(',');}}else if(values!=null?values.length:undefined){pathFilters+=`/${field}/${values.join(',')}`;}});if(page&&page!==1){pathFilters+=`/page/${page}`;}return this.lastCompiled=new tiny_uri__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A(basePath+pathFilters).query.set(locationFilters).toString();},lastCompiled:null,// парсинг строки урла и выбор
parse(url){$('.anime-params .selected',$root).toggleClass('selected');$('.anime-params input[type=checkbox]:checked',$root).prop({checked:false});$('.anime-params .filter',$root).hide();this.params=JSON.parse(JSON.stringify(DEFAULT_DATA));var parts=url.replace(`${location.protocol}//${location.hostname}`,'').replace(`:${location.port}`,'').replace(basePath,'').replace(/\?.*/,'').match(/[\w-]+\/[^/]+/g);var uriQuery=url_parse__WEBPACK_IMPORTED_MODULE_0___default()(window.location.href,true).query;Object.entries(uriQuery).forEach(([field,values])=>{if(!GET_FILTERS.includes(field)){return;}parts=(parts||[]).concat([`${field}/${values}`]);});(parts||[]).forEach(match=>{var field=match.split('/')[0];if(field==='page'||!(field in DEFAULT_DATA)){return;}return match.split('/')[1].split(',').forEach(value=>{try{return this.add(field,value);}catch(error){// becase there can bad order, and it will break jQuery selector
if(field===ORDER_FIELD){// || field === 'order-by') {
return this.add(field,DEFAULT_ORDER);}}});});// hide sortings if there is anything in the search
syncSortings();if(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default()(this.params[ORDER_FIELD])){return this.add(ORDER_FIELD,DEFAULT_ORDER);}}};filters.parse(currentUrl);// раскрываем фильтры, если какой-то из них выбран
$root.find('input[type=checkbox]:checked').closest('.b-spoiler').spoiler().trigger('spoiler:open');window.globalSearch.$node.on('phrase:change',syncSortings);$(document).one('turbolinks:before-cache',()=>{var _window$globalSearch;return(_window$globalSearch=window.globalSearch)===null||_window$globalSearch===void 0?void 0:_window$globalSearch.$node.off('phrase:change',syncSortings);});return filters;}

/***/ }),

/***/ 14216:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ BanForm)
/* harmony export */ });
/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(27349);
/* provided dependency */ var $ = __webpack_require__(74692);
class BanForm extends _view__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A{initialize(){this.$root.on('click','[data-reason]',this._click);}_click({currentTarget}){$(currentTarget).closest('.b-form').find('[name="ban[reason]"]').val($(currentTarget).data('reason'));$('.hide-to-spoiler').prop('checked',!!$(currentTarget).data('spoilered-reason')).trigger('change');}}

/***/ }),

/***/ 49946:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ShikiModal)
/* harmony export */ });
/* harmony import */ var _views_application_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(27349);
/* provided dependency */ var $ = __webpack_require__(74692);
class ShikiModal extends _views_application_view__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A{initialize(){this.$modal=$('<div class="b-modal"><div class="inner"></div></div>');this.$modal.find('.inner').append(this.$root).process();this.$modal.css('top',$(window).scrollTop());this.$modal.children().css('top',$(window).scrollTop());this.$modal.appendTo(document.body);this.checkCancel=this._onKeyPress.bind(this);$(window).on('keydown',this.checkCancel);this.$modal.on('click','.cancel',()=>this.close());this._shade();}close(){$(window).off('keydown',this.checkCancel);this.$modal.remove();this._unshade();}_shade(){$('.b-shade').addClass('active').on('click',()=>this.close());}_unshade(){$('.b-shade').removeClass('active').off('click',()=>this.close());}_onKeyPress(e){if(e.keyCode===27){this.close();}}}

/***/ }),

/***/ 27349:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ View)
/* harmony export */ });
/* harmony import */ var shiki_decorators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89752);
/* provided dependency */ var $ = __webpack_require__(74692);
var _class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}return desc;}var View=(_class=class View{constructor(node,...args){this._initialize(node);this.initialize(...args);this._afterInitialize();}destroy(){}on(...args){this.$node.on(...args);}trigger(...args){this.$node.trigger(...args);}$(selector){return $(selector,this.$node);}html(html){return this.$node.html(html);}_initialize(node){this._setRoot(node);}_afterInitialize(){}_setRoot(node){this.$node=$(node);this.$root=this.$node;this.node=this.$node[0];this.root=this.node;this.$node.view(this);}},(_applyDecoratedDescriptor(_class.prototype,"on",[shiki_decorators__WEBPACK_IMPORTED_MODULE_0__/* .chain */ .cy],Object.getOwnPropertyDescriptor(_class.prototype,"on"),_class.prototype)),_class);

/***/ }),

/***/ 11442:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ CollectionSearch)
/* harmony export */ });
/* harmony import */ var tiny_uri__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73148);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62193);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var throttle_debounce__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(73700);
/* harmony import */ var shiki_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79308);
/* harmony import */ var _services_ajax_cacher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68292);
/* harmony import */ var _views_application_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27349);
/* harmony import */ var _utils_jst__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60957);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12691);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}class CollectionSearch extends _views_application_view__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A{initialize(){this.$input=this.$('.field input');this.$clear=this.$('.field .clear');this.isActive=false;this.debouncedSearch=(0,throttle_debounce__WEBPACK_IMPORTED_MODULE_6__/* .debounce */ .s)(250,phrase=>this._search(phrase));this._phrase=this.inputSearchPhrase;this.$input.on('change blur paste',()=>this._onChange());this.$input.on('keyup',e=>this._onKeyup(e));this.$clear.on('click',()=>this._clearPhrase(true));}get $collection(){return this.$('.search-results');}get inputSearchPhrase(){return this.$input.val();}get phrase(){return this._phrase;}set phrase(value){var trimmedValue=value.trim();if(this._phrase.trim()===trimmedValue){return;}var priorPhrase=this._phrase;this._phrase=value;if(priorPhrase!==undefined){// it is undefined in constructor
this._activate();this.debouncedSearch(trimmedValue);}this.$input.toggleClass('has-value',!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this._phrase));}// handlers
_onKeyup({keyCode}){if(keyCode===27){this._cancel();return;}this.phrase=this.inputSearchPhrase;}_onChange(){this.phrase=this.inputSearchPhrase;}// private functions
_clearPhrase(isFocus){this.$input.val('').trigger('change');if(isFocus){this.$input.focus();}}_cancel(){if(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this.phrase)){this._deactivate();}else{this._clearPhrase();}}_activate(){this._showAjax();this.isActive=true;}_deactivate(){this.$input.blur();this.isActive=false;}_search(phrase){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$ajaxCacher$fet,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _services_ajax_cacher__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.fetch(_this._searchUrl(phrase));case 2:_yield$ajaxCacher$fet=_context.sent;data=_yield$ajaxCacher$fet.data;status=_yield$ajaxCacher$fet.status;_this._hideAjax();if(!(status!==200)){_context.next=9;break;}shiki_utils__WEBPACK_IMPORTED_MODULE_1__.flash.error(_utils_i18n__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.t('frontend.lib.please_try_again_later'));return _context.abrupt("return");case 9:if(phrase===_this.inputSearchPhrase.trim()){_this._changeUrl(_this._displayUrl(phrase));_this._processResponse(data);}case 10:case"end":return _context.stop();}},_callee);}))();}_changeUrl(url){window.history.replaceState({turbolinks:true,url},'',url);}_processResponse(response){var html;if(response.content){html=response.content+(response.postloader||'');}else{html=lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this.phrase)?'':_utils_jst__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A['search/nothing_found']({isAutocomplete:false});}this.$collection.html(html).process(response.JS_EXPORTS);}_searchUrl(phrase){return this._url(phrase,'search');}_displayUrl(phrase){return this._url(phrase,'display')||this._url(phrase,'search');}_url(phrase,key){var url=this.$root.data(`${key}_url`);if(!url){return null;}return new tiny_uri__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A(url).query.set('phrase',phrase||null).toString();}_showAjax(){this.$collection.addClass('b-ajax');}_hideAjax(){this.$collection.removeClass('b-ajax');}}

/***/ }),

/***/ 22494:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ WallCluster)
/* harmony export */ });
/* harmony import */ var lodash_max__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(94506);
/* harmony import */ var lodash_max__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_max__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_min__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31684);
/* harmony import */ var lodash_min__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_min__WEBPACK_IMPORTED_MODULE_1__);
class WallCluster{static initClass(maxContainerWidth){this.MARGIN=4;}constructor(images,maxContainerWidth){this.images=images;this.maxContainerWidth=maxContainerWidth;}mason(top,maxWidth,maxHeight){this.top=top;this.maxWidth=maxWidth;this.maxHeight=maxHeight;this.images.forEach(image=>image.normalize(// min with maxContainerWidth becase image can't be wider than its container
Math.min(this.maxWidth,this.maxContainerWidth),this.maxHeight));this.images.forEach(image=>this._put(image));this.images.forEach(image=>image.apply());this.images.forEach(image=>image.toShikiImage());}width(){return lodash_max__WEBPACK_IMPORTED_MODULE_0___default()(this.images.map(v=>v.left+v.width))||0;}height(){return lodash_max__WEBPACK_IMPORTED_MODULE_0___default()(this.images.map(v=>v.top+v.height))||0;}_positioned(){return this.images.filter(v=>v.positioned);}_put(image){var left=lodash_max__WEBPACK_IMPORTED_MODULE_0___default()(this._positioned().map(v=>v.left+v.width));if(left){left+=WallCluster.MARGIN;}else{left=0;}image.position(left,this.top);this._flatten();this._scale();}_flatten(){var images=this._positioned();if(images.length===1){return;}var heights=images.map(v=>v.height);var minHeight=lodash_min__WEBPACK_IMPORTED_MODULE_1___default()(heights);if(minHeight!==lodash_max__WEBPACK_IMPORTED_MODULE_0___default()(heights)){images.forEach(image=>{image.scaleHeight(minHeight);image.positioned=false;});images.forEach(image=>this._put(image));}}_scale(){var images=this._positioned();var currentWidth=images.reduce((memo,image,index)=>memo+image.width+(index===images.length-1?0:WallCluster.MARGIN),0.0);if(currentWidth>this.maxWidth){images.forEach(image=>{image.scale(this.maxWidth/currentWidth);image.positioned=false;});images.forEach(image=>this._put(image));}}}WallCluster.initClass();

/***/ }),

/***/ 68473:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ Wall)
});

// EXTERNAL MODULE: ./node_modules/lodash/lodash.js
var lodash = __webpack_require__(2543);
var lodash_default = /*#__PURE__*/__webpack_require__.n(lodash);
// EXTERNAL MODULE: ./app/packs/javascripts/views/application/view.js
var view = __webpack_require__(27349);
// EXTERNAL MODULE: ./app/packs/javascripts/views/wall/cluster.js
var cluster = __webpack_require__(22494);
// EXTERNAL MODULE: ./node_modules/lodash/round.js
var round = __webpack_require__(36944);
var round_default = /*#__PURE__*/__webpack_require__.n(round);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/wall/image.js
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}class WallImage extends view/* default */.A{initialize(){this.$image=this.$node.find('img');var _this$_imageSizes=this._imageSizes();var _this$_imageSizes2=_slicedToArray(_this$_imageSizes,2);this.width=_this$_imageSizes2[0];this.height=_this$_imageSizes2[1];var _Array$from=Array.from([this.width,this.height]);var _Array$from2=_slicedToArray(_Array$from,2);this.originalWidth=_Array$from2[0];this.originalHeight=_Array$from2[1];this.ratio=this.width/this.height;this.reset();}reset(){this.positioned=false;this.left=0;this.top=0;this.width=this.originalWidth;this.height=this.originalHeight;}position(left,top){this.left=left;this.top=top;this.positioned=true;}normalize(width,height){if(this.width>width){this.scaleWidth(width);}if(this.height>height){this.scaleHeight(height);}}apply(){this.$image.css({width:this.width,height:this.height});this.$node.css({top:this.top,left:this.left});}destroy(){this.$node.removeAttr('style');this.$image.removeAttr('style');}scaleWidth(width){this.height*=width/this.width;return this.width=width;}scaleHeight(height){this.width*=height/this.height;return this.height=height;}scale(percent){this.width*=percent;return this.height*=percent;}weight(){return round_default()(this.ratio,1);// return (1 / this.ratio).round(1)
}toShikiImage(){this.$node.shikiImage();}_imageSizes(){return[this.$image[0].naturalWidth*1.0,this.$image[0].naturalHeight*1.0];}}
;// CONCATENATED MODULE: ./app/packs/javascripts/views/wall/video.js
var HEIGHT_RATIO={default:1.0,'shrinked-1_3':0.744,'shrinked-1_5':0.8};class WallVideo extends WallImage{initialize(){var _this$node$className$;this.ratioKey=((_this$node$className$=this.node.className.match(/shrinked-\d_\d/))===null||_this$node$className$===void 0?void 0:_this$node$className$[0])||'default';super.initialize();}apply(){this.$image.css({width:this.width// height: this.height
});this.$node.css({top:this.top,left:this.left,width:this.width,height:this.height});}toShikiImage(){}_imageSizes(){return[this.$image[0].naturalWidth*1.0,this.$image[0].naturalHeight*1.0*this._heightRatio()];}_heightRatio(){return HEIGHT_RATIO[this.ratioKey];}}
// EXTERNAL MODULE: ./app/packs/javascripts/utils/load_image.js
var load_image = __webpack_require__(75612);
;// CONCATENATED MODULE: ./app/packs/javascripts/views/wall/view.js
/* provided dependency */ var $ = __webpack_require__(74692);
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(typeof e+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var MIN_CLUSTER_WEIGHT=2.5;var MIN_TWO_CLUSTERS_WEIGHT=5.8;var MIN_CLUSTER_HEIGHT=80;var lastId=0;class Wall extends view/* default */.A{initialize(options={}){var _this=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.id=lastId;lastId+=1;_this.isOneCluster=options.isOneCluster;_this.minClusterHeight=options.isOneCluster!==undefined?options.minClusterHeight:MIN_CLUSTER_HEIGHT;_this.maxWidth=options.maxWidth;_this.maxHeight=options.maxHeight;if(!(options.awaitImagesLoaded===undefined||options.awaitImagesLoaded)){_context.next=9;break;}_context.next=9;return (0,load_image/* loadImagesFinally */.U6)(_this.node);case 9:_this._prepare();_this._buildClusters();_this._mason();_this._toShikiImages();case 13:case"end":return _context.stop();}},_callee);}))();}get isTwoClusters(){return!this.isOneCluster&&lodash_default()(this.images,image=>image.weight())>MIN_TWO_CLUSTERS_WEIGHT;}update(){}destroy(){this.$node.removeAttr('style');this.images.forEach(image=>image.destroy());}_prepare(){// this.$node.css({
//   width: '',
//   height: ''
// });
this.$node.removeAttr('style');this.maxContainerWidth=parseInt(this.$node.css('width'));this.maxHeight=this.maxHeight||parseInt(this.$node.css('max-height'));this.maxWidth=this.maxWidth||this.maxContainerWidth;var $images=this.$node.find('.b-image, .b-video').attr({rel:`wall-${this.id}`});$images.children().removeClass('check-width');this.images=$images.toArray().map(node=>{if(node.classList.contains('b-video')){return new WallVideo($(node));}return new WallImage($(node));});// this.images.forEach((image) => console.log(image.weight(), image.node));
}_buildClusters(){if(this.isTwoClusters){var imagesCluster1=[];var imagesCluster2=[];this.images.reduce((memo,image)=>{if(memo>MIN_CLUSTER_WEIGHT){imagesCluster2.push(image);}else{imagesCluster1.push(image);}return memo+image.weight();},0);this.cluster_1=new cluster/* default */.A(imagesCluster1,this.maxContainerWidth);this.cluster_2=new cluster/* default */.A(imagesCluster2,this.maxContainerWidth);}else{this.cluster=new cluster/* default */.A(this.images,this.maxContainerWidth);}}_mason(){var height;var width;if(this.isTwoClusters){this._masonSecondCluster(false);width=Math.max(this.cluster_1.width(),this.cluster_2.width());height=this.cluster_1.height()+cluster/* default */.A.MARGIN+this.cluster_2.height();}else{this._masonFirstCluster();width=this.cluster.width();height=this.cluster.height();}this.$node.css({width:Math.min(width,this.maxWidth,this.maxContainerWidth),height:Math.min(height,this.maxHeight)});}_clusterFirstHeight(){return Math.max(this.maxHeight-this.minClusterHeight,this.minClusterHeight);}_clusterSecondHeight(){return Math.max(Math.round(this.maxHeight-this.cluster_1.height()+cluster/* default */.A.MARGIN),this.minClusterHeight);}_masonFirstCluster(){return this.cluster.mason(0,this.maxWidth,this.maxHeight);}_masonSecondCluster(isReposition){this.cluster_1.mason(0,this.maxWidth,this._clusterFirstHeight());this.cluster_2.mason(this.cluster_1.height()+cluster/* default */.A.MARGIN,this.maxWidth,this._clusterSecondHeight());if(isReposition){this.$node.css('max-height',this.cluster_2.height()+cluster/* default */.A.MARGIN,+this.cluster_1.height());return;}var desiredWidth=Math.round(this.maxWidth*0.95);if(this.cluster_2.width()<desiredWidth||this.cluster_1.width()<desiredWidth){this.maxHeight=Math.round(this.maxHeight*1.3);this.$node.css('max-height',this.maxHeight);this.images.forEach(image=>image.reset());this._masonSecondCluster(true);}}_toShikiImages(){this.images.forEach(image=>image.toShikiImage());}}

/***/ }),

/***/ 90748:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, achievement, window) {
      pug_html = pug_html + "\u003Cdiv" + (pug.attr("class", pug.classes(["achievement",achievement.event], [false,true]), false, true)) + "\u003E\u003C!-- es5 only in pug. also only one root node--\u003E\u003Cdiv class=\"content\"\u003E\u003Cdiv class=\"title\"\u003E\u003Ca" + (pug.attr("href", window.SHIKI_USER.url + '/achievements', true, true)) + "\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.achievements.title.' + achievement.event)) ? "" : pug_interp)) + "\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"name\"\u003E\u003Cdiv class=\"icon\"\u003E\u003C\u002Fdiv\u003E\u003Ca" + (pug.attr("href", '/achievements/' + achievement.neko_id, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = achievement.label) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
if (achievement.level) {
pug_html = pug_html + "\u003Cspan class=\"level\"\u003Eур. " + (pug.escape(null == (pug_interp = achievement.level) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"image\"\u003E\u003Cimg" + (pug.attr("src", achievement.image, true, true)) + "\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "achievement" in locals_for_with ?
        locals_for_with.achievement :
        typeof achievement !== 'undefined' ? achievement : undefined, "window" in locals_for_with ?
        locals_for_with.window :
        typeof window !== 'undefined' ? window : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 76182:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n) {
      pug_html = pug_html + "\u003Cdiv" + (" class=\"b-comments-notifier\""+" style=\"display: none;\""+pug.attr("title", I18n.t('frontend.lib.comments_notifier.number_of_unread_comments'), true, true)) + "\u003E\u003C!-- es5 only in pug. also only one root node--\u003E\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 34499:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, destroy_url, image, rel) {
      pug_html = pug_html + "\u003Ca" + (" class=\"b-image\""+pug.attr("href", image.original_url, true, true)+pug.attr("id", image.id, true, true)+pug.attr("rel", rel, true, true)+pug.attr("data-user_id", image.user_id, true, true)+pug.attr("data-tags", image.tags, true, true)) + "\u003E\u003C!-- es5 only in pug. also only one root node--\u003E";
if (destroy_url) {
pug_html = pug_html + "\u003Cdiv class=\"mobile-edit\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"controls\"\u003E\u003Cdiv" + (" class=\"delete\""+pug.attr("title", I18n.t('frontend.images.delete'), true, true)) + "\u003E\u003C\u002Fdiv\u003E\u003Cdiv" + (" class=\"confirm\""+pug.attr("title", I18n.t('frontend.images.confirm'), true, true)+pug.attr("data-action", destroy_url, true, true)+" data-method=\"delete\" data-remote=\"true\" data-type=\"json\"") + "\u003E\u003C\u002Fdiv\u003E\u003Cdiv" + (" class=\"cancel\""+pug.attr("title", I18n.t('frontend.images.cancel'), true, true)) + "\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003Cimg" + (pug.attr("src", image.preview_url, true, true)) + "\u003E\u003C\u002Fa\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "destroy_url" in locals_for_with ?
        locals_for_with.destroy_url :
        typeof destroy_url !== 'undefined' ? destroy_url : undefined, "image" in locals_for_with ?
        locals_for_with.image :
        typeof image !== 'undefined' ? image : undefined, "rel" in locals_for_with ?
        locals_for_with.rel :
        typeof rel !== 'undefined' ? rel : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 37337:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, bar_class, bar_percent, can_vote, model) {
      pug_html = pug_html + "\u003Cdiv class=\"poll-outer\"\u003E\u003C!-- es5 only in pug--\u003E\u003Cdiv" + (pug.attr("class", pug.classes(["b-poll",'is-' + model.width], [false,true]), false, true)) + "\u003E\u003Cdiv class=\"poll\"\u003E\u003Cdiv class=\"name\"\u003E" + (pug.escape(null == (pug_interp = model.name) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"text\"\u003E" + (null == (pug_interp = model.text_html) ? "" : pug_interp) + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"poll-variants\"\u003E";
// iterate model.variants
;(function(){
  var $$obj = model.variants;
  if ('number' == typeof $$obj.length) {
      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {
        var poll_variant = $$obj[pug_index0];
if (can_vote) {
pug_html = pug_html + "\u003Cdiv class=\"poll-variant pending\"\u003E\u003Clabel class=\"b-radio\"\u003E\u003Cinput" + (pug.attr("name", 'poll_' + model.id, true, true)+" type=\"radio\""+pug.attr("value", poll_variant.id, true, true)) + "\u003E\u003Cdiv class=\"radio-label\"\u003E" + (null == (pug_interp = poll_variant.label_html) ? "" : pug_interp) + "\u003C\u002Fdiv\u003E\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + ("\u003Cdiv class=\"poll-variant result\"\u003E\u003Cdiv class=\"votes-total\"\u003E" + (pug.escape(null == (pug_interp = poll_variant.votes_total) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"votes-percent\"\u003E" + (pug.escape(null == (pug_interp = bar_percent(poll_variant)) ? "" : pug_interp)) + "%\u003C\u002Fdiv\u003E\u003Clabel\u003E" + (null == (pug_interp = poll_variant.label_html) ? "" : pug_interp));
if (model.vote && model.vote.variant_id == poll_variant.id) {
pug_html = pug_html + "\u003Cdiv class=\"voted-for\"\u003E✓\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Flabel\u003E\u003Cdiv class=\"bar simple horizontal\"\u003E\u003Cdiv class=\"line\"\u003E\u003Cdiv" + (pug.attr("class", pug.classes(["bar",bar_class(poll_variant)], [false,true]), false, true)+pug.attr("style", pug.style('width: ' + bar_percent(poll_variant) + '%'), true, true)) + "\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var pug_index0 in $$obj) {
      $$l++;
      var poll_variant = $$obj[pug_index0];
if (can_vote) {
pug_html = pug_html + "\u003Cdiv class=\"poll-variant pending\"\u003E\u003Clabel class=\"b-radio\"\u003E\u003Cinput" + (pug.attr("name", 'poll_' + model.id, true, true)+" type=\"radio\""+pug.attr("value", poll_variant.id, true, true)) + "\u003E\u003Cdiv class=\"radio-label\"\u003E" + (null == (pug_interp = poll_variant.label_html) ? "" : pug_interp) + "\u003C\u002Fdiv\u003E\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + ("\u003Cdiv class=\"poll-variant result\"\u003E\u003Cdiv class=\"votes-total\"\u003E" + (pug.escape(null == (pug_interp = poll_variant.votes_total) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"votes-percent\"\u003E" + (pug.escape(null == (pug_interp = bar_percent(poll_variant)) ? "" : pug_interp)) + "%\u003C\u002Fdiv\u003E\u003Clabel\u003E" + (null == (pug_interp = poll_variant.label_html) ? "" : pug_interp));
if (model.vote && model.vote.variant_id == poll_variant.id) {
pug_html = pug_html + "\u003Cdiv class=\"voted-for\"\u003E✓\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Flabel\u003E\u003Cdiv class=\"bar simple horizontal\"\u003E\u003Cdiv class=\"line\"\u003E\u003Cdiv" + (pug.attr("class", pug.classes(["bar",bar_class(poll_variant)], [false,true]), false, true)+pug.attr("style", pug.style('width: ' + bar_percent(poll_variant) + '%'), true, true)) + "\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E";
if (can_vote) {
pug_html = pug_html + "\u003Cdiv class=\"poll-actions\"\u003E\u003Cdiv class=\"vote hidden\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.polls.vote')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"abstain hidden\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.polls.abstain')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "bar_class" in locals_for_with ?
        locals_for_with.bar_class :
        typeof bar_class !== 'undefined' ? bar_class : undefined, "bar_percent" in locals_for_with ?
        locals_for_with.bar_percent :
        typeof bar_percent !== 'undefined' ? bar_percent : undefined, "can_vote" in locals_for_with ?
        locals_for_with.can_vote :
        typeof can_vote !== 'undefined' ? can_vote : undefined, "model" in locals_for_with ?
        locals_for_with.model :
        typeof model !== 'undefined' ? model : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 1488:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, isAutocomplete) {
      pug_html = pug_html + "\u003Cdiv\u003E\u003C!-- es5 only in pug--\u003E";
if (isAutocomplete) {
pug_html = pug_html + "\u003Cdiv class=\"nothing_found\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.search.nothing_found')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv class=\"b-nothing_here\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.search.nothing_found')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "isAutocomplete" in locals_for_with ?
        locals_for_with.isAutocomplete :
        typeof isAutocomplete !== 'undefined' ? isAutocomplete : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 96356:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, currentMode, hasIndex) {
      pug_html = pug_html + "\u003Cdiv\u003E\u003C!-- es5 only in pug. also only one root node--\u003E";
if (hasIndex) {
pug_html = pug_html + "\u003Cdiv" + (pug.attr("class", pug.classes(["search-mode",(currentMode === 'index' ? 'active' : '')], [false,true]), false, true)+" data-mode=\"index\"") + "\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.search.mode.index')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
}
// iterate ['anime', 'manga', 'ranobe', 'character', 'person']
;(function(){
  var $$obj = ['anime', 'manga', 'ranobe', 'character', 'person'];
  if ('number' == typeof $$obj.length) {
      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {
        var mode = $$obj[pug_index0];
pug_html = pug_html + "\u003Cdiv" + (pug.attr("class", pug.classes(["search-mode",(currentMode === mode ? 'active' : '')], [false,true]), false, true)+pug.attr("data-mode", mode, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.search.mode.' + mode)) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
      }
  } else {
    var $$l = 0;
    for (var pug_index0 in $$obj) {
      $$l++;
      var mode = $$obj[pug_index0];
pug_html = pug_html + "\u003Cdiv" + (pug.attr("class", pug.classes(["search-mode",(currentMode === mode ? 'active' : '')], [false,true]), false, true)+pug.attr("data-mode", mode, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = I18n.t('frontend.search.mode.' + mode)) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "currentMode" in locals_for_with ?
        locals_for_with.currentMode :
        typeof currentMode !== 'undefined' ? currentMode : undefined, "hasIndex" in locals_for_with ?
        locals_for_with.hasIndex :
        typeof hasIndex !== 'undefined' ? hasIndex : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 32341:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, destroy_url, extended_html, form_method, form_url, model, statuses, user_id) {
      pug_html = pug_html + "\u003Cdiv\u003E\u003C!-- es5 only in pug. also only one root node--\u003E\u003Cdiv" + (pug.attr("class", pug.classes(["b-add_to_list",model.status], [false,true]), false, true)) + "\u003E\u003Cform" + (pug.attr("action", form_url, true, true)+pug.attr("data-method", form_method, true, true)+" data-remote=\"true\" data-type=\"json\"") + "\u003E\u003Cinput type=\"hidden\" name=\"frontend\" value=\"1\"\u003E\u003Cinput" + (" type=\"hidden\" name=\"user_rate[user_id]\""+pug.attr("value", user_id, true, true)) + "\u003E\u003Cinput" + (" type=\"hidden\" name=\"user_rate[target_id]\""+pug.attr("value", model.target_id, true, true)) + "\u003E\u003Cinput" + (" type=\"hidden\" name=\"user_rate[target_type]\""+pug.attr("value", model.target_type, true, true)) + "\u003E\u003Cinput" + (" type=\"hidden\" name=\"user_rate[status]\""+pug.attr("value", model.status, true, true)) + "\u003E\u003Cinput" + (" type=\"hidden\" name=\"user_rate[score]\""+pug.attr("value", model.score, true, true)) + "\u003E\u003Cdiv class=\"trigger\"\u003E\u003Cdiv class=\"trigger-arrow\"\u003E\u003C\u002Fdiv\u003E";
if (model.id) {
pug_html = pug_html + "\u003Cdiv class=\"edit-trigger\"\u003E\u003Cdiv class=\"edit\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"text\"\u003E\u003Cspan" + (" class=\"status-name\""+pug.attr("data-text", statuses[model.status], true, true)) + "\u003E\u003C\u002Fspan\u003E";
if (model.score > 0) {
pug_html = pug_html + "\u003Cspan\u003E&nbsp;&nbsp;&ndash;&nbsp;&nbsp;" + (pug.escape(null == (pug_interp = model.score) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv" + (" class=\"text add-trigger\""+pug.attr("data-status", model.status, true, true)) + "\u003E\u003Cdiv class=\"plus\"\u003E\u003C\u002Fdiv\u003E\u003Cspan" + (" class=\"status-name\""+pug.attr("data-text", I18n.t('frontend.user_rates.button.add_to_list'), true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"expanded-options\"\u003E";
// iterate statuses
;(function(){
  var $$obj = statuses;
  if ('number' == typeof $$obj.length) {
      for (var status = 0, $$l = $$obj.length; status < $$l; status++) {
        var title = $$obj[status];
if (!model.id || model.status != status) {
pug_html = pug_html + "\u003Cdiv" + (" class=\"option add-trigger\""+pug.attr("data-status", status, true, true)) + "\u003E\u003Cdiv class=\"text\"\u003E\u003Cspan" + (" class=\"status-name\""+pug.attr("data-text", title, true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var status in $$obj) {
      $$l++;
      var title = $$obj[status];
if (!model.id || model.status != status) {
pug_html = pug_html + "\u003Cdiv" + (" class=\"option add-trigger\""+pug.attr("data-status", status, true, true)) + "\u003E\u003Cdiv class=\"text\"\u003E\u003Cspan" + (" class=\"status-name\""+pug.attr("data-text", title, true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
    }
  }
}).call(this);

if (model.id) {
pug_html = pug_html + "\u003Cdiv" + (" class=\"option remove-trigger\""+pug.attr("data-action", destroy_url, true, true)+" data-method=\"delete\" data-remote=\"true\" data-type=\"json\""+pug.attr("value", I18n.t('frontend.user_rates.button.remove_from_my_list'), true, true)) + "\u003E\u003Cdiv class=\"text\"\u003E\u003Cspan" + (" class=\"status-name\""+pug.attr("data-text", I18n.t('frontend.user_rates.button.remove_from_my_list'), true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fform\u003E\u003C\u002Fdiv\u003E" + (null == (pug_interp = extended_html) ? "" : pug_interp) + "\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "destroy_url" in locals_for_with ?
        locals_for_with.destroy_url :
        typeof destroy_url !== 'undefined' ? destroy_url : undefined, "extended_html" in locals_for_with ?
        locals_for_with.extended_html :
        typeof extended_html !== 'undefined' ? extended_html : undefined, "form_method" in locals_for_with ?
        locals_for_with.form_method :
        typeof form_method !== 'undefined' ? form_method : undefined, "form_url" in locals_for_with ?
        locals_for_with.form_url :
        typeof form_url !== 'undefined' ? form_url : undefined, "model" in locals_for_with ?
        locals_for_with.model :
        typeof model !== 'undefined' ? model : undefined, "statuses" in locals_for_with ?
        locals_for_with.statuses :
        typeof statuses !== 'undefined' ? statuses : undefined, "user_id" in locals_for_with ?
        locals_for_with.user_id :
        typeof user_id !== 'undefined' ? user_id : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 19586:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, entry, increment_url, model, rate_html) {
      pug_html = pug_html + "\u003Cdiv\u003E\u003C!-- es5 only in pug. also only one root node--\u003E\u003Cdiv class=\"rate-show\"\u003E";
if (model.target_type == 'Anime') {
pug_html = pug_html + "\u003Cdiv class=\"rate-number\"\u003E\u003Cspan class=\"current-episodes\"\u003E" + (pug.escape(null == (pug_interp = model.episodes) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
if (entry.episodes != 0) {
pug_html = pug_html + "\u003Cspan class=\"b-separator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"total-episodes\"\u003E" + (pug.escape(null == (pug_interp = entry.episodes) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
if (model.episodes != entry.episodes || model.episodes == 0) {
pug_html = pug_html + "\u003Cspan" + (" class=\"item-add increment\""+pug.attr("data-action", increment_url, true, true)+" data-method=\"post\" data-remote=\"true\" data-type=\"json\"") + "\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"episodes\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('activerecord.attributes.user_rate.episodes')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
}
else
if (model.volumes != 0) {
pug_html = pug_html + "\u003Cdiv class=\"rate-number\"\u003E\u003Cspan class=\"current-episodes\"\u003E" + (pug.escape(null == (pug_interp = model.volumes) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
if (entry.volumes != 0) {
pug_html = pug_html + "\u003Cspan class=\"b-separator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"total-episodes\"\u003E" + (pug.escape(null == (pug_interp = entry.volumes) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
if (model.volumes != entry.volumes || model.volumes == 0) {
pug_html = pug_html + "\u003Cspan" + (" class=\"item-add increment\""+pug.attr("data-action", increment_url, true, true)+" data-remote=\"true\" data-type=\"json\" data-method=\"post\"") + "\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"episodes\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('activerecord.attributes.user_rate.volumes')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv class=\"rate-number\"\u003E\u003Cspan class=\"current-episodes\"\u003E" + (pug.escape(null == (pug_interp = model.chapters) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
if (entry.chapters != 0) {
pug_html = pug_html + "\u003Cspan class=\"b-separator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"total-episodes\"\u003E" + (pug.escape(null == (pug_interp = entry.chapters) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
if (model.chapters != entry.chapters || model.chapters == 0) {
pug_html = pug_html + "\u003Cspan" + (" class=\"item-add increment\""+pug.attr("data-action", increment_url, true, true)+" data-remote=\"true\" data-type=\"json\" data-method=\"post\"") + "\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"episodes\"\u003E" + (pug.escape(null == (pug_interp = I18n.t('activerecord.attributes.user_rate.chapters')) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + (null == (pug_interp = rate_html) ? "" : pug_interp);
if (model.text_html) {
pug_html = pug_html + "\u003Cdiv class=\"note\"\u003E" + (null == (pug_interp = model.text_html) ? "" : pug_interp) + "\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "entry" in locals_for_with ?
        locals_for_with.entry :
        typeof entry !== 'undefined' ? entry : undefined, "increment_url" in locals_for_with ?
        locals_for_with.increment_url :
        typeof increment_url !== 'undefined' ? increment_url : undefined, "model" in locals_for_with ?
        locals_for_with.model :
        typeof model !== 'undefined' ? model : undefined, "rate_html" in locals_for_with ?
        locals_for_with.rate_html :
        typeof rate_html !== 'undefined' ? rate_html : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 7353:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(67766);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (I18n, score) {
      pug_html = pug_html + "\u003Cdiv" + (" class=\"b-rate rateable\""+pug.attr("data-notices", I18n.t('activerecord.attributes.user_rate.scores'), true, true)) + "\u003E\u003C!-- es5 only in pug. also only one root node--\u003E\u003Cdiv class=\"stars-container\"\u003E\u003Cdiv class=\"hoverable-trigger\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv" + (pug.attr("class", pug.classes(["stars","score",'score-' + score], [false,false,true]), false, true)) + "\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"stars hover\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"stars background\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"text-score\"\u003E\u003Cdiv" + (pug.attr("class", pug.classes(["score-value",'score-' + score], [false,true]), false, true)) + "\u003E" + (pug.escape(null == (pug_interp = score) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"score-notice\"\u003E";
if (score > 0) {
pug_html = pug_html + (pug.escape(null == (pug_interp = I18n.t('activerecord.attributes.user_rate.scores.' + score)) ? "" : pug_interp));
}
else {
pug_html = pug_html + "&nbsp;";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
    }.call(this, "I18n" in locals_for_with ?
        locals_for_with.I18n :
        typeof I18n !== 'undefined' ? I18n : undefined, "score" in locals_for_with ?
        locals_for_with.score :
        typeof score !== 'undefined' ? score : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 83365:
/***/ (() => {

/* (ignored) */

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "js/" + ({"30":"vendors_async-codemirror~coremirror","545":"app-swiper","828":"vendors_async-compiler-core.esm-bundler.js","848":"vendors_async-sortable.esm.js","998":"vendors_async-vue-tags-input.js","1110":"vendors_async-d3~franchise","1471":"shiki_editor_v1","1904":"db_entries_show","2128":"vendors_async-nouislider.mjs","2882":"vendors_async-vuedraggable.umd.js","2960":"vendors_async-uppy","2974":"app-pikaday","3140":"vendors_async-vue3-perfect-scrollbar","3455":"app-imageboards_loader","3637":"app-galleries","3999":"cutted_covers","4200":"vendors_async-shiki_uploader.js","4314":"vendors_async-shiki-editor","4480":"vendors_async-cropper.js","4641":"vendors_async-vuex","5352":"vendors_async-outlayer.js","6130":"codemirror5","6470":"vendors_async-shared.esm-bundler.js","6479":"shiki-editor","6663":"reviews_navigation","6962":"vendors_async-vue","7022":"aligned_posters","7094":"app-edit_styles","7358":"app-franchise","8210":"vendors_async-vue~shiki-editor~vuex","8302":"animes_cosplay","8472":"vendors_async-lowlight","8538":"db_entries_menu","9098":"html5player","9446":"vendors_async-diff-match-patch","9882":"vendors_async-coremirror","9961":"vendors_async-hs","9971":"vendors_async-scroll-lock"}[chunkId] || chunkId) + "-" + {"30":"98be16a0e901b0fb76a9","545":"2ebd3bcf9355fee51a89","828":"b067eff0fcf27610f8a9","848":"babe89822d669ed76165","998":"c54c90c41bd94ddbe7ea","1090":"3775821a693bd75dc698","1110":"344a099412f0865a90f3","1471":"8db14f381666b02ef172","1600":"dab7fce853492d6e5c51","1621":"628be51ca9e10971b5a6","1788":"d62da8b7118967b253c8","1904":"8f3394c34dd40b023d8a","2128":"77d5668c14c399a53ad1","2233":"970c6f0ca98d5bd4b3f6","2803":"a1637f7c59082657d6b5","2882":"504e2c7499b05eb890fb","2960":"7e9e48b190d2e1e904cb","2974":"34b76581d2d8dfbd812f","3140":"6dc1724f155e09f2a620","3455":"9923bcd20f78914c18d9","3536":"c7e2b7281442ed31c8bb","3637":"08294cd16f18c89ffab5","3999":"c2bcad2b151486963a7f","4200":"71674fb62be0dcabbee2","4314":"c97db44021e223f37071","4480":"bbf03e809b80fb2b8699","4641":"2405b7b111e825ca60a4","5352":"ab84620ca05adc9a021d","5721":"bf688dbf5ff776a9a3cc","6130":"05b6cbace04f79b00314","6470":"6f8a3b91f110c9fede32","6479":"98862dbc9b3c1242f852","6663":"122dd3c8868bb9ba7db6","6962":"36c065341164743b94bf","7022":"960d21c49c4a7babc4b8","7094":"befa8a8242897c313e54","7358":"ef9fc0ce234e68a4188b","7943":"2cf30d945342a05f05bd","8210":"81ac774ef7a46adfad2c","8299":"416b320269f3ec08ebe8","8302":"ae3dba278d2b318e4f5d","8472":"aea44f7ac461958b2d45","8538":"1924219fe74f51940971","8590":"e0ea2269d0abb0e71789","9098":"c655faef80d194ef9f08","9446":"35c7a2a38f325af180d7","9855":"0b1c41428ff89624434b","9882":"52a56509e0e65a273778","9961":"cd06f3dd73c300b7afd1","9971":"a79e02f56eb96fd7a59a"}[chunkId] + ".chunk.js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get mini-css chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.miniCssF = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "css/" + chunkId + "-" + {"1090":"e49c68ed","1621":"9ed6d383","2803":"efc7c2e2","3536":"54d01e8e","6479":"88fbd955","8299":"1414a4c9","9855":"0b9a0fa9"}[chunkId] + ".css";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "shikimori:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 		
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/runtimeId */
/******/ 	(() => {
/******/ 		__webpack_require__.j = 4543;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "/packs/";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/css loading */
/******/ 	(() => {
/******/ 		if (typeof document === "undefined") return;
/******/ 		var createStylesheet = (chunkId, fullhref, oldTag, resolve, reject) => {
/******/ 			var linkTag = document.createElement("link");
/******/ 		
/******/ 			linkTag.rel = "stylesheet";
/******/ 			linkTag.type = "text/css";
/******/ 			if (__webpack_require__.nc) {
/******/ 				linkTag.nonce = __webpack_require__.nc;
/******/ 			}
/******/ 			var onLinkComplete = (event) => {
/******/ 				// avoid mem leaks.
/******/ 				linkTag.onerror = linkTag.onload = null;
/******/ 				if (event.type === 'load') {
/******/ 					resolve();
/******/ 				} else {
/******/ 					var errorType = event && event.type;
/******/ 					var realHref = event && event.target && event.target.href || fullhref;
/******/ 					var err = new Error("Loading CSS chunk " + chunkId + " failed.\n(" + errorType + ": " + realHref + ")");
/******/ 					err.name = "ChunkLoadError";
/******/ 					err.code = "CSS_CHUNK_LOAD_FAILED";
/******/ 					err.type = errorType;
/******/ 					err.request = realHref;
/******/ 					if (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)
/******/ 					reject(err);
/******/ 				}
/******/ 			}
/******/ 			linkTag.onerror = linkTag.onload = onLinkComplete;
/******/ 			linkTag.href = fullhref;
/******/ 		
/******/ 		
/******/ 			if (oldTag) {
/******/ 				oldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);
/******/ 			} else {
/******/ 				document.head.appendChild(linkTag);
/******/ 			}
/******/ 			return linkTag;
/******/ 		};
/******/ 		var findStylesheet = (href, fullhref) => {
/******/ 			var existingLinkTags = document.getElementsByTagName("link");
/******/ 			for(var i = 0; i < existingLinkTags.length; i++) {
/******/ 				var tag = existingLinkTags[i];
/******/ 				var dataHref = tag.getAttribute("data-href") || tag.getAttribute("href");
/******/ 				if(tag.rel === "stylesheet" && (dataHref === href || dataHref === fullhref)) return tag;
/******/ 			}
/******/ 			var existingStyleTags = document.getElementsByTagName("style");
/******/ 			for(var i = 0; i < existingStyleTags.length; i++) {
/******/ 				var tag = existingStyleTags[i];
/******/ 				var dataHref = tag.getAttribute("data-href");
/******/ 				if(dataHref === href || dataHref === fullhref) return tag;
/******/ 			}
/******/ 		};
/******/ 		var loadStylesheet = (chunkId) => {
/******/ 			return new Promise((resolve, reject) => {
/******/ 				var href = __webpack_require__.miniCssF(chunkId);
/******/ 				var fullhref = __webpack_require__.p + href;
/******/ 				if(findStylesheet(href, fullhref)) return resolve();
/******/ 				createStylesheet(chunkId, fullhref, null, resolve, reject);
/******/ 			});
/******/ 		}
/******/ 		// object to store loaded CSS chunks
/******/ 		var installedCssChunks = {
/******/ 			4543: 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.miniCss = (chunkId, promises) => {
/******/ 			var cssChunks = {"1090":1,"1621":1,"2803":1,"3536":1,"6479":1,"8299":1,"9855":1};
/******/ 			if(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);
/******/ 			else if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {
/******/ 				promises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {
/******/ 					installedCssChunks[chunkId] = 0;
/******/ 				}, (e) => {
/******/ 					delete installedCssChunks[chunkId];
/******/ 					throw e;
/******/ 				}));
/******/ 			}
/******/ 		};
/******/ 		
/******/ 		// no hmr
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			4543: 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(6479 != chunkId) {
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						} else installedChunks[chunkId] = 0;
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkshikimori"] = self["webpackChunkshikimori"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, [8096], () => (__webpack_require__(86949)))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=application-be9664326115d3aa5eb9.js.map